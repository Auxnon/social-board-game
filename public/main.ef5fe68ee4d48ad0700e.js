/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is not neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkbuup"] = self["webpackChunkbuup"] || []).push([["main"],{

/***/ "./src/Control.js":
/*!************************!*\
  !*** ./src/Control.js ***!
  \************************/
/*! namespace exports */
/*! export addConfetti [provided] [no usage info] [missing usage info prevents renaming] */
/*! export animate [provided] [no usage info] [missing usage info prevents renaming] */
/*! export defineOrbital [provided] [no usage info] [missing usage info prevents renaming] */
/*! export down [provided] [no usage info] [missing usage info prevents renaming] */
/*! export enterVR [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getAngle [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getVRPointer [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export initRadial [provided] [no usage info] [missing usage info prevents renaming] */
/*! export isMenuLocked [provided] [no usage info] [missing usage info prevents renaming] */
/*! export isVR [provided] [no usage info] [missing usage info prevents renaming] */
/*! export lockMenu [provided] [no usage info] [missing usage info prevents renaming] */
/*! export menu1 [provided] [no usage info] [missing usage info prevents renaming] */
/*! export onClick [provided] [no usage info] [missing usage info prevents renaming] */
/*! export pos [provided] [no usage info] [missing usage info prevents renaming] */
/*! export screenX [provided] [no usage info] [missing usage info prevents renaming] */
/*! export screenY [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setRenderer [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setVector [provided] [no usage info] [missing usage info prevents renaming] */
/*! export x [provided] [no usage info] [missing usage info prevents renaming] */
/*! export y [provided] [no usage info] [missing usage info prevents renaming] */
/*! export z [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"x\": () => /* binding */ x,\n/* harmony export */   \"y\": () => /* binding */ y,\n/* harmony export */   \"z\": () => /* binding */ z,\n/* harmony export */   \"pos\": () => /* binding */ pos,\n/* harmony export */   \"down\": () => /* binding */ down,\n/* harmony export */   \"animate\": () => /* binding */ animate,\n/* harmony export */   \"onClick\": () => /* binding */ onClick,\n/* harmony export */   \"setVector\": () => /* binding */ setVector,\n/* harmony export */   \"screenX\": () => /* binding */ screenX,\n/* harmony export */   \"screenY\": () => /* binding */ screenY,\n/* harmony export */   \"initRadial\": () => /* binding */ initRadial,\n/* harmony export */   \"menu1\": () => /* binding */ menu1,\n/* harmony export */   \"defineOrbital\": () => /* binding */ defineOrbital,\n/* harmony export */   \"isMenuLocked\": () => /* binding */ isMenuLocked,\n/* harmony export */   \"lockMenu\": () => /* binding */ lockMenu,\n/* harmony export */   \"getAngle\": () => /* binding */ getAngle,\n/* harmony export */   \"addConfetti\": () => /* binding */ addConfetti,\n/* harmony export */   \"setRenderer\": () => /* binding */ setRenderer,\n/* harmony export */   \"enterVR\": () => /* binding */ enterVR,\n/* harmony export */   \"isVR\": () => /* binding */ isVR,\n/* harmony export */   \"getVRPointer\": () => /* binding */ getVRPointer\n/* harmony export */ });\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _HexManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./HexManager.js */ \"./src/HexManager.js\");\n/* harmony import */ var _Environment_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Environment.js */ \"./src/Environment.js\");\n/* harmony import */ var _lib_OrbitControls_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/OrbitControls.js */ \"./src/lib/OrbitControls.js\");\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n//import * as Chat from \"./Chat.js\";\n\n\n//import * as AssetManager from \"./AssetManager.js\";\n\n//import * as World from \"./World.js\";\n\n\n\n\nvar vrEnabled;\n\nfunction init(){\n\t//window.addEventListener('click',animationControl)\n\tlet target=document.querySelector('.canvasHolder');\n\ttarget.addEventListener('mousemove',mousemove);\n\ttarget.addEventListener('mousedown',mousedown);\n\ttarget.addEventListener('mouseup',mouseup);\n\n\ttarget.addEventListener('touchstart',touchstart);\n\ttarget.addEventListener('touchend',touchend);\n\ttarget.addEventListener('touchmove',touchmove);\n\n\twindow.addEventListener('contextmenu',contextmenu);\n\twindow.addEventListener('keyup',keyup);\n\t//initSettings();\n}\nvar zoomLevelToggle=false\n\nfunction setRenderer(renderer,renderDom,camera,VR){\n\tdefineOrbital(renderDom,camera)\n\tif(VR){\n\t\tdefineVRControl(renderer)\n\t}\n}\nfunction defineOrbital(renderDom,camera){\n\torbital = new _lib_OrbitControls_js__WEBPACK_IMPORTED_MODULE_3__.OrbitControls( camera, renderDom );\n\n\n    orbital.mouseButtons = {\n        LEFT: undefined,\n        MIDDLE: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_4__.MOUSE.ROTATE,\n        RIGHT: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_4__.MOUSE.PAN //THREE.MOUSE.DOLLY\n    }\n\n    orbital.touches = {\n        ONE: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_4__.TOUCH.PAN,\n        TWO: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_4__.TOUCH.DOLLY_ROTATE\n    }\n    orbital.maxPolarAngle=1.3;\n    orbital.isControl()\n\n\n\torbital.addEventListener('change',function(ev){\n\t\tvar zoom = orbital.target.distanceTo(orbital.object.position);\n\n\t\tif(zoom>75){\n\t\t\tif(zoomLevelToggle!=2){\n\t\t\t\tzoomLevelToggle=2;\n\t\t\t\t_Environment_js__WEBPACK_IMPORTED_MODULE_2__.changeShadowScale(1);\n\t\t\t}\n\t\t}else{\n\t\t\tif(zoomLevelToggle!=1){\n\t\t\t\tzoomLevelToggle=1;\n\t\t\t\t_Environment_js__WEBPACK_IMPORTED_MODULE_2__.changeShadowScale(0);\n\t\t\t}\n\t\t}\n\t\tconsole.log('changed camera '+zoom)\n\t})\n\n}\n\nfunction defineVRControl(renderer){\n/*\n    controllers=[];\n    window.controllers=controllers\n    for (let i = 0; i < 2; ++i) {\n      const controller = renderer.xr.getController(i);\n     \n\n      let model=AssetManager.make(\"shroom\")\n      model.scale.set(0.5,0.5,0.5)\n \n      controller.add(model);\n      Render.addToCameraGroup(controller);\n     controllers.push({controller: controller, model: model});\n    }*/\n    \n\n}\nvar buttonBobs=[] //DEV\nvar vrSession\nfunction enterVR(){\n\t/*if(controllers && controllers.length){\n\t\tvrSession =Render.getRenderer().xr.getSession();\n\t\tif(vrSession){\n\t\t\t/*for (let i = 0; i < 2; ++i) {\n\t\t\t\tcontrollers[i].source=session.inputSources[i]\n\t\t\t}*/\n\t\t\t/*for(let j=0;j<7;j++){\n\t\t\t\tlet bob=Render.cubit(0.1,0.1,0.1, 2+j*0.2, 0.2, 1)\n\t\t\t\tbuttonBobs.push(bob)\n\t\t\t\tRender.addModel(bob)\n\t\t\t}*/\n\t\t/*}\n\t}\n\torbital.enabled=false;\n\tvrEnabled=true;*/\n}\nvar controllers\nvar orbital;\nvar mdown=false;\nvar mx=0;\nvar my=0;\nvar px=0,py=0,pz=0;\nvar menuLocked=false;\n\nfunction mousemove(ev){\n\n\tbubbleCheck(ev.clientX,ev.clientY)\n}\nfunction mousedown(ev){\n\tif(ev.which !== 1 ){ //2 mid and 3 right\n\t\treturn false;\n\t}\n\tmdown=true;\n\t\n\treturn true;\n}\nfunction mouseup(ev){\n\tif(ev.which === 2 ){\n\t\treturn false;\n\t}\n\tif(mdown){\n\t\tif(!bubbleMenu ){//&& !orbital.isControl()){\n\t\t\tif(callback)\n\t\t\t\tcallback();\n\t\t}\n\t}\n\tmdown=false;\n\tcloseBubbleMenu();\n}\nfunction touchstart(ev){\n\tmdown=true;\n\tmx=ev.touches[0].clientX;\n\tmy=ev.touches[0].clientY;\n\tstartCircle(mx,my);\n\treturn true;\n}\nfunction touchend(ev){\n\tif(mdown){\n\t\tif(!bubbleMenu && !orbital.isControl()){\n\t\t\tif(callback)\n\t\t\t\tcallback();\n\t\t}\n\t}\n\tmdown=false;\n\tendCircle();\n\tcloseBubbleMenu();\n}\nfunction touchmove(ev){\n\tlet xx=ev.touches[0].clientX;\n\tlet yy=ev.touches[0].clientY;\n\tstartCircle(xx,yy);\n\tbubbleCheck(xx,yy);\n}\n\nfunction getCursor(){\n\treturn {on:mdown,x:mx,y:my}\n}\nfunction screenX(){\n\treturn mx;\n}\nfunction screenY(){\n\treturn my;\n}\nfunction x(){\n\treturn px;\n}\nfunction y(){\n\treturn py;\n}\nfunction z(){\n\treturn pz;\n}\nfunction pos(){\n\treturn {x:px,y:py,z:pz};\n}\nfunction down(){\n\treturn mdown && !orbital.isControl();\n}\n\nfunction setVector(pos){\n\tpx=pos.x;\n\tpy=pos.y;\n\tpz=pos.z;\n\tif(mdown)\n\t\t_HexManager_js__WEBPACK_IMPORTED_MODULE_1__.hexPick(px,py)\n\telse\n\t\t_HexManager_js__WEBPACK_IMPORTED_MODULE_1__.hexCheck(px,py)\n}\nvar callback\nfunction onClick(f){\n\tcallback=f;\n}\n\nvar radialCallbacks=[];\nvar radialIndex=-1;\nfunction initRadial(array){\n\tlet circle=document.createElement('div');\n\tcircle.classList.add('bubbleSelector');\n\tcircle.style.visibility='hidden';\n\ttouchOn=false;\n\tlet mainDom=document.querySelector('#main')\n\tmainDom.appendChild(circle)\n\tif(array && array.length>0){\n\t\tarray.forEach((e,i)=>{\n\t\t\tlet bubb=document.createElement('div');\n\t\t\tbubb.classList.add('bubble');\n\t\t\tbubb.style.backgroundColor=i%2==0?'#FFED9C':'#CCFF9C';\n\t\t\tbubb.style.visibility='hidden';\n\t\t\tbubb.setAttribute('value',e[0]);\n\t\t\tradialCallbacks.push(e[1]);\n\t\t\tmainDom.appendChild(bubb);\n\t\t})\n\t\t\t\n\t\t\n\t}\n\tlet overtext=document.createElement('div');\n\tovertext.classList.add('overtext');\n\tovertext.style.visibility='hidden';\n\tmainDom.appendChild(overtext);\n}\nvar touchOn=false;\nfunction startCircle(xx,yy){\n\t/*let sb=document.querySelector('.bubbleSelector');\n\tif(!touchOn){\n\t\tsb.style.visibility='visible';\n\t\ttouchOn=true;\n\t}\n\tsb.style.left=xx+'px';\n\tsb.style.top=yy+'px';*/\n}\nfunction endCircle(){\n\tif(touchOn){\n\t\tlet sb=document.querySelector('.bubbleSelector');\n\t\tsb.style.visibility='hidden'\n\t\ttouchOn=false;\n\t}\n}\n\nvar bubbleMenu;\nvar tempToggleCamera\nfunction contextmenu(ev){\n\tev.preventDefault();\n\n\t/*if(orbital.enabled){\n\t\torbital.enabled=false;\n\t}else{\n\t\torbital.enabled=true;\n\t}*/\n\n\n\treturn false;\n}\n\nfunction animate(){\n\tif(vrEnabled){\n\t\tif(controllers && controllers.length){\n\t\t//quest gives 7 arrays, contains pressed bool, touched bool, and value float //DEV\n\t\t//controllers[0].source\n\t\t\tif(vrSession){\n\t\t\t\tlet source=vrSession.inputSources[0]\n\t\t\t\tfor(let i=0;i<vrSession.inputSources.length;i++){\n\t\t\t\t\tlet buttons=vrSession.inputSources[0].gamepad.buttons\n\t\t\t\t\tif(i==vrSession.inputSources.length-1){ //pick the last one\n\t\t\t\t\t\t\t//mdown=buttons[i].pressed\n\t\t\t\t\t\t\tif(buttons[i].pressed){\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tmdown=buttons[i].pressed\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t}else{\n\t\tif(orbital && !orbital.enabled){\n\t\t\tlet playerModel=World.getOwnPlayer().model\n\t\t\tlet xx=orbital.object.position.x-playerModel.position.x\n\t\t\tlet yy=orbital.object.position.y-playerModel.position.y\n\t\t\tlet rr=Math.sqrt(xx*xx +yy*yy)\n\t\t\torbital.object.position.x-=yy/rr\n\t\t\torbital.object.position.y+=xx/rr\n\t\t\torbital.object.lookAt(World.getOwnPlayer().model.position)\n\t\t}\n\t}\n\t\n\t\t\n\n\t\t\n\t\t\n\t\t//console.log(controllers[0].source.gamepad.buttons)\n\t\t\t//mdown=\n\t\n}\nfunction getAngle(){\n\treturn orbital.object.rotation.z;\n\t\n}\n\nfunction closeBubbleMenu(){\n\tif(bubbleMenu){\n\t\tbubbleMenu=undefined;\n\t\tlet bubbles=document.querySelectorAll('.bubble');\n\t\tbubbles.forEach(e=>{\n\t\t\te.style.visibility='hidden'\n\t\t})\n\t\tlet ot=document.querySelector('.overtext');\n\t\tif(ot)\n\t\t\tot.style.visibility='hidden'\n\n\t\tif(radialIndex>=0)\n\t\t\tradialCallbacks[radialIndex](px,py,0);\n\t\tlockMenu(false);\n\t}\n}\nfunction openBubbleMenu(){\n\tlet bubbles=document.querySelectorAll('.bubble');\n\tif(bubbles && bubbles.length){\n\t\tlet radial=2*Math.PI/bubbles.length;\n\t\tbubbleMenu={x:mx,y:my};\n\t\t//bubbles.removeClass('hideBubble');\n\t\tbubbles.forEach((e,i)=>{\n\n\t\t\tlet xx=mx+Math.sin(radial*i)*50;\n\t\t\tlet yy=my-Math.cos(radial*i)*50;\n\t\t\t\n\t\t\te.style.left=xx+'px';\n\t\t\te.style.top=yy+'px';\n\t\t\te.style.visibility='visible';\n\t\t\t\n\t\t});\n\t\tlockMenu(true);\n\t}\n}\nfunction bubbleCheck(x,y){\n\tif(bubbleMenu){\n\t\tmoveBubbleSelector(x,y)\n\t}else{\n\t\tmx=x;my=y;\n\t}\n}\nfunction moveBubbleSelector(x,y){\n\tlet xx=x;\n\tlet yy=y;\n\t// let sb=document.querySelector('.bubbleSelector')\n\t// sb.style.left=xx+'px';\n\t// sb.style.top=yy+'px';\n\tlet dx=x-bubbleMenu.x;\n\tlet dy=y-bubbleMenu.y;\n\tlet dr=Math.sqrt(dx*dx + dy*dy);\n\tlet R=angle(dx,dy);\n\t\n\n\tlet bubbles=document.querySelectorAll('.bubble')\n\tlet radial=2*Math.PI/bubbles.length;\n\tlet tt=R/radial +radial/2;\n\tlet index=Math.floor(tt);\n\tif(index>=bubbles.length)index=0;\n\n\tif(dr>100){\n\t\tindex=-1;\n\t}\n\tlet text=\"\"\n\tbubbles.forEach((e,i)=>{\n\t\tif(i==index){\n\t\t\te.style.border='solid blue 6px';\n\t\t\ttext=e.getAttribute('value');\n\t\t}else{\n\t\t\te.style.border='';\n\t\t}\n\t});\n\tlet ang=180*R/Math.PI\n\tlet ot=document.querySelector('.overtext');\n\tif(index>-1){\n\t\tot.style.visibility='visible';\n\t\tot.style.left=x+'px';\n\t\tot.style.top=y+'px';\n\t\tot.innerHTML=text;\n\t\tif(dx>25){\n\t\t\tot.style.transform='translate(28px,-50%)';\n\t\t}else if(dx<-25){\n\t\t\tot.style.transform='translate(calc(-28px - 100%),-50%)';\n\t\t}else{\n\t\t\tot.style.transform='translate(-50%,calc(-28px - 100%))';\n\t\t}\n\t}else{\n\t\tot.style.visibility='hidden';\n\t}\n\tradialIndex=index;\n\n\t//let text=bubbles.eq(index).attr('value');\n\t//console.log(text);\n\t/*if(text){\n\t\t$('.selectBubble').children().html(text);\n\t}*/\n\t\n}\n\nfunction menu1(){\n\tlet bm=document.querySelector('.buttonMenu');\n\tif(bm.style.visibility=='hidden'){\n\t\tbm.style.visibility='visible'\n\t\tlockMenu(true);\n\t}else{\n\t\tbm.style.visibility='hidden'\n\t\tlockMenu(false);\n\t}\n}\nfunction angle(dx,dy) {\n  let theta = Math.atan2(dx, -dy); // range (-PI, PI]\n  //theta *= 180 / Math.PI; // rads to degs, range (-180, 180]\n  if (theta < 0) theta = Math.PI*2 + theta; // range [0, 360)\n  return theta;\n}\n\nfunction keyup(ev){\n\tif(isMenuLocked()){\n\t\treturn false;\n\t}else{\n\t\t if(ev.which==13){\n\t\t\t//Chat.openChat();\n\t\t}else if(ev.which==192){ //DEV\n\t\t\twindow.pickTarget=_Render_js__WEBPACK_IMPORTED_MODULE_0__.pick();\n\t\t\tif(window.pickTarget)\n\t\t\t\tconsole.log(\"picked a \"+window.pickTarget.type)\n\n\t\t}\n\t}\n\n}\nfunction isMenuLocked(){\n\treturn menuLocked;\n}\nfunction lockMenu(b){\n\tmenuLocked=b;\n\t\n\t\tlet doms=document.querySelectorAll('.menuHidable');\n\t\tif(doms.length){\n\t\t\tdoms.forEach(d=>{\n\t\t\t\td.style.visibility=b?'hidden':'visible';\n\t\t\t})\n\t\t}\n\t\n}\n\nvar settingsObject={};\nfunction initSettings(){\n\tlet mainDom=document.querySelector('#main')\n\n\tlet settingsButton=document.createElement('div');\n\tsettingsButton.classList.add('settingsButton','menuHidable');\n\tmainDom.appendChild(settingsButton);\n\n\tlet settingsBlock=document.createElement('div');\n\tsettingsBlock.classList.add('settingsBlock');\n\n\tlet settings=document.createElement('div');\n\tsettings.classList.add('settingsPane');\n\tsettingsBlock.appendChild(settings);\n\tmainDom.appendChild(settingsBlock);\n\tsettingsBlock.style.visibility='hidden';\n\n\n\tfunction addButton(text,callback,reference,possibleValues){\n\t\tlet row=document.createElement('div')\n\t\tlet button=document.createElement('div');\n\t\tbutton.classList.add('switch');\n\t\tlet defaultState;\n\t\tif(reference){\n\t\t\tdefaultState=settingsObject[reference];\n\t\t}\n\n\t\tif(possibleValues){ //not boolean\n\t\t\tif(defaultState!=possibleValues[0]){\n\t\t\t\tif(defaultState!=possibleValues[possibleValues.length-1]){\n\t\t\t\t\tbutton.classList.add('switchHalf');\n\t\t\t\t}else{\n\t\t\t\t\tbutton.classList.add('switchOn');\n\t\t\t\t}\n\t\t\t}\n\t\t\tbutton.setAttribute(\"value\",defaultState);\n\t\t\tlet index=0;\n\t\t\tfor(let ii=0;ii<possibleValues.length;ii++){\n\t\t\t\tif(possibleValues[ii]==defaultState){\n\t\t\t\t\tindex=ii;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbutton.setAttribute(\"index\",index);\n\t\t\tbutton.addEventListener('click',function(ev){\n\t\t\t\tev.stopPropagation();\n\t\t\t\tlet i=button.getAttribute(\"index\");\n\t\t\t\ti++;\n\t\t\t\tif(i>=possibleValues.length){\n\t\t\t\t\ti=0;\n\t\t\t\t}\n\t\t\t\tif(i==0){\n\t\t\t\t\tbutton.classList.remove('switchOn');\n\t\t\t\t}else if(i==possibleValues.length-1){\n\t\t\t\t\tbutton.classList.remove('switchHalf');\n\t\t\t\t\tbutton.classList.add('switchOn');\n\t\t\t\t}else{\n\t\t\t\t\tbutton.classList.add('switchHalf');\n\t\t\t\t}\n\t\t\t\tlet val=possibleValues[i];\n\t\t\t\tbutton.setAttribute(\"value\",val);\n\t\t\t\tbutton.setAttribute(\"index\",i);\n\t\t\t\tcallback(val);\n\t\t\t\tupdateSettings(reference,val)\n\n\t\t\t\t/*\n\t\t\t\tif(!button.classList.contains('switchOn')){\n\t\t\t\t\tbutton.classList.add('switchOn')\n\t\t\t\t\tcallback(true);\n\t\t\t\t\tupdateSettings(reference,true)\n\t\t\t\t}else{\n\t\t\t\t\tbutton.classList.remove('switchOn')\n\t\t\t\t\tcallback(false);\n\t\t\t\t\tupdateSettings(reference,false)\n\t\t\t\t}*/\n\t\t\t});\n\t\t}else{ //boolean\n\t\t\tif(defaultState)\n\t\t\t\tbutton.classList.add('switchOn');\n\n\t\t\tbutton.addEventListener('click',function(ev){\n\t\t\t\tev.stopPropagation();\n\t\t\t\tif(!button.classList.contains('switchOn')){\n\t\t\t\t\tbutton.classList.add('switchOn')\n\t\t\t\t\tcallback(true);\n\t\t\t\t\tupdateSettings(reference,true)\n\t\t\t\t}else{\n\t\t\t\t\tbutton.classList.remove('switchOn')\n\t\t\t\t\tcallback(false);\n\t\t\t\t\tupdateSettings(reference,false)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\t\n\n\n\t\t\n\t\trow.appendChild(button);\n\n\t\tlet label=document.createElement('span');\n\t\tlabel.innerHTML=text;\n\t\trow.appendChild(label);\n\t\tsettings.appendChild(row);\n\t\tcallback(defaultState)\n\t}\n\tlet storedSettings=localStorage.getItem(\"settings\");\n\tif (storedSettings === null) {\n  \t\tsettingsObject={\n  \t\t\tmaxResolution:\"1\",\n  \t\t\tmaxShadow:true,\n  \t\t\tother:true\n  \t\t}\n\t}else{\n\t\tsettingsObject=JSON.parse(storedSettings);\n\t}\n\n\taddButton('max resolution (turn off if it lags)',_Render_js__WEBPACK_IMPORTED_MODULE_0__.setResolution,\"maxResolution\",[\"4\",\"2\",\"1\"]);\n\taddButton('max shadow resolution (turn off if it lags)',_Environment_js__WEBPACK_IMPORTED_MODULE_2__.setShadows,\"maxShadow\");\n\taddButton('shadows (turn off if it lags)',function(bool){},\"other\");\n\taddButton('force update',function(bool){if(bool)window.location.reload(true)});\n\taddButton('Toggle light helper',_Environment_js__WEBPACK_IMPORTED_MODULE_2__.setLightHelper,\"lightHelper\");\n\n\n\t\n\tsettingsButton.addEventListener('click',function(ev){\n\t\tif(!isMenuLocked()){\n\t\t\tlockMenu(true);\n\t\t\tsettingsBlock.style.visibility='visible';\n\t\t}\n\t\taddConfetti(settingsButton.offsetLeft+30,settingsButton.offsetTop+30,315);\n\n\t})\n\n\tsettingsBlock.addEventListener('click',function(ev){\n\t\tif(ev.target==settingsBlock){\n\t\t\tsettingsBlock.style.visibility='hidden';\n\t\t\tlockMenu(false);\n\t\t}\n\t})\n\n}\nfunction updateSettings(reference,val){\n\tif(reference){\n\t\tsettingsObject[reference]=val;\n\t\tlocalStorage.setItem('settings',JSON.stringify(settingsObject));\n\t}\n}\n\nfunction addConfetti(x,y,angle){\n\tlet mainDom=document.querySelector('#main')\n\n\tlet con=document.createElement('div');\n\tcon.classList.add('confetti');\n\tcon.innerHTML='<svg viewbox=\"0 0 100 100\" style=\"fill:none;stroke:lightgreen;stroke-linecap:round\"><path d=\"M45 70L55 75M45 50L55 50M45 30L55 25\" /></svg>';\n\tcon.style.left=x+'px'\n\tcon.style.top=y+'px',\n\tcon.style.transform='translate(-50%,-50%) rotate('+(angle?angle:0)+'deg)';\n\tsetTimeout(function(){\n\t\tcon.remove();\n\t},500);\n\tmainDom.appendChild(con)\n}\n\nfunction isVR(){\n\treturn vrEnabled\n}\nfunction getVRPointer(){\n\treturn controllers[controllers.length-1].controller;\n}\n\nfunction moveLock(){\n\n}\n\n\n\n\n//# sourceURL=webpack://buup/./src/Control.js?");

/***/ }),

/***/ "./src/Environment.js":
/*!****************************!*\
  !*** ./src/Environment.js ***!
  \****************************/
/*! namespace exports */
/*! export animate [provided] [no usage info] [missing usage info prevents renaming] */
/*! export changeShadowScale [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getWind [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setLightHelper [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setShadows [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"getWind\": () => /* binding */ getWind,\n/* harmony export */   \"animate\": () => /* binding */ animate,\n/* harmony export */   \"changeShadowScale\": () => /* binding */ changeShadowScale,\n/* harmony export */   \"setShadows\": () => /* binding */ setShadows,\n/* harmony export */   \"setLightHelper\": () => /* binding */ setLightHelper\n/* harmony export */ });\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n\n\nvar wind;\n\nvar debugLightHelper;\nvar sunLight;\nvar sunLight2;\nvar sunTarget;\nvar ambientLight;\n\nvar SHADOW_SIZE=1024;//2048*16;\n\nlet pi2=Math.PI*2;\n\nlet tempHeight=20;\nlet tempD=-0.04; //-0.004\n\nfunction init(){\n \n\twind=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(1,0,0);\n\n\n\tambientLight = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.AmbientLight( 0x8F8F8F ); // soft white light  0x404040\n\t_Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel2( ambientLight );\n\n\t//var directionalLight = new THREE.PointLight( 0xffffff, 1,100 );\n\tsunLight = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.DirectionalLight( 0xE05757, 0.5 ); //DirectionalLight\n\tsunLight.position.set(0,250,0);\n\tsunLight.castShadow = true;\n\t_Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel2( sunLight );\n\tsunTarget=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Object3D();\n\tsunTarget.position.set(20,0,20);\n\t_Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel2( sunTarget );\n\tsunLight.target=sunTarget;\n\n\n\tsunLight.shadow.mapSize.width = SHADOW_SIZE;  // default\n\tsunLight.shadow.mapSize.height = SHADOW_SIZE; // default\n\tsunLight.shadow.camera.near = 1;    // default\n\t    // default\n\t\n\tchangeShadowScale(0);\n\n\tsunLight.shadow.radius = 2.2;//2.2;\n\tsunLight.shadow.bias = -.0005;\n\n\tsunLight2=sunLight.clone();\n\tsunLight2.shadow.mapSize.width = 256;//256;  // default\n\tsunLight2.shadow.mapSize.height = 256;//256; // default\n\tsunLight2.shadow.radius = 0;\n\n\tsunLight2.visible=false;\n\n\t_Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel2(sunLight2);\n\n\t\n\n\twindow.sunLight=sunLight;\n\tsetLightHelper(true)\n\n}\n\nfunction changeShadowScale(factor){\n\tlet d1;\n\n\tif(factor==1){\n\t\td1 = 450;\n\t\tsunLight.shadow.camera.far = 600; \n\t\tsunLight.shadow.mapSize.width = SHADOW_SIZE/2;\n\t\tsunLight.shadow.mapSize.height= SHADOW_SIZE/2;\n\t}else{\n\t\td1 = 150;\n\t\tsunLight.shadow.mapSize.width = SHADOW_SIZE;\n\t\tsunLight.shadow.mapSize.height= SHADOW_SIZE;\n\t\tsunLight.shadow.camera.far = 300; \n\t}\n\n\tsunLight.shadow.camera.left = -d1;\n\tsunLight.shadow.camera.right = d1;\n\tsunLight.shadow.camera.top = d1;\n\tsunLight.shadow.camera.bottom = -d1;\n\tif(sunLight.shadow.map){\n\t\tsunLight.shadow.map.dispose()\n\t\tsunLight.shadow.map = null\n\t}\n\n\tif(debugLightHelper){\n\t\tsetTimeout(function(){\n\t\t\tdebugLightHelper.update();\n\t\t},1000)\n\t\t\n\t}\n\n\n}\n\nfunction cycle(){\n\n}\nfunction getWind(){\n\treturn wind;\n}\n\n\nfunction animate(){\n\n\ttempHeight+=tempD;\n    if(tempHeight<0){\n        tempHeight=0;\n        tempD=-tempD;\n    }else if(tempHeight>40){\n        tempHeight=40;\n        tempD=-tempD;\n    }\n    if(tempHeight>10){\n        sunLight.color.setHex(0xffffff);\n        ambientLight.color.setHex(0x606060);\n        _Render_js__WEBPACK_IMPORTED_MODULE_1__.setClearColor(0xb0e9fd,1);\n    }/*else if(tempHeight>50){\n        sunLight.color.setHex(0xFAD227);\n        ambientLight.color.setHex(0x5E5371);\n        Render.setClearColor(0xF0FDB0,1);\n    }else{\n        sunLight.color.setHex(0xFF6600);\n        ambientLight.color.setHex(0x3F2A62);\n        Render.setClearColor(0xF86722,1);\n    }*/\n    sunLight.position.z=200+tempHeight*4;\n    sunTarget.position.set(0,0,-tempHeight*4);\n}\n\n\nfunction setShadows(bool){\n    if(!bool){\n        //SHADOW_SIZE=2048;\n         sunLight.visible = false;\n         sunLight2.visible = true;\n    }\n    else{\n        //SHADOW_SIZE=512;\n        sunLight.visible = true;\n         sunLight2.visible = false;    \n     }\n   // sunLight.shadow.mapSize.width = SHADOW_SIZE;  // default\n    //sunLight.shadow.mapSize.height = SHADOW_SIZE; // default\n}\n\nfunction setLightHelper(bool){\n    if(!bool){\n         if(debugLightHelper){\n         \tdebugLightHelper.visible=false;\n         }\n    }\n    else{\n    \tif(!debugLightHelper){\n    \t\tdebugLightHelper = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.CameraHelper( sunLight.shadow.camera );\n\t\t\t_Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel( debugLightHelper ); \n    \t}else{\n    \t\tdebugLightHelper.visible=true;\n    \t}\n        \n     }\n}\n\n\n\n//# sourceURL=webpack://buup/./src/Environment.js?");

/***/ }),

/***/ "./src/Helper.js":
/*!***********************!*\
  !*** ./src/Helper.js ***!
  \***********************/
/*! namespace exports */
/*! export getRandomColor [provided] [no usage info] [missing usage info prevents renaming] */
/*! export hexToRGB [provided] [no usage info] [missing usage info prevents renaming] */
/*! export hexToRGBFloat [provided] [no usage info] [missing usage info prevents renaming] */
/*! export rgbFloatToHex [provided] [no usage info] [missing usage info prevents renaming] */
/*! export rgbToHex [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"rgbToHex\": () => /* binding */ rgbToHex,\n/* harmony export */   \"rgbFloatToHex\": () => /* binding */ rgbFloatToHex,\n/* harmony export */   \"hexToRGB\": () => /* binding */ hexToRGB,\n/* harmony export */   \"hexToRGBFloat\": () => /* binding */ hexToRGBFloat,\n/* harmony export */   \"getRandomColor\": () => /* binding */ getRandomColor\n/* harmony export */ });\n\n\nfunction hexToRGB(h) {\n\tif(h.startsWith('0x'))\n\t\th=h.substring(1)\n  let r = 0, g = 0, b = 0;\n\n  // 3 digits\n  if (h.length == 4) {\n    r = \"0x\" + h[1] + h[1];\n    g = \"0x\" + h[2] + h[2];\n    b = \"0x\" + h[3] + h[3];\n\n  // 6 digits\n  } else if (h.length == 7) {\n    r = \"0x\" + h[1] + h[2];\n    g = \"0x\" + h[3] + h[4];\n    b = \"0x\" + h[5] + h[6];\n  }\n  let ar=[parseInt(r),parseInt(g),parseInt(b)]\n  \n  return ar;\n}\nfunction hexToRGBFloat(h){\n\tlet ar=hexToRGB(h);\n\treturn ar.map(v=>{return v/256.0})\n}\n\nfunction componentToHex(c) {\n  var hex = c.toString(16);\n  return hex.length == 1 ? \"0\" + hex : hex;\n}\n\nfunction rgbToHex(r, g, b) {\n  return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\n}\nfunction rgbFloatToHex(r,g,b){\n\tr=Math.floor(r*256);\n\tg=Math.floor(g*256);\n\tb=Math.floor(b*256);\n\treturn rgbToHex(r,g,b)\n}\n\nfunction getRandomColor() {\n  var letters = '0123456789ABCDEF';\n  var color = '';//Math.random()>0.3?0x66B136:0x76610E;\n  for (var i = 0; i < 6; i++) {\n    let val;\n    /*if(i<2)\n        val=(Math.random() * 4)+4\n    else if(i<4)\n        val=(Math.random() * 6)+7\n    else*/\n        val=Math.random() * 16\n\n    color += letters[Math.floor(val)];\n  }\n  return parseInt(color);\n}\n\n\n\n//# sourceURL=webpack://buup/./src/Helper.js?");

/***/ }),

/***/ "./src/HexManager.js":
/*!***************************!*\
  !*** ./src/HexManager.js ***!
  \***************************/
/*! namespace exports */
/*! export hexCheck [provided] [no usage info] [missing usage info prevents renaming] */
/*! export hexPick [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setType [provided] [no usage info] [missing usage info prevents renaming] */
/*! export toggleType [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"hexCheck\": () => /* binding */ hexCheck,\n/* harmony export */   \"hexPick\": () => /* binding */ hexPick,\n/* harmony export */   \"toggleType\": () => /* binding */ toggleType,\n/* harmony export */   \"setType\": () => /* binding */ setType\n/* harmony export */ });\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _Helper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Helper.js */ \"./src/Helper.js\");\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n\n\n\n\n//grass #6CA90B\n//grass2/tree leaf #A1C73A\n//grass3 #53963F\n//path #BEB55D\n//mountain/dirt #907B67\n///riverside #999065  river edged grass use grass3\n//river #659799\n// tree #B68A61\n//tree2 #8C735B\n\n\nvar hex=[]\nvar landBits=[]\nvar grid=[];\nconst SCALE=80\nconst SIZE=32\nconst HALF_GRID=12*SCALE/2\n\nvar hexType=2;\n\nfunction init(){\n\n_Render_js__WEBPACK_IMPORTED_MODULE_0__.loadModel('./assets/models/Hex.glb',m=>{\n\tconsole.log('got children '+m.children.length)\n\tlet basicMat = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__.MeshStandardMaterial({ vertexColors: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__.VertexColors, metalness: 0, roughness: 1.0}); // \n\t//basicMat.shading = THREE.SmoothShading;\n\tfor(let i=0;i<m.children.length;i++){\n\t\t//m.children[i]\n\t\tlet mm=m.children[i]\n\t\t//mm.geometry.computeVertexNormals(true);\n\t\t//m.children[i].scale.set(200,200,200)\n\t\t//mm.rotation.x=Math.PI/2\n\t\tmm.position.set(0,0,60)\n\t\tmm.scale.set(SCALE,SCALE,SCALE)\n    //mm.material= new THREE.MeshBasicMaterial( {color: 0x20E89F, side: THREE.FrontSide} );\n\n\t\tmm.material=basicMat\n\t\tmm.receiveShadow =true;\n\t\tif(mm.name.startsWith(\"Mount\") || mm.name.startsWith(\"Tree\"))\n\t\t\tmm.castShadow =true;\n\t\t//Render.addModel(mm)\n\t\thex[mm.name]=mm;\n\n\t\tlet colors=[];\n\t\tif(mm.geometry){\n\n\n\t\t\tlet count=mm.geometry.attributes.color.array.length/4\n\t\t\tfor(let i=0;i<count;i++){\n\t\t\t\tlet n=i*4;\n\t\t\t\tlet vr=mm.geometry.attributes.color.array[0+n];\n\t\t\t\tlet vg=mm.geometry.attributes.color.array[1+n];\n\t\t\t\tlet vb=mm.geometry.attributes.color.array[2+n];\n\t\t\t\t//let va=mm.geometry.attributes.color.array[3+n];\n\t\t\t\tlet val=_Helper_js__WEBPACK_IMPORTED_MODULE_1__.rgbFloatToHex(vr,vg,vb)\n\t\t\t\tcolors[val]=val\n\t\t\t}\n\n\t\t\tconsole.log(colors)\n\t\t}\n\t\t\n\t\t//console.log(vr,vg,vb,va)\n\t\t//let val=Helper.rgbFloatToHex(mm.geometry.attributes.color.array[0],mm.geometry.attributes.color.array[1],mm.geometry.attributes.color.array[2])\n\t\t//console.log(val)\n\n\t}\n\tclearLand()\n\n\t\twindow.hex=hex;\n\t\twindow.place=place\n\t\twindow.land=land\n\t\twindow.clearLand=clearLand\n\t \t\n\n\t\n\t//window.m=m;//.children[0]\n})\n\n}\n\nfunction place(x,y,t){\n\tgrid[x][y]=t\n\tprocessLand();\n}\n\nfunction processLand(){\n\tSEED=6;\n\tmodelClear()\n\tfor(let i=0;i<grid.length;i++){\n\t\tfor(let j=0;j<grid.length;j++){\n\t\t\tlet n=grid[i][j];\n\t\t\tlet rando=Math.floor(randomSeed(1,4))\n\t\t\tlet turner=Math.floor(randomSeed(1,6))\n\t\t\tif(n!=1){ //hex coordinate system follows, hang tight it's a bumpy ride!\n\t\t\t\t//if(i==2 && j==2)\n\t\t\t\t\t//debugger\n\t\t\t\tlet l,r,tl,tr;\n\n\t\t\t\tl=(i>0)?grid[i-1][j]:0  \n\t\t\t\t // pure hex x left right\n\t\t\t\tr=(i<grid.length-1)?grid[i+1][j]:0\n\n\n\t\t\t\t//land('P1',i,j,1)\n\t\t\t\n\t\t\t\t//upper hex edges, left and right\n\n\t\t\t\tif(j<grid.length-1){\n\n\t\t\t\t\ttl=(i>0)?grid[i-1][j+1]:0\n\t\t\t\t\ttr=grid[i][j+1]\n\t\t\t\t}else{\n\t\t\t\t\ttl=0;tr=0;\n\t\t\t\t}\n\n\t\t\t\t//land('T1',i,j,1)\n\n\t\t\t\t//lower hex edges, left and right, notice the farther then normal postive check due to our skewed hex design\n\t\t\t\t\n\t\t\t\tlet bl,br;\n\t\t\t\tif(j>0){\n\t\t\t\t\tbl=grid[i][j-1]\n\t\t\t\t\tbr=(i<grid.length-1)? grid[i+1][j-1]:0\n\t\t\t\t}else{\n\t\t\t\t\tbl=0;br=0;\n\t\t\t\t}\n\t\t\t\tl=l==n;r=r==n;tr=tr==n;br=br==n;bl=bl==n;tl=tl==n;\n\n\t\t\t\tlet st=(tl?'1':'0') + (l?'1':'0') + (bl?'1':'0') + (br?'1':'0') + (r?'1':'0') + (tr?'1':'0');\n\t\t\t\t\n\n\t\t\t\t//let total=l?1:0 + r?1:0 + tl?1:0 + tr?1:0 + bl?1:0 + br?1:0;\n\t\t\t\tlet start=-1;\n\t\t\t\tlet index=0;\n\t\t\t\tlet circle=[tl,tr,r,br,bl,l]\n\t\t\t\tlet branches=[];\n\t\t\t\tlet hole=5;\n\t\t\t\tcircle.forEach((b,i)=>{\n\t\t\t\t\tif(b){\n\t\t\t\t\t\tbranches.push(i)\n\t\t\t\t\t\tif(start==-1)\n\t\t\t\t\t\t\tstart=i;\n\n\t\t\t\t\t\tindex=i;\n\t\t\t\t\t}else\n\t\t\t\t\t\thole=i\n\t\t\t\t})\n\t\t\t\tconsole.log('grid %i %i %s branches %i',i,j,st,branches.length)\n\n\t\t\t\tlet letter='N'\n\t\t\t\tlet type=''\n\t\t\t\tif(branches.length==6){\n\t\t\t\t\tland(n,'H'+type,i,j,Math.floor(turner));\n\t\t\t\t}else if(branches.length>0){\n\t\t\t\t\tlet distances=[];\n\t\t\t\t\t\n\t\t\t\t\tvar last=branches[0]\n\t\t\t\t\tfor(let i=1;i<branches.length;i++){\n\t\t\t\t\t\tdistances.push((branches[i]-last)-1)\n\t\t\t\t\t\tlast=branches[i]\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log(distances)\n\n\t\t\t\t\tlet r=start==-1?0:start;\n\t\t\t\t\t\n\t\t\t\t\tswitch(branches.length){\n\t\t\t\t\t\tcase 1:  letter='E'\n\t\t\t\t\t\tr+=0;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 2:  letter='P'; \n\t\t\t\t\t\tif(distances[0]==0){\n\t\t\t\t\t\t\ttype='3';r+=0;\n\t\t\t\t\t\t}else if(distances[0]==1){\n\t\t\t\t\t\t\ttype='2';r+=0;\n\t\t\t\t\t\t}else if(distances[0]==2){\n\t\t\t\t\t\t\ttype='1';r+=0;\n\t\t\t\t\t\t}else if(distances[0]==3){\n\t\t\t\t\t\t\ttype='2';r+=4;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\ttype='3';r+=5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 3:letter='T'; //3 paths\n\t\t\t\t\t\tif(distances[0]==0){\n\t\t\t\t\t\t\tif(distances[1]==0){\n\t\t\t\t\t\t\t\ttype=1;r+=0;\n\t\t\t\t\t\t\t}else if(distances[1]==3){\n\t\t\t\t\t\t\t\ttype=1;r+=5;\n\t\t\t\t\t\t\t}else if(distances[1]==1){\n\t\t\t\t\t\t\t\ttype=3;r+=3;\n\t\t\t\t\t\t\t}else if(distances[1]==2){\n\t\t\t\t\t\t\t\ttype=2;r+=4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else if(distances[0]==1){\n\t\t\t\t\t\t\tif(distances[1]==0){\n\t\t\t\t\t\t\t\ttype=2;//r+=0;\n\t\t\t\t\t\t\t}else if(distances[1]==1){\n\t\t\t\t\t\t\t\ttype=4;//r+=0;\n\t\t\t\t\t\t\t}else if(distances[1]==2){\n\t\t\t\t\t\t\t\ttype=3;r+=2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else if(distances[0]==2){\n\t\t\t\t\t\t\tif(distances[1]==0){\n\t\t\t\t\t\t\t\ttype=3;r+=0;\n\t\t\t\t\t\t\t}else if(distances[1]==1){\n\t\t\t\t\t\t\t\ttype=2;r+=3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\ttype=1;r+=4;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tr=r%6;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 4:letter='Q'; //4 path\n\t\t\t\t\t\tif(distances[0]==0){\n\t\t\t\t\t\t\tif(distances[1]==0){\n\t\t\t\t\t\t\t\tif(distances[2]==0){\n\t\t\t\t\t\t\t\t\ttype=1;r+=0\n\t\t\t\t\t\t\t\t}else if(distances[2]==1){\n\t\t\t\t\t\t\t\t\ttype=3;r+=2;\n\t\t\t\t\t\t\t\t}else if(distances[2]==2){\n\t\t\t\t\t\t\t\t\ttype=1; r+=5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}else if(distances[1]==1){\n\t\t\t\t\t\t\t\tif(distances[2]==0){\n\t\t\t\t\t\t\t\t\ttype=2;r+=4;\n\t\t\t\t\t\t\t\t}else if(distances[2]==1){\n\t\t\t\t\t\t\t\t\ttype=3;r+=1\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}else {//}( 2==2)\n\t\t\t\t\t\t\t\ttype=1;r+=4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else if(distances[0]==1){\n\t\t\t\t\t\t\tif(distances[1]==0){\n\t\t\t\t\t\t\t\tif(distances[2]==0){\n\t\t\t\t\t\t\t\t\ttype=3; r+=4;\n\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\ttype=2;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}else{ //1 1 0\n\t\t\t\t\t\t\t\ttype=3\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\ttype=1;r+=3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tr=r%6;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 5:letter='F';\n\t\t\t\t\t\tr=hole+1;\t\t\t\t\t\t\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\n\n\t\t\t\t\t}\n\t\t\t\t\tland(n,letter+type,i,j,r)\n\t\t\t\t}else{\n\t\t\t\t\tland(n,'N',i,j,0)\n\t\t\t\t}\n\n\n\n\t\t\t\t//rotation 0 tl\n\t\t\t\t//1 l\n\t\t\t\t//2 bl\n\t\t\t\t//3 br\n\t\t\t\t//4 r\n\t\t\t\t//5 tr\n/*\n\t\t\t\tswitch(total){\n\t\t\t\t\tcase 1: land('P2',i,j); break;\n\t\t\t\t\tcase 2: land('P1',i,j); break;\n\t\t\t\t\tcase 3: land('T1',i,j); break;\n\t\t\t\t\tcase 4: land('Q1',i,j); break;\n\t\t\t\t\tcase 5: land('F1',i,j); break;\n\t\t\t\t\tcase 6: land('H',i,j); break;\n\t\t\t\t\tdefault: land('O1',i,j);\n\t\t\t\t}*/\n\n\t\t\t\t//land('Q1',i,j,1)\n\n\t\t\t\t \n\t\t\t\t//no neighbors! \n\t\t\t\t//land('P1',i,j,n-2)\n\n\t\t\t}else if(n==1){\n\t\t\t\t//SEED=i*j\n\t\t\t\tland(n,'O'+rando,i,j,Math.floor(turner))//,Math.floor(Math.random()*6))\n\t\t\t}\n\t\t}\n\n\t}\n}\n\nfunction land(n,st,x,y,r) {\n\t//n==1 grass, n==2 path, n==3 mount\n\tlet radius=1;\n\tlet skew=SCALE*radius*Math.sqrt(3)/2;\n\tlet prefix=\"Grass_\"\n\tif(n==3){\n\t\tprefix=\"Mount_\"\n\t}else if(n==4){\n\t\tprefix=\"Tree_\"\n\t}else if(n==0){\n\t\tprefix=\"Water_\"\n\t}\n\n\t//dummy.position.set(offsetx+i*9,0,offsetz+j*skew*2 +i*skew);\n\tlet m=hex[prefix+st].clone();\n\tm.position.set((-HALF_GRID)+x*skew*2 +y*skew,y*SCALE*1.5,-SCALE*.2)\n\tif(r){ //sp always not 0\n\t\tr=6-r;\n\t\tm.rotation.z=r*Math.PI/3\n\t}\n\t\n\tlandBits.push(m)\n\t_Render_js__WEBPACK_IMPORTED_MODULE_0__.addModel(m)\n}\n\nfunction modelClear(){\n\tlandBits.forEach(m=>{\n\t\t_Render_js__WEBPACK_IMPORTED_MODULE_0__.removeModel(m)\n\t})\n\tlandBits=[];\n}\nfunction clearLand(){\n\t\n\tmodelClear()\n\tfor(let i=0;i<SIZE;i++){\n\t\tgrid[i]=[];\n\t\tfor(let j=0;j<SIZE;j++){\n\t\t\tgrid[i][j]=1\n\t\t}\n\t}\n}\n\nfunction hexCheck(x,y){\n\n\tlet radius=1;\n\tlet skew=SCALE*radius*Math.sqrt(3)/2;\n\t//m.position.set(-120+x*skew*2 +y*skew,-120+y*30,40)\n\tlet y2=Math.floor((SCALE+y)/(SCALE*1.5));\n\tlet x2=Math.floor(((x+HALF_GRID+SCALE)-y2*skew)/(skew*2))\n\t_Render_js__WEBPACK_IMPORTED_MODULE_0__.setHexSelector(-HALF_GRID+x2*skew*2 +y2*skew,y2*SCALE*1.5,8)\n\t\n\treturn [x2,y2]\n\n\t\n}\nlet lastPick={x:0,y:0}\nfunction hexPick(x,y){\n\tlet [x2,y2] = hexCheck(x,y)\n\n\t//console.log('click',x,y,x2,y2)\n\tlet bounds=grid.length;\n\tif(!(x2==lastPick.x && y2==lastPick.y) && x2>-1 && y2>-1 && x2<bounds && y2<bounds){\n\t\t/*let v=grid[x2][y2];\n\t\t\n\t\tif(v==hexType)\t\n\t\t\tv=1\n\t\telse\n\t\t\tv=hexType*/\n\n\n\t\tplace(x2,y2,hexType)\n\t\tlastPick.x=x2;lastPick.y=y2;\n\t}\n}\n\n\n\nvar SEED = 6;\n \n// in order to work 'Math.seed' must NOT be undefined,\n// so in any case, you HAVE to provide a Math.seed\nfunction randomSeed(max, min) {\n    max = max || 1;\n    min = min || 0;\n \n    SEED = (SEED * 9301 + 49297) % 233280;\n    var rnd = SEED / 233280;\n \n    return min + rnd * (max - min);\n}\n\n\nfunction toggleType(){\n\tif(hexType==2)\n\t\thexType=3\n\telse if(hexType==3)\n\t\thexType=4\n\telse if(hexType==4)\n\t\thexType=0\n\telse if(hexType==0)\n\t\thexType=1;\n\telse\n\t\thexType=2\n}\nfunction setType(i){\n\thexType=i;\n}\n\n\n\n\n//# sourceURL=webpack://buup/./src/HexManager.js?");

/***/ }),

/***/ "./src/Main.js":
/*!*********************!*\
  !*** ./src/Main.js ***!
  \*********************/
/*! namespace exports */
/*! export updatePhysics [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"updatePhysics\": () => /* binding */ updatePhysics\n/* harmony export */ });\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _HexManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HexManager.js */ \"./src/HexManager.js\");\n/* harmony import */ var _Control_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Control.js */ \"./src/Control.js\");\n/* harmony import */ var _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/cannon.min.js */ \"./src/lib/cannon.min.js\");\n/* harmony import */ var _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _PictureMaker_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PictureMaker.js */ \"./src/PictureMaker.js\");\n\n\n\n\n\n\n\n\nvar dt = 1 / 20;\n\n\n\nfunction init(){\n\n\tinitCannon();\n\tlet canvas=_Render_js__WEBPACK_IMPORTED_MODULE_1__.init();\n\tdocument.querySelector('#main').appendChild(canvas)\n\n\n\n    //makeRoom(200,220,80,10)\n    makeFloor();\n\n    _HexManager_js__WEBPACK_IMPORTED_MODULE_2__.init();\n    _Control_js__WEBPACK_IMPORTED_MODULE_3__.init();\n    _PictureMaker_js__WEBPACK_IMPORTED_MODULE_5__.init();\n\n\n\n\n}init();\n\nvar bodies;\nvar meshes;\nvar particles;\nvar bullets;\nvar world;\nvar playerBody;\nvar controls\nvar orientation=0;\n\nvar gooProperty;\nvar wallProperty;\n\n\nfunction initCannon(){\n\t\t\tlet N =1;\n\t\t\tbodies=[];\n\t\t\tmeshes=[];\n            particles=[];\n            bullets=[];\n\t\t\tcontrols={};\n            // Setup our world\n            world = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.World();\n            world.quatNormalizeSkip = 0;\n            world.quatNormalizeFast = false;\n\n            world.gravity.set(0,0,-10);\n            world.broadphase = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.NaiveBroadphase();\n\n            // Create boxes\n            let mass = 4, radius = 1.3;\n            let boxShape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3(5,5,10));\n            for(let i=0; i<N; i++){\n                let boxBody = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Body({ mass: mass });\n                boxBody.addShape(boxShape);\n                boxBody.position.set(0,0,60);\n                world.addBody(boxBody);\n                //boxBody.angularDamping=0.8 //really high\n                playerBody=boxBody\n                window.playerBody=playerBody\n                playerBody.angularDamping=1\n                //bodies.push(boxBody);\n            }\n\n\n\t\t\t/*\n            // Create a plane\n            let groundShape = new CANNON.Plane();\n            let c=40\n            let h=150\n            let points=[\n            new CANNON.Vec3(-c,-c,0),new CANNON.Vec3(-c,c,0),new CANNON.Vec3(c,c,0),new CANNON.Vec3(c,-c,0),\n            new CANNON.Vec3(-c,-c,h),new CANNON.Vec3(-c,c,h),new CANNON.Vec3(c,c,h),new CANNON.Vec3(c,-c,h)\n            ]\n            let faces=[[4,7,6,5]]//[[3,2,1,0],[4,5,0,1],[6,7,3,2],[0,3,7,4],[2,1,5,6],[4,7,6],[6,5,4]]//,  ,   [2,3,6,7]] //\n            let box = new CANNON.ConvexPolyhedron(points,faces);\n            */\n            /*let groundBody = new CANNON.Body({ mass: 0 });\n            groundBody.addShape(box);\n            groundBody.position.set(0,0,25)\n           // groundBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2);\n            world.addBody(groundBody);*/\n\n            // Joint body\n            /*let shape = new CANNON.Sphere(0.1);\n            let jointBody = new CANNON.Body({ mass: 0 });\n            jointBody.addShape(shape);\n            jointBody.collisionFilterGroup = 0;\n            jointBody.collisionFilterMask = 0;\n            world.addBody(jointBody)*/\n\n\n\n\n            window.addEventListener('keydown',ev=>{\n            \tconsole.log(ev.keyCode)\n            \tswitch(ev.keyCode){\n            \t\tcase 37: case 65: controls.left=true;break;//left\n            \t\tcase 39: case 68: controls.right=true;break;//right\n            \t\tcase 38: case 87:  controls.up=true;break;//up\n            \t\tcase 40: case 83: controls.down=true;break;//down\n            \t\tcase 32: make(); break;\n                    case 66: for(let ii=0;ii<12;ii++){make();} break;\n                    case 69: _HexManager_js__WEBPACK_IMPORTED_MODULE_2__.toggleType();break;\n                    case 71: makeMan();break;\n                    case 81: _PictureMaker_js__WEBPACK_IMPORTED_MODULE_5__.test();break;\n                    case 82: _PictureMaker_js__WEBPACK_IMPORTED_MODULE_5__.make(); break;\n                    case 8: _HexManager_js__WEBPACK_IMPORTED_MODULE_2__.setType(1);break;\n            \t}\n\n            \t\n\n            })\n             window.addEventListener('keyup',ev=>{\n             \t\tswitch(ev.keyCode){\n            \t\tcase 37: case 65: controls.left=false;break;//left\n            \t\tcase 39: case 68: controls.right=false;break;//right\n            \t\tcase 38: case 87:  controls.up=false;break;//up\n            \t\tcase 40: case 83: controls.down=false;break;//down\n            \t}\n             })\n            gooProperty = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Material({name: \"gooProperty\",friction: 10.0,restitution:-1.0});\n            gooProperty.name=\"gooProperty\"\n            //gooProperty.friction=1\n\n            wallProperty = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Material({name: \"wallProperty\",friction: 0.1,restitution:1});\n            wallProperty.name=\"wallProperty\"\n            //debugger\n             /*var gooWallPhysics = new CANNON.ContactMaterial(gooProperty,\n                                                                     wallProperty,\n                                                                     1, // friction coefficient\n                                                                     0  // restitution\n                                                                     );*/\n             // We must add the contact materials to the world\n             //world.addContactMaterial(gooWallPhysics);\n\n\n            \n        }\n        let count=0;\n\nfunction make(){\n    let fireSpeed=120;\n\n    let boxBody;\n    if(bullets.length>30){\n        boxBody=bullets.shift();\n        bullets.push(boxBody)\n        //boxBody.arrayIndex=\n        boxBody.collisionResponse=true;\n        boxBody.wakeUp();\n\n\n    }else{\n\n\n\tlet size={x:4,y:4,z:4}\n\tlet boxShape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3(size.x/2,size.y/2,size.z/2));\n\tboxBody = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Body({ mass: 2 });\n    boxBody.addShape(boxShape);\n    bodies.push(boxBody);\n\n    boxBody.bullet=true;\n\n    bullets.push(boxBody)\n\n\n    let cube=_Render_js__WEBPACK_IMPORTED_MODULE_1__.cubic(size.x,size.y,size.z,0,0,0,_Render_js__WEBPACK_IMPORTED_MODULE_1__.yellow);\n    meshes.push(cube)\n\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel(cube)\n    world.addBody(boxBody);\n\n\n}\n\n\n    let v=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,0,0)\n    let speed=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,0,0)\n\n\n    let xx=-Math.sin(orientation)\n    let yy=Math.cos(orientation)\n\n    v.x=xx*15\n    v.y=yy*15\n    speed.x=fireSpeed*xx;\n    speed.y=fireSpeed*yy;\n\n   \n    v.add({x:rand(2),y:rand(2),z:rand(2)})\n\n\n    //v.applyQuaternion(Render.player.quaternion)\n   \tv.add(_Render_js__WEBPACK_IMPORTED_MODULE_1__.player.position)\n   \tboxBody.position.copy(v)\n   \tboxBody.quaternion.copy(_Render_js__WEBPACK_IMPORTED_MODULE_1__.player.quaternion)\n\n   \t//speed.applyQuaternion(Render.player.quaternion)\n   \tboxBody.velocity.copy(speed)\n\n   \tlet opposite=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(-0.05*speed.x,-0.05*speed.y,-0.05*speed.z)\n   \t//opposite.applyQuaternion(Render.player.quaternion)\n   \topposite.add(playerBody.velocity);\n\n   \tplayerBody.velocity.copy(opposite)\n    \n\n    //boxBody.angularDamping=0.8 //really high\n    count++;\n\n}\nfunction makeBlood(p,v) {\nlet boxBody;\n    if(count>100){\n        boxBody=particles.shift();\n        particles.push(boxBody)\n        boxBody.collisionResponse=true;\n    }else{\n\n    let size={x:4,y:4,z:4}\n    let boxShape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3(size.x/2,size.y/2,size.z/2));\n    boxBody = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Body({ mass: 0.01 ,material: gooProperty});\n    boxBody.addShape(boxShape);\n    bodies.push(boxBody);\n\n    particles.push(boxBody)\n\n    //let cube=Render.cubic(size.x,size.y,size.z,0,0,0,Render.blood);\n    let sphere=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.SphereGeometry(3.5,5,3)\n    let orb = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh( sphere, _Render_js__WEBPACK_IMPORTED_MODULE_1__.blood );\n    meshes.push(orb)\n\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel(orb)\n    world.addBody(boxBody);\n    }\n    boxBody.position.copy(p.position)\n    if(v)\n        boxBody.velocity.copy(v)\n\n    boxBody.addEventListener(\"collide\",ev=>{\n        if(ev.body.material){\n            if(ev.body.material.name=='wallProperty'){\n           boxBody.collisionResponse=false;\n           boxBody.sleep();\n         }\n        }\n    })\n\n}\n\n\nfunction makeMan() {\n    let size={x:10,y:10,z:20}\n    let boxShape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3(size.x/2,size.y/2,size.z/2));\n    let boxBody = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Body({ mass: 8 });\n    boxBody.addShape(boxShape);\n    bodies.push(boxBody);\n    boxBody.angularDamping=1\n    boxBody.position.set(_Control_js__WEBPACK_IMPORTED_MODULE_3__.x(),_Control_js__WEBPACK_IMPORTED_MODULE_3__.y(),20)\n\n\n    boxBody.addEventListener(\"collide\",ev=>{\n        if(ev.body.bullet){\n           if(ev.body.velocity.length()>50){\n            boxBody.angularDamping=0.01\n            console.log('sht')\n            makeBlood(boxBody,ev.body.velocity)\n           }\n        }\n    })\n\n\n    let cube=_Render_js__WEBPACK_IMPORTED_MODULE_1__.cubic(size.x,size.y,size.z);\n    meshes.push(cube)\n\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel(cube)\n    world.addBody(boxBody);\n\n}\nfunction applyQuaternion(v,q){ //ripped from threejs because i didnt feel like converting between cannojs types\n\n\n\t\tconst x = v.x, y = v.y, z = v.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tv.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tv.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tv.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn v;\n}\n\nfunction updatePhysics(){\n            /*bodies[0].position.set(point.x,point.y,point.z)\n            bodies[0].velocity.set(0,0,0)\n            bodies[0].angularDamping=1\n            bodies[0].inertia.set(0,0,0)*/\n\n            world.step(dt);\n\n            \n\n            for(var i=0; i !== meshes.length; i++){\n                meshes[i].position.copy(bodies[i].position);\n                meshes[i].quaternion.copy(bodies[i].quaternion);\n                if(bodies[i].position.z<-100){\n                \tbodies[i].position.set(Math.random()*80 -40,Math.random()*80 -40,100)\n\n                \tbodies[i].velocity.set(0,0,0)\n                    bodies[i].collisionResponse=false;\n                    bodies[i].sleep();\n                }\n\n            }\n\n            let r=_Control_js__WEBPACK_IMPORTED_MODULE_3__.getAngle();\n            let vd=playerBody.velocity.length()\n            if(controls.left){\n            \t//if(playerBody.velocity.x>-40)\n            \t\t\t//playerBody.velocity.x-=4\n            \tif(vd<20){\n\t            \tplayerBody.velocity.x-=Math.cos(r)*2\n\t            \tplayerBody.velocity.y-=Math.sin(r)*2\n\t            }\n            \torientation=r+Math.PI/2\n                playerBody.quaternion.setFromAxisAngle(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3(0,0,1), orientation); \n\n            }else if(controls.right){\n            \t//if(playerBody.velocity.x<40)\n            \tif(vd<20){\n\t            \tplayerBody.velocity.x+=Math.cos(r)*2\n\t            \tplayerBody.velocity.y+=Math.sin(r)*2\n\t\t\t\t}\n\t\t\t\torientation=r-Math.PI/2;\n                playerBody.quaternion.setFromAxisAngle(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3(0,0,1), orientation);\n\n            }else if(controls.up){\n            \t//if(playerBody.velocity.y<40)\n            \tif(vd<20){\n\t            \tplayerBody.velocity.x-=Math.sin(r)*2\n\t            \tplayerBody.velocity.y+=Math.cos(r)*2\n\t            }\n\t            orientation=r\n                playerBody.quaternion.setFromAxisAngle(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3(0,0,1), orientation);\n\n            }else if(controls.down){\n            \t//if(playerBody.velocity.y>-40)\n            \tif(vd<20){\n\t            \tplayerBody.velocity.x+=Math.sin(r)*2\n\t            \tplayerBody.velocity.y-=Math.cos(r)*2\n\t            }\n\t            orientation=r+Math.PI\n                playerBody.quaternion.setFromAxisAngle(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3(0,0,1), orientation);\n\n            }\n            _Render_js__WEBPACK_IMPORTED_MODULE_1__.player.position.copy(playerBody.position);\n            _Render_js__WEBPACK_IMPORTED_MODULE_1__.player.quaternion.copy(playerBody.quaternion);\n            //console.log(Render.player.position)\n        }\n\nfunction makeRoom(w,d,h,t){\n    let body = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Body({ mass: 0 ,material: wallProperty});\n\n    let xWall = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3(t/2,d,h));\n    let yWall = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3(w,t/2,h));\n    let zWall = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3(w,d,t/2));\n\n\n\n    body.addShape(xWall, new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3( -w, 0,h/2));\n    body.addShape(xWall, new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3( w, 0,h/2));\n\n    body.addShape(yWall, new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3( 0, -d,h/2));\n    body.addShape(yWall, new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3( 0, d,h/2));\n\n    body.addShape(zWall, new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3( 0, 0,h));\n    body.addShape(zWall, new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Vec3( 0, 0,0));\n    world.addBody(body);\n\n    let xm=_Render_js__WEBPACK_IMPORTED_MODULE_1__.cubic(t,d*2,h,-w,0,h/2,_Render_js__WEBPACK_IMPORTED_MODULE_1__.wood);\n    let xm2=xm.clone()\n    xm2.position.x=w;\n\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel(xm)\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel(xm2)\n\n    let ym=_Render_js__WEBPACK_IMPORTED_MODULE_1__.cubic(w*2,t,h,0,d,h/2,_Render_js__WEBPACK_IMPORTED_MODULE_1__.wood);\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel(ym)\n\n    let zm=_Render_js__WEBPACK_IMPORTED_MODULE_1__.cubic(w*2,d*2,t,0,0,0,_Render_js__WEBPACK_IMPORTED_MODULE_1__.ground);\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel(zm)\n\n}\nfunction makeFloor(){\n\tlet groundShape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Plane();\n\tlet groundBody = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_4__.Body({ mass: 0 });\n\tgroundBody.addShape(groundShape);\n\tworld.addBody(groundBody);\n}\nfunction rand(x){\n    return (Math.random()*2 -1)*x\n}\n\n\n\n//# sourceURL=webpack://buup/./src/Main.js?");

/***/ }),

/***/ "./src/PictureMaker.js":
/*!*****************************!*\
  !*** ./src/PictureMaker.js ***!
  \*****************************/
/*! namespace exports */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export make [provided] [no usage info] [missing usage info prevents renaming] */
/*! export test [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"make\": () => /* binding */ make,\n/* harmony export */   \"test\": () => /* binding */ test\n/* harmony export */ });\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n\n\n\n\nvar scene;\nvar camera;\nvar testToggle=true;\n\nfunction init(){\n\tscene=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Scene();\n\t    camera = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 5000);\n    camera.position.z = 200; //400\n    camera.position.y = -200; //-800\n    camera.up = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 1)\n\n    camera.lookAt(new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 0));\n\n    let m=_Render_js__WEBPACK_IMPORTED_MODULE_1__.cubic(100,100,1)\n    scene.add(m)\n}\n\nfunction make(){\n\tlet pic= document.createElement('img');\n    pic.className='portrait'\n    pic.setAttribute('src', _Render_js__WEBPACK_IMPORTED_MODULE_1__.bufferPrint(scene,camera));\n    document.body.addChild(pic);\n\n}\nfunction test(){\n\tif(testToggle)\n\t\t_Render_js__WEBPACK_IMPORTED_MODULE_1__.toggleScene(scene,camera);\n\telse\n\t\t_Render_js__WEBPACK_IMPORTED_MODULE_1__.toggleScene();\n\ttestToggle=!testToggle;\n\n}\n\n\n\n//# sourceURL=webpack://buup/./src/PictureMaker.js?");

/***/ }),

/***/ "./src/Render.js":
/*!***********************!*\
  !*** ./src/Render.js ***!
  \***********************/
/*! namespace exports */
/*! export addModel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export addModel2 [provided] [no usage info] [missing usage info prevents renaming] */
/*! export blood [provided] [no usage info] [missing usage info prevents renaming] */
/*! export bufferPrint [provided] [no usage info] [missing usage info prevents renaming] */
/*! export cubic [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getAlphaCanvas [provided] [no usage info] [missing usage info prevents renaming] */
/*! export ground [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export loadModel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export player [provided] [no usage info] [missing usage info prevents renaming] */
/*! export removeModel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export resize [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setClearColor [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setHexSelector [provided] [no usage info] [missing usage info prevents renaming] */
/*! export toggleScene [provided] [no usage info] [missing usage info prevents renaming] */
/*! export wood [provided] [no usage info] [missing usage info prevents renaming] */
/*! export yellow [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"addModel\": () => /* binding */ addModel,\n/* harmony export */   \"setHexSelector\": () => /* binding */ setHexSelector,\n/* harmony export */   \"removeModel\": () => /* binding */ removeModel,\n/* harmony export */   \"setClearColor\": () => /* binding */ setClearColor,\n/* harmony export */   \"toggleScene\": () => /* binding */ toggleScene,\n/* harmony export */   \"addModel2\": () => /* binding */ addModel2,\n/* harmony export */   \"cubic\": () => /* binding */ cubic,\n/* harmony export */   \"wood\": () => /* binding */ wood,\n/* harmony export */   \"ground\": () => /* binding */ ground,\n/* harmony export */   \"blood\": () => /* binding */ blood,\n/* harmony export */   \"yellow\": () => /* binding */ yellow,\n/* harmony export */   \"getAlphaCanvas\": () => /* binding */ getAlphaCanvas,\n/* harmony export */   \"bufferPrint\": () => /* binding */ bufferPrint,\n/* harmony export */   \"loadModel\": () => /* binding */ loadModel,\n/* harmony export */   \"resize\": () => /* binding */ resize,\n/* harmony export */   \"player\": () => /* binding */ player\n/* harmony export */ });\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n/* harmony import */ var _Main_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Main.js */ \"./src/Main.js\");\n/* harmony import */ var _Control_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Control.js */ \"./src/Control.js\");\n/* harmony import */ var _Environment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Environment */ \"./src/Environment.js\");\n/* harmony import */ var _lib_GLTFLoader_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/GLTFLoader.js */ \"./src/lib/GLTFLoader.js\");\n/* harmony import */ var _lib_EffectComposer_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/EffectComposer.js */ \"./src/lib/EffectComposer.js\");\n/* harmony import */ var _lib_ShaderPass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/ShaderPass.js */ \"./src/lib/ShaderPass.js\");\n/* harmony import */ var _lib_SSAOPass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/SSAOPass.js */ \"./src/lib/SSAOPass.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n//import * as Control from \"./Control.js?v=16\";\n//import * as World from \"./World.js?v=16\";\n//import {OrbitControls} from \"./lib/OrbitControls.js\";\n//import * as Texture from \"./Texture.js?v=16\";\n//import * as Stats from \"./lib/stats.js\";\n//import * as AssetManager from \"./AssetManager.js?v=16\";\n//import * as Experiment from \"./Experiment.js?v=16\";\n\n\nvar camera, renderer;\nvar scene\nvar group\n\nvar activeCamera, activeScene;\n\n\nvar docWidth, docHeight;\n\nvar loader;\nvar mixer;\n\nvar SHADOW_SIZE = 2048;\nvar SIZE_DIVIDER = 8;\n\nvar alphaCanvas;\n\n\nvar activeCanvas;\n\nvar composer;\n\nvar specterMaterial;\nvar defaultMat\n\n\nvar player;\nvar wood;\nvar ground;\nvar blood;\nvar yellow;\n\nvar pointer;\nvar hexSelector;\nvar pointerMat;\nvar pointerMatOn;\n\n\nfunction init() {\n\n     \n\n    camera = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 5000);\n    camera.position.z = 200; //400\n    camera.position.y = -200; //-800\n    camera.up = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 1)\n\n    camera.lookAt(new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 0));\n\n    scene= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Scene();\n    activeScene = scene;\n\n    alphaCanvas = document.createElement('div');\n    alphaCanvas.classList.add('canvasHolder');\n\n\n\n    renderer = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.WebGLRenderer({  antialias: true }); //alpha: true,\n    renderer.shadowMap.enabled = true;\n    renderer.shadowMap.type = _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.PCFSoftShadowMap;\n    renderer.toneMapping = _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.ACESFilmicToneMapping \n    renderer.outputEncoding = _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.sRGBEncoding\n\n    renderer.setClearColor(0xFF7F32, 1); //0xb0e9fd,1);//0xb0e9fd,1)\n\n    alphaCanvas.appendChild(renderer.domElement);\n\n    loader = new _lib_GLTFLoader_js__WEBPACK_IMPORTED_MODULE_4__.GLTFLoader();\n\n    initCustomMaterial();\n\n    activeCanvas = alphaCanvas;\n\n    activeScene=scene;\n    activeCamera=camera;\n\n\n\n    resize();\n\n\n    composer = new _lib_EffectComposer_js__WEBPACK_IMPORTED_MODULE_5__.EffectComposer(renderer);\n    //var luminosityPass = new ShaderPass(LuminosityShader);\n    //composer.addPass(luminosityPass);\n    let ssaoPass = new _lib_SSAOPass_js__WEBPACK_IMPORTED_MODULE_7__.SSAOPass( scene, camera, 300, 200);\n    ssaoPass.kernelRadius = 6;\n    ssaoPass.minDistance=0.00015;\n    ssaoPass.maxDistance=0.001;\n    composer.addPass( ssaoPass );\n    window.ssao=ssaoPass\n\n\n\n    let material= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial( {color:0x75D5CE});\n    new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0x20E89F, metalness: 0, roughness: 1.0 });\n\n    wood= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0x20E89F, metalness: 0, roughness: 1.0 });\n    ground= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0x5471A5, metalness: 0, roughness: 1.0 });\n    let guyMat= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0xEAF722, metalness: 0, roughness: 1.0 }); \n    defaultMat= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0xCF2ADE, metalness: 0, roughness: 1.0 });\n    blood= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0xB60B0B, metalness: 0, roughness: 1.0 }); \n    yellow= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0xEAF722, metalness: 0, roughness: 1.0 });\n\n\n    //material = new THREE.MeshBasicMaterial( {color: new THREE.Color(\"white\")} );\n    /*geometry = new THREE.BoxBufferGeometry( 100, 100, 100 );\n    cube = new THREE.Mesh( geometry, material );\n    cube.position.z=50;\n    scene.add( cube );*/\n    group = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Group();\n\n/*\n    group.add(cubic(10,100,50,-50,0,50,wood));\n    group.add(cubic(10,100,50,50,0,50,wood));\n    group.add(cubic(100,10,50,0,50,50,wood));\n    group.add(cubic(100,100,10,0,0,20,ground));*/\n\n    player=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Group();\n    let whiteMat= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial( {color: 0xFFFFFF, side: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.FrontSide} );\n\n    let blackMat= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial( {color: 0x321818, side: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.FrontSide} );\n\n\n    let p1=cubic(10,10,20,0,0,0,guyMat);\n    let p2=cubic(10,2,10,0,5,5,whiteMat)\n    let p3=cubic(3,2,3,0,6,5,blackMat)\n\n    player.add(p1)\n    player.add(p2)\n    player.add(p3)\n    group.add(player)\n\n    scene.add(group)\n    pointerInit();\n    _Environment__WEBPACK_IMPORTED_MODULE_3__.init();\n    _Control_js__WEBPACK_IMPORTED_MODULE_2__.setRenderer(renderer,alphaCanvas,camera,false)\n\n    animate();\n    return alphaCanvas\n\n\n}\n\nfunction pointerInit(){\n    let pointerGeom = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.CircleGeometry( 6, 16 );\n    //pointerGeom.rotateX(-Math.PI/2.0);\n    pointerMat = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial( { color:0x4AE13A } );\n    pointerMatOn = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial( { color:0xEBEE00 } );\n    pointer = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh(pointerGeom,pointerMat);\n    pointer.position.z=0.05;\n    scene.add(pointer);\n\n\n    let SCALE=80;\n    let g=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Group();\n    let p=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.PlaneBufferGeometry(6,SCALE);\n    let m=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh(p,pointerMat)\n    m.position.set(SCALE,0,0)\n    g.add(m)\n    for(let i=0;i<6;i++){\n        let n=m.clone();\n        n.rotation.z=i*Math.PI/3\n\n        n.position.set(Math.cos(n.rotation.z)*SCALE,Math.sin(n.rotation.z)*SCALE,0)\n        g.add(n)\n    }\n    g.position.z+=6;\n    scene.add(g)\n    hexSelector=g;\n}\nfunction setHexSelector(x,y,z){\n    hexSelector.position.set(x,y,z)\n}\n\nfunction getAlphaCanvas() {\n    return alphaCanvas;\n}\n\nfunction loadModel(model, callback, texture, color) {\n    loader.load(\n        ('./' + model), //villager22.gltf',\n        (gltf) => {\n            // called when the resource is loaded\n            //gltf.scene.scale.set(10,10,10);\n            let model; //=gltf.scene.children[0];\n            gltf.scene.rotation.x = Math.PI / 2;\n            gltf.scene.traverse(function(child) {\n                if(child instanceof _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh) {\n                    //if(child.name==\"Cube\"){\n                    model = child;\n                    if(!texture) {\n                        if(color)\n                            child.material = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: color, metalness: 0, roughness: 1.0 }); // \n                        else\n                            child.material = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ vertexColors: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.VertexColors, metalness: 0, roughness: 1.0}); // \n\n                        child.material.needsUpdate = true;\n                        //child.material.skinning=true;\n                    }\n                    //child.material.morphTargets=true;\n\n                    //child.material.map.needsUpdate = true;\n                    // }else{\n\n                    //}\n                }\n            });\n            //gltf.scene.children[0].children[1].scale.set(20,20,20);\n            //gltf.scene.children.pop();\n            //let mixer = new THREE.AnimationMixer( gltf.scene );\n            //model=gltf.scene.children[0]\n            let m2 = gltf.scene.children[0];\n            if(model) {\n                var animations = gltf.animations;\n                if(animations && animations.length) {\n\n                    mixer = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.AnimationMixer(model);\n                    for(var i = 0; i < animations.length; i++) {\n                        var animation = animations[i];\n                        // There's .3333 seconds junk at the tail of the Monster animation that\n                        // keeps it from looping cleanly. Clip it at 3 seconds\n\n                        //if ( sceneInfo.animationTime ) {\n                        //    animation.duration = sceneInfo.animationTime;\n\n\n                        // }\n                        action = mixer.clipAction(animation);\n                        //action.setEffectiveTimeScale(200);\n                        //action.timeScale=0.002;\n                        action.timeScale = 0.002;\n                        //if ( state.playAnimation ) \n                        action.play();\n                    }\n                }\n                //mainScene.add( gltf.scene.children[0] );\n            }\n            callback(gltf.scene);\n        },\n        (xhr) => {\n            // called while loading is progressing\n            console.log(`${( xhr.loaded / xhr.total * 100 )}% loaded`);\n        },\n        (error) => {\n            // called when loading has errors\n            console.error('An error happened', error);\n        },\n    );\n}\n\nfunction resize() {\n    //Math.max(window.screen.width, window.innerWidth)\n    //Math.max(window.screen.height, window.innerHeight)\n    if(window.screen.width> window.innerWidth){\n        docWidth =  window.innerWidth\n        docHeight = window.innerHeight\n    }else{\n        docWidth =  window.screen.width\n        docHeight = window.screen.height\n    }\n\n    //docWidth =  window.innerWidth //Math.max(window.screen.width, window.innerWidth)\n    //docHeight = window.innerHeight //Math.max(window.screen.height, window.innerHeight)//window.innerHeight;\n    camera.aspect = docWidth / docHeight;\n    camera.updateProjectionMatrix();\n\n    renderer.setPixelRatio(0.5);//window.devicePixelRatio / SIZE_DIVIDER);\n    renderer.setSize(docWidth, docHeight);\n}\n\nvar dir=1;\nfunction animate(time) {\n\t_Main_js__WEBPACK_IMPORTED_MODULE_1__.updatePhysics();\n    //group.rotation.z+=0.002*dir;\n    if(group.rotation.z>Math.PI/16)\n    \tdir=-1;\n    else if(group.rotation.z<-Math.PI/16)\n    \tdir=1;\n\n    applyCursor()\n    _Environment__WEBPACK_IMPORTED_MODULE_3__.animate();\n\n    renderer.render(activeScene, activeCamera);\n    //composer.render();\n    requestAnimationFrame(animate);\n}\n\nfunction dumpImage(img) {\n    let dom = document.querySelector('#afterImage');\n    if(dom)\n        dom.setAttribute('src', img);\n}\n\nfunction bufferPrint(sc,cam) {\n    //_grabImage=true;\n    if(sc && cam)\n            renderer.render(sc,cam);\n    else    \n        renderer.render(getScene(), camera);\n    //dumpImage(renderer.domElement.toDataURL());\n    return renderer.domElement.toDataURL()\n}\n\nvar anchors = [];\n\nfunction addAnchor(host, bubble) {\n    let anchor = {\n        host: host,\n        bubble: bubble,\n        x: 0,\n        y: 0,\n        offset: 0,\n    }\n    anchors.forEach(a => {\n        if(a.host == host) {\n            a.offset -= 40;\n        }\n    })\n    anchors.push(anchor);\n    console.log(anchors.length + ' anchors');\n    updateAnchor(anchor, anchors.length - 1);\n    return anchor;\n}\n\nfunction updateAnchor(anchor, index) {\n    if(!anchor.bubble) {\n        anchors.splice(index, 1);\n        return false;\n    }\n    if(anchor.host) {\n        let vector = projectVector(anchor.host);\n        anchor.bubble.style.left = -16 + vector.x + 'px';\n        anchor.bubble.style.top = (40 + anchor.offset + vector.y) + 'px';\n        anchor.x = vector.x;\n        anchor.y = vector.y;\n    }\n\n}\n\nfunction roundEdge(x) {\n    x = x % (Math.PI)\n    if(x < 0)\n        x += Math.PI * 2;\n\n    if(x > Math.PI / 4) {\n        if(x > 5 * Math.PI / 4) {\n            if(x < 7 * Math.PI / 4) {\n                return Math.PI * 3 / 2;\n            }\n        } else {\n            if(x > 3 * Math.PI / 4) {\n                return Math.PI;\n            } else {\n                return Math.PI / 2;\n            }\n        }\n    }\n    return 0;\n}\n\nfunction syncModel(index, obj) {\n    let m = modelsIndexed[index];\n    m.position.x = obj.x;\n    m.position.y = obj.y;\n    m.position.z = obj.z;\n}\n\nfunction createModel(index) {\n    let model = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh(cubeGeometry, cubeMaterial);\n    modelsIndexed[index] = model;\n    return model;\n}\nfunction addModel(model){\n\tgroup.add(model)\n}\nfunction addModel2(model){\n\tscene.add(model)\n}\nfunction removeModel(model){\n\tgroup.remove(model)\n}\n\nfunction cubic(i,j,k,x,y,z,c){\n     let geometry = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BoxBufferGeometry( i,j,k );\n     if(!c)\n    \tc=defaultMat\n\n    let cube = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh( geometry, c );\n    cube.castShadow=true;\n\n     cube.position.x=x?x:0;\n     cube.position.y=y?y:0;\n     cube.position.z=z?z:0;\n     return cube;\n}\nfunction getRandomColor() {\n    var letters = '0123456789ABCDEF';\n    var color = Math.random() > 0.5 ? 0x66B136 : 0x76610E;\n    return parseInt(color);\n}\n\nfunction applyCursor() {\n    /*if(Control.down()) {\n        pointer.material = pointerMatOn;\n    } else\n        pointer.material = pointerMat;*/\n\n    var vector = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    vector.set((_Control_js__WEBPACK_IMPORTED_MODULE_2__.screenX() / window.innerWidth) * 2 - 1, -(_Control_js__WEBPACK_IMPORTED_MODULE_2__.screenY() / window.innerHeight) * 2 + 1, 0.5);\n    vector.unproject(camera)\n    var dir = vector.sub(camera.position).normalize();\n    var distance = -camera.position.z / dir.z;\n    var pos = camera.position.clone().add(dir.multiplyScalar(distance));\n\n    pointer.position.x = pos.x;\n    pointer.position.y = pos.y\n    pointer.position.z=8;\n   // console.log(pointer.position)\n    _Control_js__WEBPACK_IMPORTED_MODULE_2__.setVector(pointer.position);\n\n}\n\nfunction projectVector(object) {\n\n    var width = docWidth,\n        height = docHeight;\n    var widthHalf = width / 2,\n        heightHalf = height / 2;\n\n    let vector = object.position.clone();\n    vector.z += 30\n    //vector.applyMatrix4(object.matrixWorld);\n    vector.project(camera)\n\n    //var projector = new THREE.Projector();\n    //projector.projectVector( vector.setFromMatrixPosition( object.matrixWorld ), camera );\n\n    vector.x = (vector.x * widthHalf) + widthHalf;\n    vector.y = -(vector.y * heightHalf) + heightHalf;\n    return vector;\n\n}\n\n\nvar specterMaterial\n\nfunction initCustomMaterial() {\n\n    var meshphysical_frag = `\n    #define STANDARD\n#ifdef PHYSICAL\n    #define REFLECTIVITY\n    #define CLEARCOAT\n    #define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n    uniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n    uniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n    uniform float clearcoat;\n    uniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n    uniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n    varying vec3 vNormal;\n    #ifdef USE_TANGENT\n        varying vec3 vTangent;\n        varying vec3 vBitangent;\n    #endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n    #include <clipping_planes_fragment>\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <roughnessmap_fragment>\n    #include <metalnessmap_fragment>\n    #include <normal_fragment_begin>\n    #include <normal_fragment_maps>\n    #include <clearcoat_normal_fragment_begin>\n    #include <clearcoat_normal_fragment_maps>\n    #include <emissivemap_fragment>\n    #include <lights_physical_fragment>\n    #include <lights_fragment_begin>\n    #include <lights_fragment_maps>\n    #include <lights_fragment_end>\n    #include <aomap_fragment>\n    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n    #ifdef TRANSPARENCY\n        diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n    #endif\n    gl_FragColor = vec4( outgoingLight,1.-(((0.2125 * outgoingLight.r) + (0.7154 * outgoingLight.g) + (0.0721 * outgoingLight.b)) ) );\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}`\n\n    //gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\n    /*\n    #ifdef USE_COLOR\n                if(vColor==vec3(0,0,1))\n                    diffuseColor.rgb *= vec3(1,0,0);\n                else\n                    diffuseColor.rgb *= vColor;\n        #endif*/\n\n    //    #include <color_vertex>\n\n    var meshphysical_vert = `#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n    varying vec3 vNormal;\n    #ifdef USE_TANGENT\n        varying vec3 vTangent;\n        varying vec3 vBitangent;\n    #endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nuniform vec3 shirt;\nuniform vec3 wind;\n\nvoid main() {\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #ifdef USE_COLOR\n        if(color==vec3(0,0,1))\n            vColor.xyz = shirt;\n        else\n            vColor.xyz = color.xyz;\n        \n    #endif\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    #include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n    vNormal = normalize( transformedNormal );\n    #ifdef USE_TANGENT\n        vTangent = normalize( transformedTangent );\n        vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n    #endif\n#endif\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <displacementmap_vertex>\n\n    \n        if(color==vec3(1,0,0)){\n            float val=max(0.0, 1.0976 - transformed.z);\n            transformed.xyz+=val*wind;\n            transformed.y*=1.0+sin((wind.z+transformed.z)*4.0)/2.0;\n\n        }\n    \n\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    vViewPosition = - mvPosition.xyz;\n    #include <worldpos_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>\n}`\n\n    var uniforms = _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.UniformsUtils.merge(\n        [_lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.ShaderLib.standard.uniforms,\n            //{shirt: {value:new THREE.Vector3(0,1,0)},\n            //wind: {value:new THREE.Vector3(0,0,0)}}\n        ]\n    );\n\n    /*specterMaterial =  new THREE.ShaderMaterial({\n    uniforms: uniforms,\n    fragmentShader: fragmentShader(),\n    vertexShader: vertexShader(),\n  })**/\n\n\n    specterMaterial = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.ShaderMaterial({\n        uniforms: uniforms,\n        derivatives: false,\n        lights: true,\n        vertexColors: true,\n        vertexShader: meshphysical_vert,\n        fragmentShader: meshphysical_frag,\n        roughness: 0.0,\n        metalness: 1.0,\n        //vertexShader: THREE.ShaderChunk.cube_vert,\n        //fragmentShader: THREE.ShaderChunk.cube_frag\n    });\n\n\n}\nfunction toggleScene(sc,cam){\n    if(cam && sc){\n        activeCamera=cam;\n        activeScene=sc;\n    }else{\n        activeScene=scene;\n        activeCamera=camera;\n    }\n}\n\n\n\n\n/////SCENE///////\n\nvar emptyScene;\nvar scenes;\n\n\n\nfunction sceneInit() {\n    emptyScene = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Scene();\n    scenes = [];\n\n    let cubeGeometry = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BoxBufferGeometry(20, 20, 20);\n    let cubeMaterial = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0xff8833 }); //map: texture\n\n    /*\n      var geometry = new THREE.SphereGeometry( 5, 32, 32 );\n      var material = new THREE.MeshBasicMaterial( {color: 0xffff00} );\n      var sphere = new THREE.Mesh( geometry, material );\n\n      sphere.position.set(0,0,-30);\n      cubes.push(sphere);\n      scenes[2].add(sphere);\n      var geo = new THREE.OctahedronGeometry( 30, 1 );\n      var mat = new THREE.MeshBasicMaterial( {color: 0xC92DD1} ); \n      var octa= new THREE.Mesh( geo, mat );\n      octa.position.set(0,0,20);\n      cubes.push(octa);\n      scenes[3].add(octa);*/\n}\n\n\n\nfunction flipScene(i) {\n    activeScene = i;\n}\nvar activeScene = 0;\nvar activeModule;\n/*\nfunction getScene() {\n    let index = activeScene;\n    let scene = scenes[index];\n    if(scene == undefined) {\n        scene = emptyScene\n        scenes[index] = 'pend';\n\n        //wow this is a conufsing mess but it's functional!\n        let importerFunction = SCENE_IMPORT[index];\n        if(importerFunction) {\n            Main.pendApp(index)\n            importerFunction(module => {\n                scenes[index] = [module.init(index,()=>{Main.clearPendApp(index)},Main.apps[index]), module]\n                \n            });\n        } else {\n            scenes[index] = [emptyScene, undefined]\n        }\n\n    \n    } else if(scene == 'pend') {\n        scene = emptyScene;\n    } else {\n        activeModule = scene[1]; //define the module that's currently active so we can run it's animate function in sceneAnimate()\n        scene = scene[0] //please forgive me, trust me it works\n    }\n\n    return scene;\n}*/\n\n///////////////\n\nfunction setClearColor(a,b){\n    renderer.setClearColor(a,b);\n}\n\n\n\n\n\n\n//# sourceURL=webpack://buup/./src/Render.js?");

/***/ })

},
0,[["./src/Main.js","runtime","libs"]]]);