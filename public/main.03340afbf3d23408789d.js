/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is not neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkbuup"] = self["webpackChunkbuup"] || []).push([["main"],{

/***/ "./src/AssetManager.js":
/*!*****************************!*\
  !*** ./src/AssetManager.js ***!
  \*****************************/
/*! namespace exports */
/*! export animate [provided] [no usage info] [missing usage info prevents renaming] */
/*! export attach [provided] [no usage info] [missing usage info prevents renaming] */
/*! export defaultLoad [provided] [no usage info] [missing usage info prevents renaming] */
/*! export findBone [provided] [no usage info] [missing usage info prevents renaming] */
/*! export get [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getModel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getPending [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export make [provided] [no usage info] [missing usage info prevents renaming] */
/*! export manModel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export readColors [provided] [no usage info] [missing usage info prevents renaming] */
/*! export treeModel [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"getPending\": () => /* binding */ getPending,\n/* harmony export */   \"animate\": () => /* binding */ animate,\n/* harmony export */   \"getModel\": () => /* binding */ getModel,\n/* harmony export */   \"get\": () => /* binding */ get,\n/* harmony export */   \"make\": () => /* binding */ make,\n/* harmony export */   \"attach\": () => /* binding */ attach,\n/* harmony export */   \"findBone\": () => /* binding */ findBone,\n/* harmony export */   \"treeModel\": () => /* binding */ treeModel,\n/* harmony export */   \"manModel\": () => /* binding */ manModel,\n/* harmony export */   \"defaultLoad\": () => /* binding */ defaultLoad,\n/* harmony export */   \"readColors\": () => /* binding */ readColors\n/* harmony export */ });\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _Helper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Helper.js */ \"./src/Helper.js\");\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n/* harmony import */ var _lib_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/SkeletonUtils.js */ \"./src/lib/SkeletonUtils.js\");\n/* harmony import */ var _PlayerManager_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./PlayerManager.js */ \"./src/PlayerManager.js\");\n/** @about\nProperly deals with requests to load models more efficiently with load status etc\nAlso heavy with experimentation\n**/\n\n\n\n\n\n\n\n\n//import * as InstancedObjectManager from \"./InstancedObjectManager.js\";\n\n\nvar modelCounter = 0;\nvar animators = [];\nvar windies = [];\nvar instanceColors = [];\n\nvar treeModel;\nvar manModel;\nvar womanModel;\nvar swordModel;\nvar helmModel;\n\nvar UNIFORMS = {};\nvar personShader;\nvar personAnimations = {};\n\nvar MODELS = {};\nvar MODELALTS = [];\n\nfunction init() {\n    //defaultLoad('man');\n    defaultLoad('pot');\n    defaultLoad('rock');\n    defaultLoad('goblin', 'glb');\n    defaultLoad('hedgehog', 'glb');\n    defaultLoad('werewolf', 'glb');\n    defaultLoad('vampire', 'glb');\n    defaultLoad('zombie', 'glb');\n\n    //defaultLoad('chicken', 'glb');\n    defaultLoad('die4',undefined,[1, 1, 1]);\n    defaultLoad('die6',undefined,[1, 1, 1]);\n    defaultLoad('die8',undefined,[1, 1, 1]);\n    defaultLoad('die10',undefined,[1, 1, 1]);\n    defaultLoad('die20',undefined,[1, 1, 1]);\n\n    \n\n    /*\n        load('assets/person.gltf',m=>{\n            m.position.z+=55;\n            //m.scale.set(10,10,10);\n            m.visible=false;\n            //m.material = new THREE.MeshStandardMaterial({ color: 0xffffff, metalness: 0, roughness: 1.0}); // \n            //playerModel=m;\n        },0xffffff);\n\n        load('assets/tree1.gltf',m=>{\n            m.position.z+=55;\n            //m.scale.set(10,10,10);\n           treeModel=m;\n           treeModel.castShadow = true; //default is false\n            treeModel.receiveShadow = true; //default\n            //playerModel=m;\n            \n            _documentModel(\"tree\",m);\n           \n        });\n\n        defaultLoad('plant');\n        defaultLoad('log');\n        defaultLoad('shroom1');\n        defaultLoad('shroom2');\n        defaultLoad('plank');\n        defaultLoad('pot');\n        defaultLoad('rock');\n        defaultLoad('pinkTree');\n\n        load('assets/grass.gltf',m=>{\n            m.material.side=THREE.DoubleSide;\n\n            readColors(m,[1,1,1],Helper.hexToRGBFloat('#DAEA55'))\n            readColors(m,[0,0,0],Helper.hexToRGBFloat('#66B136'))\n            _documentModel(\"grass\",m);\n        });\n\n        load('assets/sword.gltf',m=>{\n             swordModel=m;\n            _documentModel(\"sword\",m);\n        });\n\n        load('assets/helm.gltf',m=>{\n            helmModel=m;\n            helmModel.material.side=THREE.DoubleSide;\n            _documentModel(\"helm\",helmModel);\n\n        });*/\n\n    personShader = makeShader();\n    personShader.needsUpdate = true;\n    personShader.skinning = true;\n    load('assets/models/man.gltf', (m, animations) => {\n        //m.position.x+=100;\n        m = m.children[0]\n        manModel = m;\n        manModel.castShadow = true;\n        manModel.receiveShadow = true;\n        m.scale.set(2, 2, 2);\n\n        if(animations) {\n            animations.forEach(anim => {\n                if(anim.name)\n                    personAnimations[anim.name] = anim;\n            });\n        }\n\n\n        readColors(m, [1, 0.2541521191596985, 0.022173885256052017], [0, 0, 1])\n\n        let val = { value: new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 0, 1) };\n\n        \n        \n\n        MODELS['man'] = manModel;\n\n\n        personShader.onBeforeCompile = shader => {\n            //shader.fragmentShader = 'uniform vec3 myVector;\\n' + shader.fragmentShader;\n            shader.uniforms.shirt = man.children[1].material.uniforms.shirt;\n            shader.vertexShader = 'uniform vec3 shirt;\\n' + shader.vertexShader;\n            shader.vertexShader = shader.vertexShader.replace('#include <color_vertex>',\n                `\n                #ifdef USE_COLOR\n                    if(color.xyz == vec3(0,0,1)){\n                        vColor.xyz = vec3(1,1,0);\n                    }else{\n                        vColor.xyz = color.xyz;\n                    }\n                #endif`);\n        } //shirt.xyz\n\n\n\n        /* \n\n         let manny=getModel(null,8,0,-8,'#C000BE',false,false);\n         let danny=getModel(null,9,0,-8,'#FF9C0E',true,false);\n         let sammy=getModel(null,10,0,-8,'#4191FF',false,true);\n         let lenny=getModel(null,11,0,-8,'#C00032',true,true);\n         let jenny=getModel(null,12,0,-8,'#210FA7',false,true);\n         let jimmy=getModel(null,13,0,-8,'#09C000',true,true);\n       \n         \n         Render.addModel(manny);\n         Render.addModel(danny);\n          Render.addModel(sammy);\n         Render.addModel(lenny);\n          Render.addModel(jenny);\n         Render.addModel(jimmy);\n\n\n         load('assets/woman.gltf',m=>{\n             womanModel=m;\n             womanModel.castShadow = true;\n             womanModel.receiveShadow = true;\n             readColors(m,[1,0.13286831974983215,0],[0,0,1])\n            // readColors(m,[1,0.2541521191596985,0.022173885256052017],[0,0,1])\n             //let val={value: new THREE.Vector3(0,0,1)};\n\n\n\n             //new THREE.MeshStandardMaterial({  vertexColors: THREE.VertexColors, metalness: 0, roughness: 1.0});\n\n             let lady=getModel(womanModel,-3,0,-3,'#C000BE',false,false,\"StrikeThrust\");\n             Render.addModel(lady);\n\n         });*/\n    });\n\n    load('assets/models/gran.gltf', (m, animations) => {\n        m = m.children[0]\n        m.castShadow = true;\n        m.receiveShadow = true;\n        m.scale.set(2, 2, 2);\n\n        /*if(animations){\n            animations.forEach(anim=>{\n                if(anim.name)\n                    personAnimations[anim.name]=anim;\n            });\n        }*/\n        readColors(m, [0.42869052290916443, 0.262250691652298, 0.4677838087081909], [0, 0, 1])\n        let val = { value: new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 0, 1) };\n        MODELS['gran'] = m;\n    });\n\n    load('assets/models/chicken.glb',m=>{\n            m=m.children[0]\n           m.scale.set(2, 2, 2);\n            \n            m.children.forEach(o=>{\n                 console.log('hit chicken'+o.type)\n                if(o.type=='SkinnedMesh'){\n                    o.material = personShader.clone();\n                    //o.material.skinning = true;\n                    //o.material.needsUpdate = true;\n                    //o.castShadow = true;\n                    //o.receiveShadow = true;\n                }\n            })\n           \n            //m.material = new THREE.MeshStandardMaterial({ color: 0xffffff, metalness: 0, roughness: 1.0}); // \n            MODELS['chicken'] = m;\n\n        });\n}\n\nfunction load(model, callback) {\n    modelCounter++;\n    _Render_js__WEBPACK_IMPORTED_MODULE_0__.loadModel(model, (m, anim) => {\n        modelCounter--;\n        callback(m, anim);\n    });\n}\n\nfunction defaultLoad(s, type,override) {\n    if(!type)\n        type = 'gltf'\n    load('assets/models/' + s + '.' + type, m => {\n        if(m.type=='Scene'){\n            m.children.every(obj=>{\n                if(obj.type=='Mesh'){\n                    m=obj;\n                    return false;\n                }\n                return true;\n            })\n        }\n        m.scale.set(2, 2, 2);\n        m.castShadow = true; //default is false\n        m.receiveShadow = true; //default\n        //m.material.shadowSide=THREE.FrontSide;\n        //m.material.side= THREE.DoubleSide;\n        //if(override)\n            //readColors(m,override, [0, 0, 1])\n        //else\n            //readColors(m)\n\n\n        _documentModel(s, m);\n\n        //Render.addModel(m);\n    });\n}\n\n/**make a string reference of our model for easy loading**/\nfunction _documentModel(s, m) {\n    //strip out numbers so we can combine numbered models into a single array for random picking\n    let s2 = s.replace(/[0-9]/g, '');\n    if(s2 != s) {\n        if(MODELS[s2]) {\n            if(!Array.isArray(MODELS[s2])) {\n                let temp = MODELS[s2];\n                MODELS[s2] = [temp];\n            }\n            MODELS[s2].push(m)\n        } else {\n            MODELS[s2] = m;\n        }\n    }\n    MODELS[s] = m;\n}\n\nfunction getPending() {\n    return modelCounter;\n}\n\nfunction findBone(model, name) {\n    if(name && model.children && model.children.length > 0) {\n        return walkBone(model, name);\n    }\n}\n\nfunction walkBone(root, name) {\n    for(let i = 0; i < root.children.length; i++) {\n        //console.log(root.children[i].name)\n        if(root.children[i].name == name) {\n            return root.children[i];\n        } else if(root.children[i].type =  true && root.children[i].children && root.children[i].children.length > 0) {\n            let result = walkBone(root.children[i], name);\n            if(result)\n                return result;\n        }\n    }\n}\n\nfunction readColors(model, swapIn, swapOut) {\n\n    if(model.geometry) {\n        _subReadColors(model, model.geometry, swapIn, swapOut);\n    } else if(model.children && model.children.length > 0) {\n        for(let n = 0; n < model.children.length; n++) {\n            if(model.children[n].geometry) {\n                _subReadColors(model, model.children[n].geometry, swapIn, swapOut);\n            }\n        }\n    }\n}\n\nfunction _subReadColors(parent, geom, swapIn, swapOut) {\n    if(!geom)\n        return;\n\n    let swapping = swapIn && swapOut;\n\n    let array = geom.attributes.color.array\n    let colorArray = [];\n    let j;\n    for(let i = 0; i < array.length; i++) {\n        j = i % 4;\n        if(j >= 3) {\n            if(swapping) {\n                if(array[i - 3] == swapIn[0] && array[i - 2] == swapIn[1] && array[i - 1] == swapIn[2]) {\n                    array[i - 3] = swapOut[0];\n                    array[i - 2] = swapOut[1];\n                    array[i - 1] = swapOut[2];\n                }\n                    //console.log('match?',Helper.rgbFloatToHex(swapIn[0],swapIn[1],swapIn[2]),Helper.rgbFloatToHex(array[i-3],array[i-2],array[i-1]))\n\n            } else {\n                let hex = _Helper_js__WEBPACK_IMPORTED_MODULE_1__.rgbFloatToHex(array[i - 3], array[i - 2], array[i - 1]);\n                colorArray[hex] = array[i - 3] + ',' + array[i - 2] + ',' + array[i - 1];\n            }\n\n        }\n    }\n    if(!swapping) {\n        let content = Object.keys(colorArray);\n        content.forEach(color => {\n            console.log('%s %s %c %s %c %s', parent.name, geom.name, 'background: ' + color + '; color: #000', color, 'background: white;', colorArray[color]);\n        })\n    }\n}\n\nvar windTest;\nvar windV;\n\nfunction animate(delta) {\n\n    if(animators.length > 0) {\n        animators.forEach(anim => {\n            anim.update(5); //DEV set constant for XR     \n        });\n    }\n    /*\n        //VERY COSTLY, FIND A BETTER SOLUTION\n        if(windies.length>0){\n            if(!windTest){\n                windTest=new THREE.Vector3(0,0,0);\n                windV=new THREE.Vector3(0,0,0);\n            }\n            windV.x+=rnd();\n            windV.y+=rnd();\n            windV.z+=rnd();\n            if(Math.abs(windV.x)>1){\n                windV.x*=-0.9;\n            }\n            if(Math.abs(windV.y)>1){\n                windV.y*=-0.9;\n            }\n            if(Math.abs(windV.z)>1){\n                windV.z*=-0.9;\n            }\n\n            windTest.add(windV);\n            windTest.clampLength(0,1.0);\n\n\n            windies.forEach(windy=>{\n                windy.material.uniforms.wind.value=windTest;\n            })\n        }*/\n}\n\nfunction rnd() {\n    return (Math.random() - 0.5) * 0.001;\n}\n\nfunction getModel(model, x, y, z, color, sword, helm, anim) {\n\n    if(!model)\n        model = _lib_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_3__.SkeletonUtils.clone(manModel);\n    else\n        model = _lib_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_3__.SkeletonUtils.clone(model);\n\n    model.position.x = x;\n    model.position.y = y;\n    model.position.z = z;\n    model.rotation.y = Math.PI * (0.5 * Math.random() + 0.75);\n\n    let colors = _Helper_js__WEBPACK_IMPORTED_MODULE_1__.hexToRGBFloat(color);\n\n    model.userData.shirt = { value: new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__.Vector3(colors[0], colors[1], colors[2]) };\n    model.userData.wind = { value: new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 1, 0) };\n\n    model.children.forEach(obj => {\n        if(obj && obj.type == \"SkinnedMesh\") {\n            obj.castShadow = true;\n            obj.receiveShadow = true;\n            if(obj.name == \"Woman\" || obj.name == \"Man\") { //|| obj.name==\"Scarf\"){ //DEV\n                obj.material = personShader.clone();\n                obj.material.uniforms.shirt = model.userData.shirt;\n                //obj.material.uniforms.wind= model.userData.wind;\n            }\n            if(obj.name == \"Scarf\") { //DEV\n                //windies.push(obj);\n            }\n        }\n    })\n\n\n\n\n\n    /*model.children[1].material.onBeforeCompile = shader=> {\n        //shader.fragmentShader = 'uniform vec3 myVector;\\n' + shader.fragmentShader;\n        shader.uniforms.shirt=model.userData.shirtVal;\n        shader.vertexShader='uniform vec3 shirt;\\n'+shader.vertexShader;\n        shader.vertexShader = shader.vertexShader.replace('#include <color_vertex>',\n            `\n            #ifdef USE_COLOR\n                if(color.xyz == vec3(1,0,0)){\n                    vColor.xyz = shirt.xyz;\n                }else{\n                    vColor.xyz = color.xyz;\n                }\n            #endif`);\n    }*/\n\n\n\n    if(sword) {\n        let bone = findBone(model, \"attachHoldR\");\n        if(bone) {\n            bone.add(swordModel.clone());\n        }\n    }\n\n    if(helm) {\n        let bone2 = findBone(model, \"attachHat\");\n        if(bone2) {\n            // let mm=Render.cubit(.1,.8,.1, 0,.4,0,0xff0000,-1)\n            bone2.add(helmModel.clone());\n        }\n    }\n\n    if(!anim)\n        anim = \"Walk\"\n\n    let mixer = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__.AnimationMixer(model);\n    let action = mixer.clipAction(personAnimations[anim]);\n    action.timeScale = 0.002;\n    action.play();\n    animators.push(mixer);\n    instanceColors.push(colors);\n    model.action = action;\n\n    return model;\n}\n\nfunction attach(root, hookString, itemString) {\n    let item = make(itemString);\n    let bone = findBone(root, hookString);\n    if(bone && item) {\n        item.scale.set(1, 1, 1);\n        item.position.set(0, 0, 0);\n        item.castShadow = true;\n\n        bone.add(item);\n    }\n}\n\n/**important model asset fetch and clone function, used often**/\nfunction make(s, player) {\n    let m = MODELS[s];\n    if(m) {\n        if(Array.isArray(m)) {\n            m = m[Math.floor(Math.random() * m.length)]\n        } else if(player && player.color) {\n            if((s == 'man' || s == 'gran' || s=='chicken')) {\n                if(player && player.id) {\n                    let user = _PlayerManager_js__WEBPACK_IMPORTED_MODULE_4__.getUser(player.id)\n                    if(!user.shader) {\n                        user.shader = personShader.clone();\n                        user.shader.needsUpdate = true;\n                        let colors = _Helper_js__WEBPACK_IMPORTED_MODULE_1__.hexToRGBFloat(player.color);\n                        user.shader.uniforms.shirt = { value: new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__.Vector3(colors[0], colors[1], colors[2]) };\n                    }\n\n                    let out = _lib_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_3__.SkeletonUtils.clone(m);\n                    \n                    out.children.forEach(obj => {\n                        if(obj && obj.type == \"SkinnedMesh\") {\n                            obj.castShadow = true;\n                            obj.receiveShadow = true;\n                            obj.material = user.shader\n                            obj.material.needsUpdate = true;\n                        }\n                    })\n                    return out;\n                }else{\n\n\n\n                m = _lib_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_3__.SkeletonUtils.clone(m);\n                let colors = _Helper_js__WEBPACK_IMPORTED_MODULE_1__.hexToRGBFloat(player.color);\n\n                m.userData.shirt = { value: new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__.Vector3(colors[0], colors[1], colors[2]) };\n                m.userData.wind = { value: new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 1, 0) };\n\n                m.children.forEach(obj => {\n                    if(obj && obj.type == \"SkinnedMesh\") {\n                        obj.castShadow = true;\n                        obj.receiveShadow = true;\n                        if(obj.name == \"Gran\" || obj.name == \"Man\" || obj.name == \"GranHead\") { //|| obj.name==\"Scarf\"){ //DEV\n                            console.log('skinned ', obj.name)\n                            obj.material = personShader.clone();\n                            obj.material.skinning = true;\n                            obj.material.needsUpdate = true;\n                            obj.material.uniforms.shirt = m.userData.shirt;\n                            //obj.material.uniforms.wind= model.userData.wind;\n                        }\n                        if(obj.name == \"Scarf\") { //DEV\n                            //windies.push(obj);\n                        }\n                    }\n                })\n                return m;\n            }\n            } \n\n        }\n        return m.clone();\n    } else {\n\n    }\n\n    return _Render_js__WEBPACK_IMPORTED_MODULE_0__.defaultModel.clone();\n}\n\n/** simple asset checker, dev purposes**/\nfunction get(s) {\n    return MODELS[s]\n}\n/**Fancy color mapper shader used for people models to add custom colors per instance with the same asset**/\nfunction makeShader() {\n    // \n    //THREE.ShaderChunk.meshphysical_frag = \"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define REFLECTIVITY\\n\\t#define CLEARCOAT\\n\\t#define TRANSPARENCY\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef TRANSPARENCY\\n\\tuniform float transparency;\\n#endif\\n#ifdef REFLECTIVITY\\n\\tuniform float reflectivity;\\n#endif\\n#ifdef CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheen;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#ifdef TRANSPARENCY\\n\\t\\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\\n\\t#endif\\n\\tgl_FragColor = vec4( 1,1,0, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\n    /*\n        `\n    #ifdef USE_ALPHAMAP\n        diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n    #endif\n\n    #ifdef BIGGO\n        gl_FragColor=vec4(1.0,0,0,1.0);\n    #endif\n    `;*/\n    // #include <clearcoat_pars_fragment>\n    var meshphysical_frag = `\n    #define STANDARD\n#ifdef PHYSICAL\n    #define REFLECTIVITY\n    #define CLEARCOAT\n    #define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n    uniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n    uniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n    uniform float clearcoat;\n    uniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n    uniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n    varying vec3 vNormal;\n    #ifdef USE_TANGENT\n        varying vec3 vTangent;\n        varying vec3 vBitangent;\n    #endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n    #include <clipping_planes_fragment>\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <roughnessmap_fragment>\n    #include <metalnessmap_fragment>\n    #include <normal_fragment_begin>\n    #include <normal_fragment_maps>\n    #include <clearcoat_normal_fragment_begin>\n    #include <clearcoat_normal_fragment_maps>\n    #include <emissivemap_fragment>\n    #include <lights_physical_fragment>\n    #include <lights_fragment_begin>\n    #include <lights_fragment_maps>\n    #include <lights_fragment_end>\n    #include <aomap_fragment>\n    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n    #ifdef TRANSPARENCY\n        diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n    #endif\n    gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}`\n\n\n\n\n    /*\n    #ifdef USE_COLOR\n                if(vColor==vec3(0,0,1))\n                    diffuseColor.rgb *= vec3(1,0,0);\n                else\n                    diffuseColor.rgb *= vColor;\n        #endif*/\n\n    //    #include <color_vertex>\n\n    var meshphysical_vert = `#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n    varying vec3 vNormal;\n    #ifdef USE_TANGENT\n        varying vec3 vTangent;\n        varying vec3 vBitangent;\n    #endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nuniform vec3 shirt;\nuniform vec3 wind;\n\nvoid main() {\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #ifdef USE_COLOR\n        if(color==vec3(0,0,1))\n            vColor.xyz = shirt;\n        else\n            vColor.xyz = color.xyz;\n        \n    #endif\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    #include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n    vNormal = normalize( transformedNormal );\n    #ifdef USE_TANGENT\n        vTangent = normalize( transformedTangent );\n        vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n    #endif\n#endif\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <displacementmap_vertex>\n\n    \n        if(color==vec3(1,0,0)){\n            float val=max(0.0, 1.0976 - transformed.z);\n            transformed.xyz+=val*wind;\n            transformed.y*=1.0+sin((wind.z+transformed.z)*4.0)/2.0;\n\n        }\n    \n\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    vViewPosition = - mvPosition.xyz;\n    #include <worldpos_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>\n}`\n\n    var uniforms = _lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__.UniformsUtils.merge(\n        [_lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__.ShaderLib.phong.uniforms,\n            {\n                shirt: { value: new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 1, 0) },\n                wind: { value: new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 0, 0) }\n            }\n        ]\n    );\n\n    uniforms.ambientLightColor.value = null;\n    /* var uniforms={ambientLightColor: { value: null },\n    lightProbe: { value: null },\n    directionalLights: { value: null },\n    spotLights: { value: null },\n    rectAreaLights: { value: null },\n    pointLights: { value: null },\n    hemisphereLights: { value: null },\n    directionalShadowMap: { value: null },\n    directionalShadowMatrix: { value: null },\n    spotShadowMap: { value: null },\n    spotShadowMatrix: { value: null },\n    pointShadowMap: { value: null },\n    pointShadowMatrix: { value: null },\n}*/\n\n\n    /*{\n           diffuse: {type: 'c', value: new THREE.Color(0x0000ff)}\n         }*/\n\n    /*let mat=new THREE.ShaderMaterial( {\n         uniforms: uniforms,\n         derivatives: false,\n         lights: true,\n         //vertexShader: vertexShader(),\n         //fragmentShader: fragmentShader()\n         vertexShader: THREE.ShaderChunk.cube_vert,\n         fragmentShader: THREE.ShaderChunk.cube_frag\n     });\n    mat.skinning=true;*/\n\n    //let mat=new THREE.MeshStandardMaterial({  vertexColors: THREE.VertexColors, metalness: 0, roughness: 1.0});\n    //mat.defines.BIGGO=true;\n\n    let mat = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_2__.ShaderMaterial({\n        uniforms: uniforms,\n        derivatives: false,\n        lights: true,\n        vertexColors: true,\n        vertexShader: meshphysical_vert,\n        fragmentShader: meshphysical_frag\n        //vertexShader: THREE.ShaderChunk.cube_vert,\n        //fragmentShader: THREE.ShaderChunk.cube_frag\n    });\n\n    return mat;\n}\n\nfunction vertexShader() {\n    return `\n    #include <common>\n    varying vec3 vUv; \n\n    void main() {\n      vUv = position; \n\n      vec4 modelViewPosition = modelViewMatrix * vec4(position, 1.0);\n      gl_Position = projectionMatrix * modelViewPosition; \n    }\n  `\n}\n\nfunction fragmentShader() {\n    /* return `\n      #include <common>\n      uniform vec3 colorA; \n      uniform vec3 colorB; \n      varying vec3 vUv;\n\n      void main() {\n        gl_FragColor = vec4(mix(colorA, colorB, vUv.z), 1.0);\n      }\n  `*/\n\n    /*\n      return `\n    uniform float opacity;\n    #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n        varying vec3 vViewPosition;\n    #endif\n    #ifndef FLAT_SHADED\n        varying vec3 vNormal;\n        #ifdef USE_TANGENT\n            varying vec3 vTangent;\n            varying vec3 vBitangent;\n        #endif\n    #endif\n    #include <packing>\n    #include <uv_pars_fragment>\n    #include <bumpmap_pars_fragment>\n    #include <normalmap_pars_fragment>\n    #include <logdepthbuf_pars_fragment>\n    #include <clipping_planes_pars_fragment>\n    void main() {\n        #include <clipping_planes_fragment>\n        #include <logdepthbuf_fragment>\n        #include <normal_fragment_begin>\n        #include <normal_fragment_maps>\n        gl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n    }\n      `*/\n\n\n\n}\n\n\n\n\n//# sourceURL=webpack://buup/./src/AssetManager.js?");

/***/ }),

/***/ "./src/BarUI.js":
/*!**********************!*\
  !*** ./src/BarUI.js ***!
  \**********************/
/*! namespace exports */
/*! export apps [provided] [no usage info] [missing usage info prevents renaming] */
/*! export clearPendApp [provided] [no usage info] [missing usage info prevents renaming] */
/*! export closeApp [provided] [no usage info] [missing usage info prevents renaming] */
/*! export hide [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export openApp [provided] [no usage info] [missing usage info prevents renaming] */
/*! export pendApp [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setNotifier [provided] [no usage info] [missing usage info prevents renaming] */
/*! export show [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"pendApp\": () => /* binding */ pendApp,\n/* harmony export */   \"clearPendApp\": () => /* binding */ clearPendApp,\n/* harmony export */   \"apps\": () => /* binding */ apps,\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"openApp\": () => /* binding */ openApp,\n/* harmony export */   \"closeApp\": () => /* binding */ closeApp,\n/* harmony export */   \"hide\": () => /* binding */ hide,\n/* harmony export */   \"show\": () => /* binding */ show,\n/* harmony export */   \"setNotifier\": () => /* binding */ setNotifier\n/* harmony export */ });\n/* harmony import */ var _UI_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UI.js */ \"./src/UI.js\");\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _Control_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Control.js */ \"./src/Control.js\");\n/* harmony import */ var _Chat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Chat.js */ \"./src/Chat.js\");\n\n\n\n\n\n//doms\nvar apps;\nvar svg;\nvar path;\nvar bar;\nvar barBox;\nvar mainTitle;\n\nvar focused;\nvar barMove = false;\nvar barPos = 1;\nvar barTucked = false;\nvar appPoints;\nvar moveFactor = 0;\n\nvar count = 0;\nvar tick = false;\n\nvar targetMove = undefined;\nvar targetPoint = { x: 0, y: 0 }\n\nvar points;\n\nvar pendingRenderId; //if not undefined, wait for Render to load and then apply the scene\n\nvar resizeDebouncer;\n\nvar closeCard;\n\nfunction init(argument) {\n    closeCard = document.querySelector('#closeCard');\n    closeCard.spot=-1;\n    closeCard.addEventListener('click', ev => { closeApp() })\n\n    let preApps = document.querySelectorAll('.card');\n    apps = []\n    preApps.forEach(app => { //convert out of a nodelist to an array, it matters trust me\n        apps.push(app)\n    });\n\n    apps.forEach((app, index) => {\n        app.style.top = Math.random() * window.innerWidth + 'px'\n        app.style.left = Math.random() * window.innerHeight + 'px'\n        app.offset = { x: 0, y: 0 };\n        app.appId = index;\n        app.addEventListener('pointerdown', ev => { appSelect(app, ev); })\n        app.addEventListener('dragstart', ev => { ev.preventDefault() })\n    });\n\n    window.addEventListener('pointerup', winMouseUp)\n    window.addEventListener('resize', resize);\n    //initLine();\n    window.addEventListener('pointermove', mousemove)\n\n    barInit();\n\n    resize();\n    animate();\n    //setInterval(() => { boundaryCheck() }, 3000)\n}\n\nfunction openApp(id) {\n    let app = apps[id];\n    if(app) {\n\n        app.classList.add('cardMax')\n        app.focused = true;\n        app.style.zIndex = 0;\n        Object.values(app.children).forEach(sub => {\n            if(sub.className == 'card-notifier')\n                sub.remove();\n            else\n                sub.style.display = 'initial';\n        })\n\n        if(app.id == 'chatCard') {\n            _Chat_js__WEBPACK_IMPORTED_MODULE_3__.openChat()\n        }\n        \n        _Control_js__WEBPACK_IMPORTED_MODULE_2__.setState(app.id)\n\n        if(app.spot == -1) {\n            closeCard.style.top = '32px'\n            closeCard.style.left = '32px'\n        } else {\n            closeCard.style.top = app.style.top\n            closeCard.style.left = app.style.left\n        }\n        closeCard.spot=app.spot\n        setTimeout(()=>{\n            closeCard.style.opacity = '1';\n            closeCard.style.pointerEvents = 'auto';\n        },100)\n        \n\n        /*if(Render) {\n            openAppApplyRender(id, app)\n        } else {\n            pendingRenderId = id;\n            pendApp(id);\n        }*/\n        focused = app;\n\n\n    }\n}\n\nfunction openAppApplyRender(id, app) {\n    let d = _Render_js__WEBPACK_IMPORTED_MODULE_1__.getAlphaCanvas();\n    d.style.opacity = 1;\n    d.remove();\n\n    let afterImage = document.querySelector('#afterImage');\n\n    afterImage.remove();\n\n\n    app.appendChild(d);\n\n    if(focused) {\n        focused.appendChild(afterImage);\n        afterImage.style.opacity = 1;\n        setTimeout(() => { afterImage.style.opacity = 0; }, 1);\n    } else { //silly I know but it's just easier to keep the afterImage within the dom, even if in this logical case it's not used\n        afterImage.style.opacity = 0;\n        if(app == 0)\n            apps[1].appendChild(afterImage);\n        else\n            apps[0].appendChild(afterImage);\n    }\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.bufferPrint();\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.flipScene(id)\n}\n\nfunction closeApp() {\n    console.log('close called')\n    if(focused) {\n        console.log('focused close called')\n        focused.classList.remove('cardMax')\n        focused.style.zIndex = 2;\n        focused.focused = undefined; //wow why did i name this like this //TODO\n        _Control_js__WEBPACK_IMPORTED_MODULE_2__.setState(undefined)\n        Object.values(focused.children).forEach(sub => {\n            if(sub.className == 'card-notifier')\n                sub.style.display = 'initial'\n            else\n                sub.style.display = 'none';\n        })\n\n\n        /*window.history.pushState({}, '', '/');\n        if(!disableFade && Render) {\n            let d = Render.getAlphaCanvas();\n            setTimeout(() => { d.style.opacity = 0; }, 1);\n            d.style.opacity = 1;\n        }*/\n        closeCard.style.opacity = '0';\n        closeCard.style.pointerEvents = 'none';\n        closeCard.spot=-1;\n    }\n    if(barTucked) {\n        barTucked = false;\n        barAdjust()\n    }\n}\n\n\n\nfunction resize() {\n\n    clearTimeout(resizeDebouncer);\n    resizeDebouncer = setTimeout(function() {\n        //svg.setAttribute('width', window.innerWidth + \"px\")\n        //svg.setAttribute('height', window.innerHeight + \"px\")\n        barAdjust();\n        _Render_js__WEBPACK_IMPORTED_MODULE_1__.resize();\n\n        //UI.systemMessage('inner ' + window.innerWidth + '; screen ' + window.screen.width, 'success')\n    }, 250);\n\n}\n\nfunction rand() {\n    return Math.random() * 100 - 50;\n}\n\n\nfunction barInit() {\n    bar = document.querySelector('#bar')\n    let barHandle = document.querySelector('#barHandle')\n    barHandle.addEventListener('pointerdown', ev => {\n        //let xx = barBox.left //-(barBox.right-barBox.left)/2\n        //let yy = barBox.top //-(barBox.bottom-barBox.top)/2\n\n        barMove = true; //{x:ev.clientX-xx,y:ev.clientY-yy};\n\n        /*if(points.length < 10) { //rebuild are point array\n            let startPoint = points[0];\n            let array = Array(7).fill(startPoint);\n            points = array.concat(points)\n        }\n\n        barLineFactor = 0;*/\n    })\n    barHandle.addEventListener('dragstart', ev => { ev.preventDefault() })\n    /*barHandle.addEventListener('pointerup',ev=>{\n        barMove=false;\n    })*/\n\n    appPoints = [];\n\n    barHandle.style.transform = 'translate(-50%,-200%)';\n    bar.style.left = '50%';\n    bar.style.top = (window.innerHeight - 64) + 'px';\n\n    barCalculate(true);\n}\n\nfunction barCalculate(notate) {\n\n    //first determine  how many apps will be visably part of the app bar\n    let count = 0;\n    let appsInRow = [];\n    let sideWays = barPos == 0 || barPos == 2;\n\n    if(!notate) {\n        apps.forEach(app => {\n            if(app.spot != -1) {\n                appsInRow.push(app)\n                count++;\n            }\n        })\n    } else {\n        count = apps.length;\n        appsInRow = apps;\n    }\n    if(sideWays) {\n        bar.style.height = (count > 0 ? count : 1) * 64 + 'px'\n        bar.style.width = '82px'\n\n    } else {\n        bar.style.width = (count > 0 ? count : 1) * 64 + 'px'\n        bar.style.height = '82px'\n    }\n\n    let rect = bar.getBoundingClientRect();\n    barBox = rect\n    let width = rect.width;\n    let height = rect.height;\n\n    let ratio;\n    if(sideWays)\n        ratio = height / (count);\n    else\n        ratio = width / (count);\n\n    if(!notate) {\n        if(sideWays) {\n            appsInRow.sort(function(a, b) {\n                return parseInt(a.style.top) - parseInt(b.style.top);\n            });\n            //bar.style.borderWidth=\"0 6px 0px 6px\";\n\n        } else\n            appsInRow.sort(function(a, b) {\n                return parseInt(a.style.left) - parseInt(b.style.left);\n            });\n    }\n\n\n    for(let i = 0; i < count; i++) {\n        if(sideWays)\n            appPoints[i] = { x: rect.left + width / 2, y: 32 + rect.top + (i) * ratio };\n        else\n            appPoints[i] = { x: 32 + rect.left + (i) * ratio, y: rect.top + height / 2 };\n\n\n        if(targetMove && targetMove == appsInRow[i])\n            targetPoint = appPoints[i]\n\n        if(notate) {\n            apps[i].spot = i;\n            appPoints[i].app = appsInRow[i]\n        }\n        if(closeCard.spot!=-1){\n            if(appsInRow[i].spot==closeCard.spot)\n                _moveEle(closeCard, appPoints[i].x, appPoints[i].y)\n        }\n\n        _moveEle(appsInRow[i], appPoints[i].x, appPoints[i].y)\n        \n    }\n    //if(barLineFactor == -1) {\n    let handle = barHandle.getBoundingClientRect();\n    if(sideWays) {\n        let xx = handle.left + handle.width / 2\n        drawSimpleBarLine({ x: xx, y: handle.top }, { x: xx, y: handle.bottom })\n    } else {\n        let yy = handle.top + handle.height / 2\n        drawSimpleBarLine({ x: handle.left, y: yy }, { x: handle.right, y: yy })\n    }\n\n    //}\n}\n\nfunction animate() {\n    /*if(barLineFactor > -1) {\n        if(barLineFactor < 4) {\n            if(barLineFactor) {\n                let target = {};\n                let rect = barHandle.getBoundingClientRect();\n                let mid = { x: rect.width / 2, y: rect.height / 2 }\n\n                if(barPos == 0 || barPos == 2) {\n                    switch (barLineFactor) {\n                        case 3:\n                            target = { x: rect.left + mid.x, y: rect.top };\n                            break;\n                        case 2:\n                            target = { x: rect.left + mid.x, y: rect.top + mid.y };\n                            break;\n                        default:\n                            target = { x: rect.left + mid.x, y: rect.bottom }\n                    }\n                } else {\n                    switch (barLineFactor) {\n                        case 3:\n                            target = { x: rect.left, y: rect.top + mid.y };\n                            break;\n                        case 2:\n                            target = { x: rect.left + mid.x, y: rect.top + mid.y };\n                            break;\n                        default:\n                            target = { x: rect.right, y: rect.top + mid.y }\n                    }\n                }\n\n                let dx = mouseObj.x - target.x;\n                let dy = mouseObj.y - target.y;\n                let dr = Math.sqrt(dx * dx + dy * dy)\n                mouseObj.x -= dx / 2\n                mouseObj.y -= dy / 2\n                if(dr < 1 && barLineFactor < 4)\n                    barLineFactor++;\n            }\n\n\n            let diff = { x: mouseObj.x - points[0].x, y: mouseObj.y - points[0].y }\n            let dr = Math.sqrt(diff.x * diff.x + diff.y * diff.y)\n\n            if(dr > 40) {\n                let nextVector;\n                if(barLineFactor > 1) { //straight to next point\n                    nextVector = { x: mouseObj.x, y: mouseObj.y };\n                } else { //wiggle the line\n                    nextVector = { x: mouseObj.x - (tick ? 1 : -1) * 20 * diff.y / dr, y: mouseObj.y + (tick ? 1 : -1) * 20 * diff.x / dr };\n                }\n\n                let dir = Math.abs(diff.x) > Math.abs(diff.y);\n                let pos = dir ? diff.x > 0 : diff.y > 0\n                tick = !tick\n\n                drawBarLine(nextVector);\n            }\n        } else {\n            if(barLineFactor % 5 == 1) {\n\n                let target = points.shift();\n                console.log('chop off points ' + points.length)\n                if(points.length <= 3) {\n                    barLineFactor = -1;\n                    barCalculate();\n                } else {\n                    drawBarLine(target)\n                }\n\n            }\n            if(barLineFactor != -1)\n                barLineFactor++;\n\n        }\n    }\n*/\n\n    requestAnimationFrame(animate);\n}\n\nfunction drawBarLine(nextVector) {\n    /*let st = \"M\" + mouseObj.x + \" \" + mouseObj.y;\n    let last = { x: nextVector.x, y: nextVector.y };\n    for(let i = 0; i < points.length; i++) {\n        let halfy = (points[i].y - last.y) / 2\n        let halfx = (points[i].x - last.x) / 2\n        let midx = last.x + halfx;\n        let midy = last.y + halfy;\n        st += \"Q\" + last.x + \" \" + last.y + \" \" + midx + \" \" + midy //+points[i].x+\" \"+points[i].y\n\n        let prev = { x: points[i].x, y: points[i].y };\n        points[i] = { x: last.x, y: last.y };\n        last = prev;\n    }\n    path.setAttribute('d', st)*/\n}\n\nfunction drawSimpleBarLine(one, two) {\n    let st = \"M\" + one.x + ' ' + one.y + \"L\" + two.x + ' ' + two.y;\n    //path.setAttribute('d', st);\n\n}\n\nfunction mousemove(ev) {\n    barMoveHandler(ev);\n    if(targetMove) {\n        moveFactor++;\n        targetMove.pos = { x: ev.clientX + targetMove.offset.x, y: ev.clientY + targetMove.offset.y }\n\n        if(ev.clientY > barBox.top && ev.clientY < barBox.bottom && ev.clientX > barBox.left && ev.clientX < barBox.right) {\n            let point = targetPoint;\n            let d = { x: point.x - targetMove.pos.x, y: point.y - targetMove.pos.y }\n            targetMove.pos = { x: point.x - d.x / 3, y: point.y - d.y / 3 }\n            if(targetMove.moving) { //called once per state change\n                targetMove.moving = undefined;\n                targetMove.spot = 0;\n                barCalculate();\n            }\n\n        } else {\n            if(!targetMove.moving) { //called once per state change\n                targetMove.moving = true;\n                targetMove.spot = -1;\n\n                barCalculate()\n            }\n\n        }\n\n        targetMove.style.left = targetMove.pos.x + 'px'\n        targetMove.style.top = targetMove.pos.y + 'px'\n    }\n    /*else if(barLineFactor == 0) {\n           if(count > 2) {\n               count = 0;\n               mouseObj = { x: ev.clientX, y: ev.clientY }\n           }\n           count++\n       }*/\n}\n\nfunction barMoveHandler(ev) {\n    if(barMove) {\n        moveFactor++;\n        let xx = ev.clientX;\n        let yy = ev.clientY;\n        let mx = window.innerWidth / 2;\n        let my = window.innerHeight / 2;\n        let dx = xx - mx;\n        let dy = yy - my;\n        let xtuck = (mx - Math.abs(dx)) < 10\n        let ytuck = (my - Math.abs(dy)) < 10\n\n        let r = Math.atan2(dy, dx) / Math.PI;\n        let ar = Math.abs(r)\n        if(ar < 0.25) { //right\n            if(barPos != 2) {\n                barPos = 2;\n                barAdjust()\n            }\n            if(xtuck != barTucked) {\n                barTucked = xtuck;\n                barAdjust();\n            }\n        } else if(ar < 0.75) { //top or bottom\n            if(r < 0) { //top\n                if(barPos != 3) {\n                    barPos = 3;\n                    barAdjust()\n                }\n            } else { //botttom\n                if(barPos != 1) {\n                    barPos = 1\n                    barAdjust()\n                }\n            }\n            if(ytuck != barTucked) {\n                barTucked = ytuck;\n                barAdjust();\n            }\n        } else { //left\n            if(barPos != 0) {\n                barPos = 0;\n                barAdjust()\n            }\n            if(xtuck != barTucked) {\n                barTucked = xtuck;\n                barAdjust();\n            }\n        }\n\n        /*\n                        if(window.innerWidth>window.innerHeight){ //landscape\n                            let half=(window.innerWidth - window.innerHeight)/2\n                            if(xx<half){ //left\n                                bar.style.transform='rotate(90deg)'\n                                barHandle.style.transform='translate(-50%,-200%)'\n                            }else if(xx>window.innerWidth-half){ //right\n                                bar.style.transform='rotate(90deg)'\n                                barHandle.style.transform='translate(-50%,100%)'\n                            }else{\n                                bar.style.transform='rotate(0deg)'\n                                if(yy>window.innerHeight/2){\n                                    barHandle.style.transform='translate(-50%,-200%)'\n                                }else{\n                                    barHandle.style.transform='translate(-50%,100%)'\n                                }\n                            }\n                        }else{ //portrait\n                            let half=(window.innerHeight - window.innerWidth)/2\n                            if(yy<half){ //top\n                                bar.style.transform='rotate(0deg)'\n                                barHandle.style.transform='translate(-50%,-200%)'\n                            }else if(yy>window.innerHeight-half){ //bottom\n                                bar.style.transform='rotate(0deg)'\n                                barHandle.style.transform='translate(-50%,100%)'\n                            }else{\n                                bar.style.transform='rotate(90deg)'\n                                if(xx>window.innerWidth/2){\n                                    barHandle.style.transform='translate(-50%,-200%)'\n                                }else{\n                                    barHandle.style.transform='translate(-50%,100%)'\n                                }\n                            }\n                        }*/\n    }\n}\n\nfunction barAdjust() {\n    if(barPos == 2) { //right\n\n        bar.style.left = window.innerWidth - (barTucked ? -32 : 48) + 'px';\n        bar.style.top = '50%'; //window.innerHeight/2;\n        barCalculate();\n        barHandle.style.transform = 'translate(-200%,-50%)'\n        barHandle.style.width = '32px';\n        barHandle.style.height = '80%';\n        bar.style.borderWidth = \"0px 0px 0px 6px\";\n        //mainTitle.style.top = '28px';\n        _Chat_js__WEBPACK_IMPORTED_MODULE_3__.setSize(false)\n    } else if(barPos == 3) { //top\n        barHandle.style.transform = 'translate(-50%,100%)'\n        bar.style.left = '50%';\n        bar.style.top = (barTucked ? -32 : 48) + 'px';\n        //mainTitle.style.top = 'calc(100% - 128px)';\n\n        barCalculate();\n        barHandle.style.height = '32px';\n        barHandle.style.width = '80%';\n        bar.style.borderWidth = \"0px 0px 6px 0px\";\n        _Chat_js__WEBPACK_IMPORTED_MODULE_3__.setSize(false)\n    } else if(barPos == 1) { //bottom\n        barHandle.style.transform = 'translate(-50%,-200%)'\n        bar.style.left = '50%';\n        bar.style.top = window.innerHeight - (barTucked ? -32 : 48) + 'px';\n        //mainTitle.style.top = '28px';\n        barCalculate();\n        barHandle.style.height = '32px';\n        barHandle.style.width = '80%';\n        bar.style.borderWidth = \"6px 0px 0px 0px\"\n        _Chat_js__WEBPACK_IMPORTED_MODULE_3__.setSize(true)\n    } else { //left\n        barHandle.style.transform = 'translate(100%,-50%)'\n        bar.style.left = (barTucked ? -32 : 48) + 'px';\n        bar.style.top = '50%'\n        barCalculate()\n        barHandle.style.width = '32px'\n        barHandle.style.height = '80%'\n        bar.style.borderWidth = \"0px 6px 0px 0px\";\n        //mainTitle.style.top = '28px';\n        _Chat_js__WEBPACK_IMPORTED_MODULE_3__.setSize(false)\n    }\n}\n\n\nfunction appSelect(app, ev) {\n    if(!app.focused) {\n        targetMove = app;\n\n        app.pos = { x: parseInt(app.style.left), y: parseInt(app.style.top) }\n        targetPoint = { x: app.pos.x, y: app.pos.y }\n        //app.origin={x:app.pos.x,y:app.pos.y}\n        app.offset = { x: app.pos.x - ev.clientX, y: app.pos.y - ev.clientY }\n        app.classList.add('cardMove')\n        app.moving = undefined;\n\n    }\n}\n\nfunction winMouseUp(ev) {\n    if(barMove) {\n        barMove = false;\n        //barLineFactor = 1;\n        console.log(moveFactor)\n        if(moveFactor < 10) {\n            closeApp();\n        }\n    }\n\n    if(targetMove) {\n        targetMove.classList.remove('cardMove')\n        if(moveFactor < 20) {\n            if(focused && focused == targetMove) {\n                targetMove.classList.remove('cardMax')\n                targetMove.focused = undefined;\n                focused = undefined;\n                targetMove.style.zIndex = 2;\n                //window.history.pushState({}, '', '/');\n\n            }\n            // else {\n\n            closeApp(true);\n            openApp(targetMove.appId);\n\n            //window.history.pushState({ appId: targetMove.appId }, targetMove.name, '?id=' + targetMove.appId + '&app=' + targetMove.id);\n            //}\n        } else {\n            barCalculate();\n\n            console.log('fix bar also')\n        }\n    } else {\n        barCalculate();\n        console.log('fix bar')\n    }\n    targetMove = undefined;\n\n    moveFactor = 0;\n\n}\n\nfunction boundaryCheck() {\n    apps.forEach(app => {\n        if(!app.focused) {\n            let rect = app.getBoundingClientRect();\n\n            let x = rect.left;\n            let y = rect.top;\n            let w2 = (rect.right - rect.left) / 2;\n            let h2 = (rect.bottom - rect.top) / 2\n\n            if(x < 0) {\n                app.style.left = w2 + 'px'\n            } else if(x > window.innerWidth - w2 * 2) {\n                app.style.left = window.innerWidth - w2 + 'px'\n            }\n            if(y < 0) {\n                app.style.top = h2 + 'px'\n            } else if(y > window.innerHeight - h2 * 2) {\n                app.style.top = window.innerHeight - h2 + 'px'\n            }\n\n        }\n\n    })\n}\n\nfunction _moveEle(ele, x, y, bool) {\n    if(!bool)\n        ele.pos = { x: x, y: y }\n    ele.style.left = x + 'px'\n    ele.style.top = y + 'px'\n}\n\nfunction pendApp(id) {\n    let app = apps[id]\n    let cube = app.querySelector('cube')\n    if(!cube) {\n        cube = document.createElement('cube');\n        app.appendChild(cube);\n    }\n}\n\nfunction clearPendApp(id) {\n    let app = apps[id]\n    let cube = app.querySelector('cube')\n    if(cube)\n        cube.remove()\n}\n\nfunction hide() {\n    barTucked = true;\n    barAdjust();\n}\nfunction show(){\n    barTucked=false;\n    barAdjust();\n}\n\nfunction setNotifier(id, num) {\n    let target = apps[id];\n    if(!target.focused) {\n        let dom = target.querySelector('.card-notifier');\n        if(!dom) {\n            dom = document.createElement('div')\n            dom.className = 'card-notifier';\n            target.appendChild(dom)\n            dom.innerText = num\n        } else\n            dom.innerText = parseInt(dom.innerText) + num;\n\n        target.style.animation = ''\n        void target.offsetWidth;\n        target.style.animation = 'attention 0.2s';\n\n    }\n\n}\n\nfunction isFocused(id) {\n    let app = apps[id]\n    if(app)\n        return app.focused\n\n    return false;\n}\n\n\n\n\n//# sourceURL=webpack://buup/./src/BarUI.js?");

/***/ }),

/***/ "./src/Character.js":
/*!**************************!*\
  !*** ./src/Character.js ***!
  \**************************/
/*! namespace exports */
/*! export applyUsers [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export updateSheet [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"updateSheet\": () => /* binding */ updateSheet,\n/* harmony export */   \"applyUsers\": () => /* binding */ applyUsers\n/* harmony export */ });\n/* harmony import */ var _Drawer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Drawer.js */ \"./src/Drawer.js\");\n/* harmony import */ var _PictureMaker_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PictureMaker.js */ \"./src/PictureMaker.js\");\n/* harmony import */ var _Online_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Online.js */ \"./src/Online.js\");\n/* harmony import */ var _PlayerManager_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PlayerManager.js */ \"./src/PlayerManager.js\");\n/* harmony import */ var _UI_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./UI.js */ \"./src/UI.js\");\n\n\n\n\n\n\nconst SKILLS = [\n    ['STR', 'Athletics', 'athletics.png'],\n    ['DEX', 'Acrobatics', 'acrobatics.png'],\n    ['DEX', 'Sleight of Hand', 'sleight.png'],\n    ['DEX', 'Stealth', 'stealth.png'],\n\n    ['INT', 'Arcana', 'arcana.png'],\n    ['INT', 'History', 'history.png'],\n    ['INT', 'Investigation', 'investigation.png'],\n    ['INT', 'Nature', 'nature.png'],\n    ['INT', 'Religion', 'religion.png'],\n\n    [\"WIS\", \"Animal Handling\", 'animal.png'],\n    [\"WIS\", \"Insight\", 'insight.png'],\n    [\"WIS\", \"Medicine\", 'medicine.png'],\n    [\"WIS\", \"Perception\", 'perception.png'],\n    [\"WIS\", \"Survival\", 'survival.png'],\n\n    [\"CHR\", \"Deception\", 'deception.png'],\n    [\"CHR\", \"Intimidation\", 'intimidation.png'],\n    [\"CHR\", \"Performance\", 'performance.png'],\n    [\"CHR\", \"Persuasion\", 'persuasion.png'],\n]\n\nvar testToggle = true;\nvar main;\nvar editing = false;\n\nvar sectionStatus;\nvar sectionStats;\nvar sectionPersonality;\nvar sectionCharacter;\nvar sectionOther;\nvar sectionTraits;\n\nvar traitsAdd\nvar otherAdd;\nvar inspirationButton;\n\nvar sheets = {};\nvar currentUser;\nvar sheetDom;\n\nconst emptySheet = JSON.stringify({ traits: [], personality: [\"\", \"\", \"\", \"\"], proficiencies: [], abilities: [\n        [0, 0],\n        [0, 0],\n        [0, 0],\n        [0, 0],\n        [0, 0],\n        [0, 0]\n    ], skills: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], character: { name: \"Doopy\", type: \"Bard\", proficiency: 0, inspiration: \"./undefined\" } })\n\nfunction init() {\n    main = document.querySelector('#characterCard')\n    sheetDom = document.querySelector('.sheet')\n    initSheet();\n\n\n    let stats = main.querySelector('.section-stats')\n    sectionStats = stats;\n    sectionOther = main.querySelector('.section-other');\n    sectionTraits = main.querySelector('.section-traits');\n    sectionPersonality = main.querySelector('.section-personality');\n    sectionStatus = main.querySelector('.section-status');\n    sectionCharacter = main.querySelector('.section-character');\n\n    let strDom = makeStat('STR', 'Strength', 5)\n    let dexDom = makeStat('DEX', 'Dexterity', 5)\n    let conDom = makeStat('CON', 'Constitution', 5)\n    let intDom = makeStat('INT', 'Intelligence', 5)\n    let wisDom = makeStat('WIS', 'Wisdom', 5)\n    let chrDom = makeStat('CHR', 'Charisma', 5)\n\n    let strg = d('section-group section-group-mini')\n    let dexg = d('section-group section-group-mini')\n    let cong = d('section-group section-group-mini')\n    let intg = d('section-group section-group-mini')\n    let wisg = d('section-group section-group-mini')\n    let chrg = d('section-group section-group-mini')\n\n    strg.appendChild(strDom)\n    dexg.appendChild(dexDom)\n    cong.appendChild(conDom)\n    intg.appendChild(intDom)\n    wisg.appendChild(wisDom)\n    chrg.appendChild(chrDom)\n\n    stats.appendChild(strg)\n    stats.appendChild(dexg)\n    stats.appendChild(cong)\n    stats.appendChild(intg)\n    stats.appendChild(wisg)\n    stats.appendChild(chrg)\n\n\n    SKILLS.forEach((i, n) => {\n        let skill = makeSkill(n, i[0], i[1], i[2]);\n        switch (i[0]) {\n            case 'STR':\n                strg.appendChild(skill);\n                break;\n            case 'DEX':\n                dexg.appendChild(skill);\n                break;\n            case 'CON':\n                cong.appendChild(skill);\n                break;\n            case 'INT':\n                intg.appendChild(skill);\n                break;\n            case 'WIS':\n                wisg.appendChild(skill);\n                break;\n                ddefault: chrg.appendChild(skill);\n        }\n        //skillList.appendChild(\n    })\n\n\n    strg.addEventListener('click', toggleMini);\n    dexg.addEventListener('click', toggleMini);\n    cong.addEventListener('click', toggleMini);\n    intg.addEventListener('click', toggleMini);\n    wisg.addEventListener('click', toggleMini);\n    chrg.addEventListener('click', toggleMini);\n\n\n\n    //\n    window.addEventListener('keyup', ev => {\n        //console.log(ev.keyCode )\n        if (ev.keyCode == 27) {\n            if (testToggle)\n                enableEdit()\n            else\n                disableEdit()\n\n            testToggle = !testToggle\n        }\n    })\n\n    //dom[1].appendChild(makeSkill(0,'CHR','Hello',null,2));\n    makeStatus();\n\n    //createSimpleAdjuster(main)\n\n\n    otherAdd = sectionOther.querySelector('.feature-add');\n    traitsAdd = sectionTraits.querySelector('.feature-add');\n\n    otherAdd.addEventListener('click', ev => {\n        let dom = makeOther();\n        sectionOther.insertBefore(dom, otherAdd)\n    })\n\n    traitsAdd.addEventListener('click', ev => {\n        let dom = makeTrait();\n        sectionTraits.insertBefore(dom, traitsAdd)\n    })\n\n    let prof = sectionCharacter.querySelector('.character-proficiency')\n    let cent = d('centered')\n    cent.appendChild(input(2, 6))\n    prof.appendChild(cent)\n\n    main.querySelector('#sheet-edit-button').addEventListener('click', ev => {\n        if (testToggle) {\n            enableEdit()\n            ev.target.classList.add('toggled')\n        } else {\n            let out = disableEdit()\n            if (out)\n                _UI_js__WEBPACK_IMPORTED_MODULE_4__.systemMessage('Saved Character!', 'success', false, 1500)\n            ev.target.classList.remove('toggled')\n        }\n        testToggle = !testToggle\n    })\n\n    let inspiration = sectionCharacter.querySelector('.character-inspiration')\n\n    inspirationButton = _Drawer_js__WEBPACK_IMPORTED_MODULE_0__.makeButton(inspiration, 'character', function(opening) {\n        let profi = sectionCharacter.querySelector('.character-inspiration').querySelector('img')\n\n        if (opening)\n            _Drawer_js__WEBPACK_IMPORTED_MODULE_0__.setData(profi)\n        else\n            profi.src = _Drawer_js__WEBPACK_IMPORTED_MODULE_0__.getData()\n    })\n    inspirationButton.style.position = 'absolute'\n    inspirationButton.style.right = '-16px'\n    inspirationButton.style.bottom = '-16px'\n    //inspiration.appendChild(inspButton)\n\n    let pic = sectionCharacter.querySelector('.character-picture')\n    pic.src = _PictureMaker_js__WEBPACK_IMPORTED_MODULE_1__.get('man')\n\n    disableEdit(true);\n}\n\n\n\nfunction makeStat(type, label) {\n    let item = d('section-item ' + type);\n    let labelDom = d('section-item-label')\n    let num = input(0, 30)\n    //num.disabled=true;\n    labelDom.innerText = label\n    item.appendChild(labelDom)\n\n    let center = d('centered')\n    center.appendChild(num)\n    item.appendChild(center)\n\n    let st = d('section-item-saving-throw')\n    let stCenter = d('centered')\n    let stn = document.createElement('input');\n    stn.className = 'number';\n    stn.value = 0\n    stn.type = 'number'\n    stn.min = 0;\n    stn.max = 30;\n    stCenter.appendChild(stn)\n    st.appendChild(stCenter)\n    item.appendChild(st)\n\n    let row = d('skill-link-row')\n    item.appendChild(row)\n\n    return item;\n}\n\nfunction makeSkill(id, type, label, icon) {\n    let item = d('skill-item');\n    item.classList.add(type)\n    item.type = type;\n\n\n    let iconDom = d('skill-item-icon');\n    iconDom.style.backgroundImage = \" url('./assets/\" + icon + \"')\";\n    let labelDom = d('skill-item-label');\n    labelDom.innerText = label\n\n    let numberDom = document.createElement('input')\n    numberDom.className = 'number'\n    numberDom.value = 0;\n    numberDom.type = 'number'\n    numberDom.min = -5\n    numberDom.max = 10\n\n    item.appendChild(iconDom);\n    item.appendChild(labelDom);\n    item.appendChild(numberDom);\n\n    item.skillId = id;\n    return item;\n}\n\nfunction makeInputNumber(parent) {\n    let input = d('editable-number');\n    let box = parent.getBoundingClientRect();\n    //offsetLeft\n    input.style.left = -24 + box.width / 2 + parent.offsetLeft + 'px'; //\n    input.style.top = -24 + box.height / 2 + parent.offsetTop + 'px';\n\n    input.addEventListener('touchstart', numberStartAdjust);\n    input.addEventListener('touchmove', numberMoveAdjust);\n    input.addEventListener('touchend', numberEndAdjust);\n    input.addEventListener('click', numberClick);\n    input.host = parent;\n    input.range = [parseInt(parent.value), parseInt(parent.min), parseInt(parent.max)]\n\n    parent.parentElement.appendChild(input)\n}\n\nfunction makeOther() {\n    let dom = d('feature')\n    let p = document.createElement('p')\n    p.setAttribute('contenteditable', true)\n    dom.appendChild(p)\n    return dom;\n}\n\nfunction makeTrait(obj) {\n    let dom = d('feature')\n    let name = d('feature-name')\n    let tag;\n\n    let p = document.createElement('p')\n\n\n    let check = document.createElement('input')\n    check.setAttribute('type', 'checkbox')\n\n    if (obj) {\n        check.checked = obj.spell\n        check.style.display = 'none'\n        name.innerText = obj.name;\n        p.innerText = obj.text\n        tag = [];\n        obj.tags.forEach(t => {\n            let dom = d('feature-tag')\n            dom.innerText = t\n            tag.push(dom)\n        })\n\n    } else {\n        tag = d('feature-tag')\n        name.setAttribute('contenteditable', true)\n        tag.setAttribute('contenteditable', true)\n        p.setAttribute('contenteditable', true)\n    }\n\n\n\n    dom.appendChild(name)\n    if (obj)\n        tag.forEach(t => { dom.appendChild(t) })\n    else\n        dom.appendChild(tag)\n\n    dom.appendChild(p)\n    dom.appendChild(check)\n    return dom;\n}\n\nfunction enableEdit() {\n    editing = true;\n    main.querySelectorAll('.section-group-mini').forEach(dom => {\n        dom.classList.remove('section-group-mini')\n    })\n    /*let skills = skillList.querySelectorAll('.skill-item')\n    skillList.appendChild(d('section-dashed-line'))\n    skills.forEach(skill => {\n        if(skill.style.display == 'none') {\n            skill.style.display = 'block'\n            //skill.remove();\n            skillList.appendChild(skill)\n        } else {\n            skill.classList.add('selected')\n        }\n        skill.addEventListener('click', skillSelect)\n    })*/\n\n    let numbers = main.querySelectorAll('.number')\n    numbers.forEach(number => {\n        number.disabled = false;\n        makeInputNumber(number)\n    })\n\n    let list = Object.values(main.querySelectorAll('p'))\n\n    //list = list.concat(Object.values(sectionTraits.querySelectorAll('.feature-name')))\n    //list = list.concat(Object.values(sectionTraits.querySelectorAll('.feature-tag')))\n    list.forEach(p => {\n        p.setAttribute('contenteditable', true)\n    })\n\n    let features = sectionTraits.querySelectorAll('.feature');\n    features.forEach(ft => {\n        let inp = ft.querySelector('input')\n        if (inp)\n            inp.style.display = 'initial'\n        let name = ft.querySelector('.feature-name')\n        let text = ft.querySelector('p')\n        if (name)\n            name.setAttribute('contenteditable', true)\n        if (text)\n            text.setAttribute('contenteditable', true)\n        let tags = ft.querySelectorAll('.feature-tag')\n        tags.forEach(tag => {\n            tag.setAttribute('contenteditable', true)\n        })\n    })\n\n    inspirationButton.style.display = 'initial';\n    let charName = sectionCharacter.querySelector('.section-banner')\n    charName.setAttribute('contenteditable', true)\n\n    main.querySelectorAll('.feature-add').forEach(adder => {\n        adder.style.display = 'block'\n    })\n    window.scrollTo(0, 0)\n\n}\n\nfunction disableEdit(initial) {\n    editing = false;\n    main.querySelectorAll('.section-group').forEach(dom => {\n        dom.classList.add('section-group-mini')\n    })\n    let tempObj = {};\n\n    \n    let doms = main.querySelectorAll('.editable-number')\n    doms.forEach(input => {\n        input.removeEventListener('touchstart', numberStartAdjust);\n        input.removeEventListener('touchmove', numberMoveAdjust);\n        input.removeEventListener('touchend', numberEndAdjust);\n        input.addEventListener('mouseup', numberClick);\n        input.remove();\n    })\n\n    let numbers = main.querySelectorAll('.number')\n    numbers.forEach(number => {\n        number.disabled = true;\n    })\n\n    tempObj.traits = [];\n\n    let features = sectionTraits.querySelectorAll('.feature');\n    features.forEach(ft => {\n        let obj = {};\n        let name = ft.querySelector('.feature-name')\n        let text = ft.querySelector('p')\n        if (!(name || text) || (name.innerText.length == 0 && text.innerText.length == 0)) {\n            ft.remove();\n        } else {\n            obj.name = name.innerText;\n            obj.text = text.innerText;\n            obj.tags = [];\n            let tags = ft.querySelectorAll('.feature-tag')\n            tags.forEach(tag => {\n                tag.setAttribute('contenteditable', undefined)\n                if (tag.innerText.length > 0) {\n                    obj.tags.push(tag.innerText)\n                } else\n                    tag.remove();\n            })\n            let inp = ft.querySelector('input')\n            if (inp) {\n                if (inp.checked) {\n                    obj.spell = true;\n                    ft.classList.remove('trait')\n                    ft.classList.add('spell')\n                } else {\n                    ft.classList.add('trait')\n                    ft.classList.remove('spell')\n                }\n                inp.style.display = 'none'\n            }\n            name.setAttribute('contenteditable', undefined)\n            text.setAttribute('contenteditable', undefined)\n            tempObj.traits.push(obj)\n        }\n    })\n\n    ///\n    tempObj.personality = [];\n    let pers = sectionPersonality.querySelectorAll('p');\n    pers.forEach(p => {\n        p.setAttribute('contenteditable', false)\n        tempObj.personality.push(p.innerText)\n    })\n    ///\n    tempObj.proficiencies = [];\n    let pros = sectionOther.querySelectorAll('p');\n    pros.forEach(p => {\n        if(p.innerText.length>0){\n            tempObj.proficiencies.push(p.innerText)\n            p.setAttribute('contenteditable', false)\n        }else\n        p.parentElement.remove();\n    })\n\n    ///\n    tempObj.abilities = []\n    let stats = sectionStats.querySelectorAll('.section-item')\n    stats.forEach(p => {\n        let nums = p.querySelectorAll('.number')\n        tempObj.abilities.push([nums[0].value, nums[1].value])\n    })\n    tempObj.skills = []\n    let skills = sectionStats.querySelectorAll('.skill-item')\n    skills.forEach(p => {\n        tempObj.skills.push(p.querySelector('input').value)\n    })\n\n    tempObj.status = []\n    let statuses = sectionStatus.querySelectorAll('.number')\n    statuses.forEach(n => {\n        tempObj.status.push(n.value)\n    })\n    let rows = sectionStatus.querySelectorAll('.saving-row')\n    let success = rows[0].querySelectorAll('input')\n    let fails = rows[1].querySelectorAll('input')\n    tempObj.successes = [success[0].checked, success[1].checked, success[2].checked]\n    tempObj.failures = [fails[0].checked, fails[1].checked, fails[2].checked]\n\n\n    tempObj.character = {}\n    let characterName = sectionCharacter.querySelector('.section-banner')\n    let characterType = sectionCharacter.querySelector('.character-class')\n    let proficiency = sectionCharacter.querySelector('.number')\n\n\n    if (_Drawer_js__WEBPACK_IMPORTED_MODULE_0__.getState() == 'character') {\n        inspirationButton.click();\n    }\n    inspirationButton.style.display = 'none';\n    let inspiration = sectionCharacter.querySelector('.character-inspiration').querySelector('img')\n    tempObj.character.name = characterName.innerText\n    characterName.setAttribute('contenteditable',false)\n    tempObj.character.type = characterType.innerText\n    characterType.setAttribute('contenteditable',false)\n\n    tempObj.character.proficiency = proficiency.value;\n    tempObj.character.inspiration = inspiration.src;\n\n\n    ///\n\n\n    main.querySelectorAll('.feature-add').forEach(adder => {\n        adder.style.display = 'none'\n    })\n    window.scrollTo(0, 0)\n    console.log(tempObj)\n    window.tempy = JSON.stringify(tempObj)\n    if (!initial) {\n\n        _Online_js__WEBPACK_IMPORTED_MODULE_2__.updateSheet(currentUser, tempObj)\n        updateSheet(currentUser, tempObj)\n    }\n    return tempObj;\n}\n\n\nfunction apply(obj,id) {\n    let features = sectionTraits.querySelectorAll('.feature');\n    features.forEach(ft => {\n        ft.remove();\n    })\n\n    ///\n    if (obj.traits) {\n        obj.traits.forEach(trait => {\n            sectionTraits.insertBefore(makeTrait(trait), traitsAdd)\n        })\n    }\n\n    ///\n    if (obj.personality) {\n        let pers = sectionPersonality.querySelectorAll('p');\n        pers.forEach((p, i) => {\n            p.innerText = obj.personality[i]\n        })\n    }\n    ///\n    let pros = sectionOther.querySelectorAll('p');\n    pros.forEach(p => {\n        p.remove();\n    })\n    if (obj.proficiencies) {\n\n\n        obj.proficiencies.forEach(p => {\n            let dom = d('feature');\n            dom.innerText = p;\n            sectionOther.insertBefore(dom, otherAdd)\n        })\n    }\n\n    ///\n    if (obj.abilities) {\n        let stats = sectionStats.querySelectorAll('.section-item')\n        stats.forEach((p, i) => {\n            let nums = p.querySelectorAll('.number')\n            nums[0].value = obj.abilities[i][0] ? obj.abilities[i][0] : 0\n            nums[1].value = obj.abilities[i][1] ? obj.abilities[i][1] : 0\n        })\n    }\n\n    if (obj.skills) {\n        let skills = sectionStats.querySelectorAll('.skill-item')\n        skills.forEach((p, i) => {\n            p.querySelector('input').value = obj.skills[i]\n        })\n    }\n\n    if (obj.character) {\n        let characterName = sectionCharacter.querySelector('.section-banner')\n        let characterType = sectionCharacter.querySelector('.character-class')\n        let proficiency = sectionCharacter.querySelector('.number')\n\n        let inspiration = sectionCharacter.querySelector('.character-inspiration').querySelector('img')\n        characterName.innerText = obj.character.name\n        if(id!=undefined){\n             let user=_PlayerManager_js__WEBPACK_IMPORTED_MODULE_3__.getUser(id)\n            if(user)\n                characterName.style.backgroundColor=user.color;\n        }\n       \n        characterType.innerText = obj.character.type\n        if (obj.character.proficiency)\n            proficiency.value = obj.character.proficiency\n        inspiration.src = obj.character.inspiration;\n    }\n    if (obj.status) {\n        let statuses = sectionStatus.querySelectorAll('.number')\n        statuses.forEach((n, i) => {\n            n.value = obj.status[i] ? obj.status[i] : 0\n        })\n    }\n    if (obj.successes && obj.failures) {\n        let rows = sectionStatus.querySelectorAll('.saving-row')\n        let success = rows[0].querySelectorAll('input')\n        let fails = rows[1].querySelectorAll('input')\n        for (let i = 0; i < 3; i++) {\n            success[i].checked = obj.successes[i]\n            fails[i].checked = obj.failures[i]\n        }\n    }\n    window.scrollTo(0, 0)\n}\n\nvar simpleAdjuster\n\nfunction createSimpleAdjuster(parent) {\n    let row = d('floater-number-input')\n    let down = d('floater-arrow');\n    let up = d('floater-arrow');\n\n    up.addEventListener('click', ev => {\n        up.style.animationName = ''\n        void up.offsetWidth;\n        up.style.animationName = 'blinker';\n        adjustHost.range[0] = Math.min(adjustHost.range[2], ++adjustHost.range[0])\n        adjustTarget.value = adjustHost.range[0]\n    })\n    down.addEventListener('click', ev => {\n        down.style.animationName = ''\n        void down.offsetWidth;\n        down.style.animationName = 'blinker';\n        adjustHost.range[0] = Math.max(adjustHost.range[1], --adjustHost.range[0])\n        adjustTarget.value = adjustHost.range[0]\n    })\n    row.appendChild(up);\n    row.appendChild(down);\n    row.style.display = 'none';\n    simpleAdjuster = row;\n    parent.appendChild(simpleAdjuster)\n}\n\nfunction moveSimpleAdjuster(target) {\n    simpleAdjuster.style.display = 'block';\n    let box = target.getBoundingClientRect();\n    simpleAdjuster.style.left = -48 + box.left + 'px'\n    simpleAdjuster.style.top = box.top + 'px'\n}\n\n\nfunction sliderButton(dom) {\n    dom.addEventListener('touchmove', ev => {\n        let v = ev.touches[0].clientX - ev.target.getBoundingClientRect().left;\n        v = Math.max(0, Math.min(v, 96));\n        console.log(v)\n        ev.target.style.transform = 'translate(' + v + 'px)'\n    })\n    /**/\n}\n\nvar adjustTarget;\nvar adjustHost;\nvar movingAdjust = { x: 0, y: 0 }\n\nvar touchTimeout = false;\n\nfunction numberStartAdjust(ev) {\n    adjustHost = ev.target;\n    adjustTarget = ev.target.host\n    simpleAdjuster.style.display = 'none';\n    movingAdjust = { x: ev.touches[0].clientX, y: ev.touches[0].clientY };\n    ev.target.className = 'floater-arrow'\n    ev.target.range[0] = parseInt(adjustTarget.value);\n    setTimeout(function() {\n        touchTimeout = true\n    }, 200)\n    touchTimeout = false;\n\n    //console.log('hi')\n}\n\nfunction numberMoveAdjust(ev) {\n    if (movingAdjust) {\n        let flip = true;\n        //let box=ev.target.getBoundingClientRect()\n        let v = ev.touches[0].clientX - (movingAdjust.x);\n        let c = 0\n        if (v > 24 || v < -24) {\n            v = Math.max(-96, Math.min(v, 96));\n            if (v < -24) {\n                flip = false;\n                c = (ev.target.range[1] - ev.target.range[0]) * ((Math.abs(v) - 24) / 72)\n            } else {\n                c = (ev.target.range[2] - ev.target.range[0]) * ((v - 24) / 72)\n            }\n        } else\n            v = 0;\n        console.log(v)\n\n        adjustTarget.value = Math.round(ev.target.range[0] + c);\n        ev.target.style.transform = 'translate(' + v + 'px)' + (flip ? ' rotate(180deg)' : '');\n    }\n}\n\nfunction numberEndAdjust(ev) {\n    movingAdjust = false;\n    ev.target.className = 'editable-number'\n    ev.target.style.transform = 'translate(0)';\n    if (!touchTimeout) {\n        moveSimpleAdjuster(ev.target)\n    }\n}\n\nfunction numberClick(ev) {\n    adjustHost = ev.target;\n    adjustTarget = ev.target.host\n    ev.target.host.focus();\n}\n\nfunction skillSelect(ev) {\n    if (ev.target.classList.contains('skill-item')) {\n        if (ev.target.classList.contains('selected')) {\n            ev.target.classList.remove('selected')\n            ev.target.parentElement.appendChild(ev.target)\n        } else {\n            ev.target.classList.add('selected')\n            let parent = ev.target.parentElement;\n            let line = parent.querySelector('.section-dashed-line')\n            parent.insertBefore(ev.target, line)\n        }\n\n    }\n}\n\nfunction d(c) {\n    let dom = document.createElement('div')\n    if (c)\n        dom.className = c;\n    return dom\n}\n\nfunction input(start, end) {\n    let num = document.createElement('input');\n    num.className = 'number';\n    num.value = 0\n    num.type = 'number'\n    num.min = start;\n    num.max = end;\n    return num;\n}\n\nfunction makeStatus() {\n    let status = main.querySelector('.section-status');\n    let armor = d('status-armor')\n    let initiative = d('status-initiative')\n    let speed = d('status-speed')\n    let speedNumber = input(0, 10);\n    let armorNumber = input(0, 10);\n    let initiNumber = input(0, 10);\n\n    speedNumber.innerText = 10;\n    initiNumber.innerText = 10;\n    armorNumber.innerText = 10;\n    armor.appendChild(armorNumber)\n    speed.appendChild(speedNumber)\n    initiative.appendChild(initiNumber)\n\n\n    let row = main.querySelector('.status-row')\n    row.appendChild(armor);\n    row.appendChild(initiative);\n    row.appendChild(speed);\n\n\n    let hitpoints = sectionStatus.querySelector('.status-hitpoints')\n    let num1 = input(0, 30)\n    let num2 = input(0, 30)\n    hitpoints.appendChild(num1)\n    hitpoints.appendChild(num2)\n    //let hitDice=d('status-dice')\n    //status.appendChild(hitDice);\n}\n\nfunction toggleMini(ev) {\n    if (editing)\n        return;\n    let doms = main.querySelectorAll('.section-group')\n    doms.forEach(obj => {\n        if (ev.target != obj)\n            obj.classList.add('section-group-mini')\n    })\n    if (ev) {\n\n        ev.target.classList.toggle('section-group-mini')\n    }\n}\n\n\n/******************/\nfunction applyUsers(data) {\n    sheets = data\n\n    let nav = main.querySelector('.sheet-nav');\n    let ownDom\n    _PlayerManager_js__WEBPACK_IMPORTED_MODULE_3__.users.forEach(user => {\n        let dom = d('sheet-user')\n        dom.style.backgroundColor = user.color;\n        let span = document.createElement('span')\n        span.innerText = user.username;\n        dom.appendChild(span)\n        dom.setAttribute('data', user.id)\n        dom.addEventListener('click', ev => {\n            let i = parseInt(ev.target.getAttribute('data'))\n            let sheet = sheets[i]\n            if (sheet) {\n\n            } else {\n                _UI_js__WEBPACK_IMPORTED_MODULE_4__.systemMessage('No Sheet available, loading empty', 'warn', false, 1500)\n                sheet = JSON.parse(emptySheet)\n            }\n            apply(sheet,i)\n            window.scrollTo(0, 0)\n            currentUser = i;\n            ev.target.style.animation = '';\n            void ev.target.offsetWidth;\n            ev.target.style.animation = 'jello 0.4s'\n\n            sheetDom.style.animation = '';\n            void sheetDom.offsetWidth;\n            sheetDom.style.animation = 'jello 0.4s'\n\n        })\n        if (user.id == _PlayerManager_js__WEBPACK_IMPORTED_MODULE_3__.getOwnPlayer().id) {\n            currentUser = user.id;\n            ownDom = dom\n            let sheet = sheets[user.id]\n            if (sheet)\n                apply(sheet,user.id)\n        } else\n            nav.appendChild(dom)\n    })\n    if (ownDom)\n        nav.insertBefore(ownDom, nav.firstChild)\n\n}\n\nfunction updateSheet(id, obj) {\n    sheets[id] = obj\n}\n/*\nfunction setSheets(obj){\n\n}*/\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction initSheet() {\n    var sheet = document.createElement('style')\n    sheet.innerHTML = `\n    [contenteditable=\"true\"]{\n        text-decoration: underline;\n    }\n    [contenteditable=\"true\"]:active,\n[contenteditable=\"true\"]:focus{\n  border:none;\n  outline:none;\n}\n\n[contenteditable=\"true\"]::before{\n    color:#5555;\ncontent:\"::\";\n}\n[contenteditable=\"true\"]::after{\n    color:#5555;\n    text-align: right;\ncontent:\"::\";\n}\n\n[type=\"checkbox\"]{\n    margin:0 !important;\n}\n\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n}\n\n/* Firefox */\ninput[type=number] {\n    -moz-appearance: textfield;\n}\n\n\n.sheet {\n    display: flex;\n    position: absolute;\n    border-radius: 16px;\n    background-color: white;\n    box-shadow: 6px 6px 1px #0005;\n    margin: 0 32px;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-items: flex-start;\n    align-content: flex-start;\n    overflow-y: auto;\n    max-height: calc(100% - 200px);\n    font-family: openBold;\n}\n\n.sub-section{\n    display: flex;\n    flex: 1;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-items: flex-start;\n    align-content: flex-start;\n}\n\n.section {\n    font-size: 16px;\n    width: 300px;\n    border-radius: 16px;\n    background-color: #F5F0E5;\n    box-shadow: 6px 6px 1px #0005;\n    flex: 3 1 1;\n    margin: 16px;\n    min-height: 96px;\n}\n.section *{\n    border-radius: 16px;\n}\n.section-banner{\n    text-align: center;\n    position: relative;\n    font-size: 24px;\n    background-color: inherit;\n    box-shadow: inherit;\n    border-radius: 4px;\n    padding: 8px;\n    letter-spacing: 6px;\n    width: 100%;\n    left: 50%;\n    border: 6px outset gray;\n    border-style: none groove none groove;\n    transform: translate(-50%);\n}\n\n.section-item {\n    height: 32px;\n    box-shadow: 6px 6px 1px #0005;\n    padding: 16px;\n    position: relative;\n    background-color: #83D943;\n}\n\n.number {\n    color: inherit;\n    font: inherit;\n    width: auto;\n    outline: none;\n    border: none;\n    background-color: transparent;\n    padding: 0;\n    text-align: center;\n    max-width: 64px;\n    font-size: 32px;\n    text-decoration: underline;\n}\n.number:disabled{\n    text-decoration: none;\n}\n.number:before{\n    content:'+';\n}\n\n\n\n\n.section-item-label {\n    position: absolute;\n    left: 16px;\n    top: 16px;\n}\n\n.STR {\n    background-color: #FF1B71 !important;\n    color: #8B1944 !important;\n}\n\n.DEX {\n    background-color: #8BFF36 !important;\n    color: #697F1E !important;\n}\n\n.CON {\n    background-color: #E9EE6A !important;\n    color: #76602C !important;\n}\n\n.INT {\n    background-color: #730FB2 !important;\n    color: #FDC3FF !important;\n}\n\n.WIS {\n    background-color: #FFA81F !important;\n    color: #FFFEB6 !important;\n}\n\n.CHR {\n    background-color: #FFA3A3 !important;\n    color: #8800AF !important;\n}\n\n.section-item-saving-throw {\n    border: white solid 3px;\n    width: 64px;\n    height: 64px;\n    position: absolute;\n    right: 0;\n    top: 0;\n    box-sizing: border-box;\n    border-radius: 16px;\n    font-size: 24px;\n    text-align: center;\n    line-height: 24px;\n}\n\n.section-item-saving-throw::before {\n    line-height: 102px;\n    top: -10px;\n    color: white;\n    font-size: 16px;\n    content: 'S.T.'\n}\n\n.section-group{\n    border-radius: 16px;\n    background-color: #5555;\n    margin: 16px;\n\n}\n .section-group *{\n    pointer-events: none;\n}\n\n\n.section-skills {}\n.section-stats {\n}\n.section-status *{\n    margin: 8px;\n}\n.section-character{\n\n}\n.section-traits{\n\n}\n.section-personality{\n\n}\n.section-other{\n\n}\n\n.skill-item {\n    border-radius: 16px;\n    height: 24px;\n    box-shadow: 6px 6px 1px #0005;\n    padding: 8px;\n    position: relative;\n    background-color: #8DA4EE;\n    margin: 16px;\n}\n.skill-item .number{\n    font-size: initial;\n}\n.skill-item-icon {\n    border-radius: 16px 8px 8px 16px;\n    width: 40px;\n    height: 40px;\n    position: absolute;\n    top: 0;\n    left: -1px;\n    background-color: white;\n    background-size: 40px;\n    background-image: url('./spell.png');\n}\n\n.skill-item .number {\n    position: absolute;\n    right: 32px;\n    top: -10px;\n}\n\n.skill-item-label {\n    display: inline-block;\n    margin-left: 48px;\n    content: 'hello'\n}\n\n/**********/\n.section-group-mini .skill-item{\n    width: 64px;\n    display: inline-block;\n    margin:4px;\n}\n.section-group-mini .skill-item-label{\n    display: none;\n}\n.section-group-mini .number{\n    right:0;\n}\n/*********/\n\n\n.feature{\n    max-height: 96px;\n    overflow-y: scroll;\n    background-color: #B6E0D1;\n   padding: 1px 16px 16px 16px;\n   margin: 8px;\n   color: gray;\n   position: relative;\n}\n.feature p{\n    margin: 0 16px 0 16px;\n    font-family: open;\n}\n\n.feature-name{\n    font-size: 22px;\n    display: inline-block;\n    font-style: italic;\n    color: black;\n    margin: 0 8px 0 8px;\n}\n.feature-middle{\n    font-size: 18px;\n    font-style: italic;\n    text-align: center;\n    color: gray;\n}\n\n\n.feature-tag{\n    border-radius: 16px;\n    background-color: lightgreen;\n    font-weight: bold;\n    display: inline-block;\n    padding: 0 16px 0 16px;\n    box-sizing: border-box;\n    border: solid white 2px;\n}\n.trait{\n    background-color: #8BBDEB\n}\n\n.spell{\n    background-color: #E3C5E3\n}\n\n.feature input{\n    position: absolute;\n    right: 12px;\n    top: 12px;\n\n}\n.feature input::after{\n    color: gray;\n    font-size: 10px;\n    content: 'spell?';\n    position: relative;\n    left: -28px;\n    top: -6px;\n}\n\n.feature-add,.lil-add{\n        position: relative;\n        width:36px;\n        height:36px;\n        background-color: #FAFABC;\n        border-radius: 28px;\n        margin:18px 0 18px 0;\n        cursor: pointer;\n        pointer-events: auto;\n        left: 50%;\n        transform: translate(-50%);\n\n        background-image: url(\"data:image/svg+xml,<svg width='36' height='36' stroke='black' stroke-width='6' stroke-linecap='round' viewBox='0 0 36 36' xmlns='http://www.w3.org/2000/svg'><path d='m9 18 h 18M18 9v18'/></svg>\");\n        \n    }\n    .lil-add{\n        width:24px;\n        height:24px;\n        background-size: cover;\n        left: auto;\n        transform: none;\n    }\n\n\n/************/\n\n.floater-number-input {\n    position: absolute;\n    width: 144px;\n    height: 48px;\n    /*border:black 3px solid;*/\n}\n\n.floater-arrow {\n    z-index: 99;\n    width: 48px;\n    height: 48px;\n    border-radius: 24px;\n    background-color: #5558;\n    position: absolute;\n    left: 0;\n    top: 0;\n    display: inline-block;\n    animation: 0.3s;\n    background-repeat: no-repeat;\n    background-size: 32px;\n    background-position: center center;\n\n\n    background-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M14.71 6.71c-.39-.39-1.02-.39-1.41 0L8.71 11.3c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L10.83 12l3.88-3.88c.39-.39.38-1.03 0-1.41z\"/></svg>');\n\n}\n\n.floater-number-input .floater-arrow:nth-child(1) {\n    left: 96px;\n    transform: rotate(180deg);\n}\n\n/*.floater-arrow::after{\n            content: '';\n            background-color: red;\n            width: 16px;\n            height: 16px;\n            display: block;\n            position: absolute;\n            left: 48px;\n            top: 50%;\n            border-radius: 8px;\n            transform: translate(0,-50%);\n        }\n\n        .floater-arrow::before{\n            width: 48px;\n            height: 2px;\n            border-radius: 8px;\n            content: '';\n            display: block;\n            background-color: green;\n            position: absolute;\n            left: 24px;\n            top: 50%;\n            transform: translate(0,-50%);\n        }*/\n\n@keyframes blinker {\n    0% {\n        background-color: #fff6;\n    }\n\n    50% {\n        background-color: #0004;\n    }\n\n    100% {}\n}\n\n.editable-number {\n    width: 48px;\n    height: 48px;\n    box-sizing: border-box;\n    border-radius: 24px;\n    border: #fff7 dotted 3px;\n    display: block;\n    position: absolute;\n    left: 0;\n    top: 0;\n\n    overflow: visible;\n    transition: 0.1s transform;\n}\n\n.editable-number::before {\n    content: '';\n    width: 24px;\n    height: 24px;\n    display: block;\n    position: absolute;\n    left: 32px;\n    top: -8px;\n\n    background-repeat: no-repeat;\n    background-size: 24px;\n    background-position: center center;\n    background-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1c-.1.1-.15.22-.15.36zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"/></svg>');\n}\n\n\n.selected {\n\n    box-shadow: 12px 6px 0px white;\n}\n\n.selected::after {\n    content: '';\n    right: 0px;\n    top: 8px;\n    width: 24px;\n    height: 24px;\n    position: absolute;\n    display: block;\n    background-position: center center;\n    background-size: 24px;\n    background-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" fill=\"white\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n}\n\n.section-dashed-line {\n    height: 0;\n    margin: 16px;\n    border-bottom: 3px dashed black;\n    border-radius:0;\n}\n\n.centered {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n}\n\n.status-hitpoints{\n    height: 64px;\n    background-color: #EE9A9A;\n    background-position: left center;\n    background-repeat: no-repeat;\n    background-size: 64px;\n    background-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"white\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M13.35 20.13c-.76.69-1.93.69-2.69-.01l-.11-.1C5.3 15.27 1.87 12.16 2 8.28c.06-1.7.93-3.33 2.34-4.29 2.64-1.8 5.9-.96 7.66 1.1 1.76-2.06 5.02-2.91 7.66-1.1 1.41.96 2.28 2.59 2.34 4.29.14 3.88-3.3 6.99-8.55 11.76l-.1.09z\"/></svg>');\n}\n\n.status-initiative,.status-armor,.status-speed{\n    display: inline-block;\n    width:64px;\n    height: 64px;\n    background-position: center center;\n    background-repeat: no-repeat;\n}\n.status-initiative .number,.status-armor .number,.status-speed .number{\n    color: white;\n    font-size: 24px;\n    position: relative;\n}\n.status-initiative{\n    background-size: 82px;\n    background-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"rgb(170, 68, 0)\" width=\"24\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M12 17.27l5.17 3.12c.38.23.85-.11.75-.54l-1.37-5.88 4.56-3.95c.33-.29.16-.84-.29-.88l-6.01-.51-2.35-5.54c-.17-.41-.75-.41-.92 0L9.19 8.63l-6.01.51c-.44.04-.62.59-.28.88l4.56 3.95-1.37 5.88c-.1.43.37.77.75.54L12 17.27z\"/></svg>');\n}\n.status-armor{\n    background-size: 64px;\n    background-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" enable-background=\"new 0 0 24 24\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" fill=\"rgb(35, 79, 35)\"><g><rect fill=\"none\" height=\"24\" width=\"24\"/><path d=\"M12,1L3,5v6c0,5.55,3.84,10.74,9,12c5.16-1.26,9-6.45,9-12V5L12,1L12,1z\"/></g></svg>'); /*fill=\"#224E22\"     rgb(35, 79, 35)*/\n}\n.status-speed{\n    background-size: 86px;\n    background-position: center center;\n    background-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" fill=\"rgb(30, 70, 178)\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M3.5 18.99l11 .01c.67 0 1.27-.33 1.63-.84L20.5 12l-4.37-6.16c-.36-.51-.96-.84-1.63-.84l-11 .01L8.34 12 3.5 18.99z\"/></svg>');\n}\n\n.status-dice{\n    background-color: #8CEB8C;\n    height: 64px;\n    background-size: 64px;\n    background-position: center center;\n    background-position: left center;\n    background-repeat: no-repeat;\n    background-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" fill=\"white\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M19 3h-4.18H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-6 15h-2v-2h2v2zm0-5c0 .55-.45 1-1 1s-1-.45-1-1V9c0-.55.45-1 1-1s1 .45 1 1v4zm-1-8c-.55\"/></svg>');\n}\n.saving-row{\n\n    position: relative;\n    text-align: right;\n}\n\n/*************/\n.character-picture{\n    width:212px;\n    height: 256px;\n    background-color: #17D1FF;\n    display: inline-block;\n}\n.character-column{\n    width:64px;\n    display: inline-block;\n    position: absolute;\n\n}\n\n.character-proficiency{\n    display: inline-block;\n    width:64px;\n    height: 64px;\n    position: relative;\n    left: 0;\n    top: 0;\n    background-color: #ECD4EC;\n}\n.character-inspiration{\n    display: inline-block;\n    width:64px;\n    height: 64px;\n    position: relative;\n    right: 0;\n    top: 0;\n    background-color: #5555;\n}\n.character-inspiration img{\n    width: 100%;\n    height: 100%;\n}\n.character-class{\n    display: block;\n    margin: 6px;\n    position: relative;\n    text-align: center;\n    font-size: 18px;\n    color: gray;\n}\n/***********************/\n\n.sheet-nav{\n    position: relative;\n    height: 96px;\n    overflow-x: auto;\n    overflow-y: hidden;\n    width: calc(100% - 88px);\n    transform: translate(-50%);\n    left: 50%;\n    white-space: nowrap;\n}\n.sheet-user{\n    position: relative;\n    display: inline-block;\n    border-radius: 28px;\n    background-color: green;\n    height: 56px;\n    width: 56px;\n    top: 0;\n    margin: 8px 8px 0 8px;\n}\n.sheet-user span{\n    border-radius: 16px;\n    position: absolute;\n    bottom: -10px;\n    left: 50%;\n    transform: translate(-50%);\n    background-color: #fff5;\n    pointer-events: none;\n}\n\n.sheet-selected::before{\n    position: absolute;\n    display: block;\n    background-color: white;\n    top: -10px;\n    height: 112px;\n    width: 64px;\n    border-radius: 16px;\n    content: '';\n    z-index: -1;\n    left: 50%;\n    transform: translate(-50%);\n}\n\n#sheet-edit-button{\n     position: fixed;\n        width:56px;\n        height:56px;\n        background-color: #FAFABC;\n        border-radius: 28px;\n        cursor: pointer;\n        pointer-events: auto;\n        right: 48px;\n        bottom: 108px;\n        background-size: 48px;\n        background-position: center center;\n        box-shadow: 6px 6px 1px #0005;\n    background-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1c-.1.1-.15.22-.15.36zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"/></svg>');\n}\n#sheet-edit-button.toggled{\n    background-color: #16FF16;\n\n    background-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M9 16.17L5.53 12.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L9 16.17z\"/></svg>');\n}`\n    document.body.appendChild(sheet)\n\n}\n\n\n\n\n//# sourceURL=webpack://buup/./src/Character.js?");

/***/ }),

/***/ "./src/Chat.js":
/*!*********************!*\
  !*** ./src/Chat.js ***!
  \*********************/
/*! namespace exports */
/*! export addBubble [provided] [no usage info] [missing usage info prevents renaming] */
/*! export closeChat [provided] [no usage info] [missing usage info prevents renaming] */
/*! export hook [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export lastChats [provided] [no usage info] [missing usage info prevents renaming] */
/*! export makeDivider [provided] [no usage info] [missing usage info prevents renaming] */
/*! export makeEpic [provided] [no usage info] [missing usage info prevents renaming] */
/*! export openChat [provided] [no usage info] [missing usage info prevents renaming] */
/*! export popBubble [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setSize [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"openChat\": () => /* binding */ openChat,\n/* harmony export */   \"closeChat\": () => /* binding */ closeChat,\n/* harmony export */   \"hook\": () => /* binding */ hook,\n/* harmony export */   \"setSize\": () => /* binding */ setSize,\n/* harmony export */   \"lastChats\": () => /* binding */ lastChats,\n/* harmony export */   \"makeDivider\": () => /* binding */ makeDivider,\n/* harmony export */   \"makeEpic\": () => /* binding */ makeEpic,\n/* harmony export */   \"addBubble\": () => /* binding */ addBubble,\n/* harmony export */   \"popBubble\": () => /* binding */ popBubble\n/* harmony export */ });\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _Control_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Control.js */ \"./src/Control.js\");\n/* harmony import */ var _Online_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Online.js */ \"./src/Online.js\");\n/* harmony import */ var _BarUI_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./BarUI.js */ \"./src/BarUI.js\");\n/* harmony import */ var _Helper_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Helper.js */ \"./src/Helper.js\");\n/* harmony import */ var _PlayerManager_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PlayerManager.js */ \"./src/PlayerManager.js\");\n/* harmony import */ var _Drawer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Drawer.js */ \"./src/Drawer.js\");\n/* harmony import */ var _UI_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./UI.js */ \"./src/UI.js\");\n\n\n\n\n\n\n \n\n\nvar chatPane;\n//var chatBlock;\nvar chatInput;\nvar chatBottom;\nvar projection;\n\nfunction init(){\n\tlet mainDom=document.querySelector('#chatCard');\n\tprojection=document.querySelector('#projection');\n\t//let chatButton=document.createElement('div');\n\t//chatButton.classList.add('chatButton','menuHidable');\n\n\t//chatBlock=document.createElement('div');\n\t//chatBlock.classList.add('chatBlock');\n\n\tchatPane=document.createElement('div');\n\tchatPane.classList.add('chat-pane');\n\n\t//mainDom.appendChild(chatButton);\n\tmainDom.appendChild(chatPane);\n\t//mainDom.appendChild(chatBlock);\n\t\n\n\n\tchatBottom=document.createElement('div');\n\tchatBottom.classList.add('chat-bottom');\n\n\tchatInput=document.createElement('input');\n\tlet color=\"0xffff55\";//World.getOwnPlayer().color\n\tcolor='#'+color.substring(2,color.length);\n\tchatInput.style.border=color+\" 6px solid\"\n\tchatBottom.appendChild(chatInput);\n\n\n\t_Drawer_js__WEBPACK_IMPORTED_MODULE_6__.makeButton(chatBottom,'chat')\n\n\tlet sendButton=document.createElement('div')\n\tsendButton.className='chat-send-button'\n\tsendButton.addEventListener('click',submit)\n\tchatBottom.appendChild(sendButton)\n\t\n\n\t//let toggle=document.createElement('div');\n\t//toggle.classList.add('chatToggle');\n\t//bottom.appendChild(toggle);\n\n\tmainDom.appendChild(chatBottom)\n\n\t//chatBlock.style.left='100%';\n\n\t\n/*\n\tchatButton.addEventListener('click',function(ev){\n\t\tControl.addConfetti(window.innerWidth-30,window.innerHeight-30,225);\n\t\topenChat();\n\t})*/\n/*\n\tchatPane.addEventListener('click',function(ev){\n\t\tcloseChat();\n\t})\n*/\n\tchatInput.addEventListener('keyup',function(ev){\n\n\t\tif(ev.which==13){\n\t\t\tif(chatInput.value.length>0 || _Drawer_js__WEBPACK_IMPORTED_MODULE_6__.getState()=='chat'){\n\t\t\t\t//World.socket.emit('chat',World.getOwnPlayer().id,chatInput.value);\n\t\t\t\tsubmit();\n\t\t\t}else{\n\t\t\t\tsetTimeout(closeChat,20);\n\t\t\t}\n\t\t}else if(ev.which==27){\n\t\t\tcloseChat();\n\t\t}\n\t});\n\t/*toggle.addEventListener('click',function(ev){\n\t\tif(toggle.classList.contains('chatToggle')){\n\t\t\ttoggle.classList.remove('chatToggle');\n\t\t\ttoggle.classList.add('mailToggle');\n\t\t}else{\n\t\t\ttoggle.classList.remove('mailToggle');\n\t\t\ttoggle.classList.add('chatToggle');\n\t\t}\n\n\t})*/\n\n\t//s\n    //World.socket.on('chat', chatHook);\n\n    /////LETTERS\n\n\n    let letterPane=document.createElement('div');\n    letterPane.classList.add('letterPane');\n\n    //setTimeout(()=>{Mail.init()},800);\n    \n}\nvar pastDom=null;\nvar pastPlayerId=-1;\nvar lastDom=null;\nvar lastPlayerId=-1\nfunction addBubble(s,player,model){\n\t\n\tlet chatBubble=document.createElement('p');\n\tlet color=player.color;\n\t//chatBubble.style.border=color+' solid 6px'\n\tchatBubble.style.backgroundColor=color;\n\n\tlet bool = _Helper_js__WEBPACK_IMPORTED_MODULE_4__.testBW(_Helper_js__WEBPACK_IMPORTED_MODULE_4__.hexToRGB(color))\n\n    chatBubble.style.color = bool ? '#000000' : '#FFFFFF';\n    chatBubble.style.textShadow = '1px 1px 2px ' + (bool ? '#FFFFFF' : '#000000');\n\n    let imageIndex=s.indexOf('data:image')\n    if(imageIndex>-1){\n    \tlet lastIndex=s.indexOf('#',imageIndex);\n    \tif(lastIndex>-1){\n    \t\tlet imgString=s.substring(imageIndex,lastIndex)\n    \t\tconsole.log(imgString)\n    \t\tlet img=new Image();\n    \t\timg.className='stretch-image'\n    \t\timg.src=imgString;\n    \t\tchatBubble.appendChild(img)\n    \t\ts=s.substring(lastIndex+1)\n    \t}\n    }\n    \n\n\t/*let stt=s.split('');\n\tstt.forEach((c,i)=>{\n\t\tlet sp=document.createElement('span');\n\t\tsp.style.animationDelay=(i*0.03 +Math.random()/10)+'s';\n\t\tsp.innerHTML=c;\n\t\tif(c==' ')\n\t\t\tsp.innerHTML='&nbsp'\n\t\tchatBubble.appendChild(sp)\n\t})\n\tsetTimeout(function(){\n\t\tchatBubble.innerHTML=s;\n\t},(s.length*0.03+2)*1000)*/\n\tchatBubble.innerHTML+=s;\n\n\tif(model){\n\t\tchatBubble.classList.add('chat-world-bubble');\n\t\t\n\t\t\n\t\tprojection.appendChild(chatBubble);\n\t\tlet anchor=_Render_js__WEBPACK_IMPORTED_MODULE_0__.addAnchor(model,chatBubble);\n\t\t_UI_js__WEBPACK_IMPORTED_MODULE_7__.addConfetti(anchor.x,anchor.y,Math.floor(Math.random()*360));\n\t\t_UI_js__WEBPACK_IMPORTED_MODULE_7__.addConfetti(anchor.x,anchor.y,Math.floor(Math.random()*360));\n\t\t//Render.schedule(player,\"shake\")\n\t\treturn anchor;\n\n\t}else{\n\t\tlet chatRow=document.createElement('div');\n\t\tchatRow.classList.add('chat-row')\n\n\t\tif(player.id==_PlayerManager_js__WEBPACK_IMPORTED_MODULE_5__.getOwnPlayer().id)\n\t\t\tchatRow.classList.add('chat-right')\n\n\t\tchatBubble.classList.add('chat-bubble');\n\t\tif(lastPlayerId>=0 && lastPlayerId==player.id){\n\t\t\tif(pastPlayerId==player.id){\n\t\t\t\tlastDom.classList.remove(\"chat-bubble-footer\");\n\t\t\t\tlastDom.classList.add(\"chat-bubble-body\");\n\t\t\t}else{\n\t\t\t\tlastDom.classList.add(\"chat-bubble-header\");\n\t\t\t}\n\t\t\t//lastDom.classList.remove(\"chatBubbleHeader\",\"chatBubbleBody\")\n\t\t\t\n\t\t\tchatBubble.classList.add(\"chat-bubble-footer\");\n\t\t}else{\n\t\t\tlet nameTag=document.createElement('p');\n\t\t\tnameTag.classList.add('chat-nametag');\n\t\t\tnameTag.innerHTML=player.username;\n\t\t\tlet tagRow=document.createElement('div');\n\t\t\tif(player.id==_PlayerManager_js__WEBPACK_IMPORTED_MODULE_5__.getOwnPlayer().id)\n\t\t\t\ttagRow.style.textAlign='right'\n\t\t\t//nameTag.style.background=color;\n\t\t\ttagRow.appendChild(nameTag);\n\t\t\tchatPane.appendChild(tagRow);\n\t\t}\n\n\t\tpastDom=lastDom;\n\t\tpastPlayerId=lastPlayerId;\n\t\tlastDom=chatBubble;\n\t\tlastPlayerId=player.id;\n\n\t\t\n\t\tchatRow.appendChild(chatBubble)\n\t\tchatPane.appendChild(chatRow)\n\t\tchatPane.scrollTop = chatPane.scrollHeight;\n\n\t\treturn chatBubble;\n\t}\n\t\n}\nfunction submit(){\n\tif(chatInput.value.length>0 || _Drawer_js__WEBPACK_IMPORTED_MODULE_6__.getState()=='chat'){ //redundant\n\t\tlet message='';\n\t\tif(_Drawer_js__WEBPACK_IMPORTED_MODULE_6__.getState()=='chat'){\n\t\t\tmessage+=_Drawer_js__WEBPACK_IMPORTED_MODULE_6__.getData()+'#'\n\t\t\t_Drawer_js__WEBPACK_IMPORTED_MODULE_6__.close();\n\t\t}\n\t\tmessage+=chatInput.value;\n\t\t_Online_js__WEBPACK_IMPORTED_MODULE_2__.message(message)\n\t\tchatInput.value=''\n\t}\n}\nfunction hook(id,message){\n\tlet player=_PlayerManager_js__WEBPACK_IMPORTED_MODULE_5__.getUser(id)//World.getPlayer(id);\n\tlet color='black'\n\t/*if(player){ //TODO\n\t\tcolor=player.color;\n\t\tcolor='#'+color.substring(2,color.length);\n\n\t\t\n\n\t\t\n\t\tlet anchor=addBubble(message,player,color,player.model);\n\t\tsetTimeout(function(){\n\t\t\tanchor.bubble.remove();\n\t\t\tanchor.bubble=null;\n\t\t},8000)\n\t}*/\n\t//if(!Control.isMenuLocked())\n\t//\tControl.addConfetti(window.innerWidth-30,window.innerHeight-30,225);\n\tif(!player)\n\t\tplayer={username: 'Unknown',id:-1,color:'black'}\n\taddBubble(message,player);\n\t_BarUI_js__WEBPACK_IMPORTED_MODULE_3__.setNotifier(2,1)\n\t//makeEpic('test')\n}\nfunction lastChats(chats){\n\tchats.forEach(chat=>{\n\t\thook(chat[0],chat[1])\n\t});\n\tmakeDivider('Last 10 messages')\n}\nfunction openChat(){\n\tif(!_Control_js__WEBPACK_IMPORTED_MODULE_1__.isMenuLocked()){\n\t\t//chatBlock.style.left='0%';\n\t\t//addBubble('test text for great prosperity','red');\n\t\t//chatInput.focus();\n\t\t//Control.lockMenu(true);\n\t}\n\tchatInput.focus();\n}\nfunction closeChat(){\n\t//chatBlock.style.left='100%';\n\tchatInput.blur();\n\t_BarUI_js__WEBPACK_IMPORTED_MODULE_3__.closeApp();\n\t_Control_js__WEBPACK_IMPORTED_MODULE_1__.lockMenu(false);\n}\n\nfunction makeDivider(message){\n\tlet dom=document.createElement('div');\n\tdom.className='chat-divider'\n\tlet p=document.createElement('p');\n\tp.innerText=message\n\tdom.appendChild(p)\n\tchatPane.appendChild(dom)\n}\nfunction makeEpic(message){\n\tlet dom=document.createElement('div');\n\tdom.className='chat-epic'\n\tlet inner=document.createElement('div');\n\tinner.className='chat-epic-inner'\n\n\tlet p=document.createElement('p');\n\tp.innerHTML=message.italics();\n\tinner.appendChild(p)\n\tdom.appendChild(inner)\n\tchatPane.appendChild(dom)\n}\nfunction setSize(bool){\n\tif(!chatPane || !chatBottom)\n\t\treturn \n\tif(bool){\n\t\tchatPane.style.height='calc(100vh - 100px)';\n\t\tchatBottom.style.bottom='100px'\n\t}else{\n\t\tchatPane.style.height='calc(100vh - 64px)';\n\t\tchatBottom.style.bottom='0px'\n\t}\n}\nfunction popBubble(anchor){\n\tanchor.bubble.remove();\n\tanchor.bubble=null;\n}\nfunction updateBubble(anchor){\n\tanchor.bubble\n}\n\n\n\n\n//# sourceURL=webpack://buup/./src/Chat.js?");

/***/ }),

/***/ "./src/Control.js":
/*!************************!*\
  !*** ./src/Control.js ***!
  \************************/
/*! namespace exports */
/*! export animate [provided] [no usage info] [missing usage info prevents renaming] */
/*! export cancelCarry [provided] [no usage info] [missing usage info prevents renaming] */
/*! export defineOrbital [provided] [no usage info] [missing usage info prevents renaming] */
/*! export down [provided] [no usage info] [missing usage info prevents renaming] */
/*! export enterVR [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getAngle [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getState [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getVRPointer [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export isMenuLocked [provided] [no usage info] [missing usage info prevents renaming] */
/*! export isVR [provided] [no usage info] [missing usage info prevents renaming] */
/*! export lockMenu [provided] [no usage info] [missing usage info prevents renaming] */
/*! export pos [provided] [no usage info] [missing usage info prevents renaming] */
/*! export primaryTouchPan [provided] [no usage info] [missing usage info prevents renaming] */
/*! export screenX [provided] [no usage info] [missing usage info prevents renaming] */
/*! export screenY [provided] [no usage info] [missing usage info prevents renaming] */
/*! export secondaryTouchPan [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setRenderer [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setState [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setVector [provided] [no usage info] [missing usage info prevents renaming] */
/*! export x [provided] [no usage info] [missing usage info prevents renaming] */
/*! export y [provided] [no usage info] [missing usage info prevents renaming] */
/*! export z [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"x\": () => /* binding */ x,\n/* harmony export */   \"y\": () => /* binding */ y,\n/* harmony export */   \"z\": () => /* binding */ z,\n/* harmony export */   \"pos\": () => /* binding */ pos,\n/* harmony export */   \"down\": () => /* binding */ down,\n/* harmony export */   \"animate\": () => /* binding */ animate,\n/* harmony export */   \"setVector\": () => /* binding */ setVector,\n/* harmony export */   \"screenX\": () => /* binding */ screenX,\n/* harmony export */   \"screenY\": () => /* binding */ screenY,\n/* harmony export */   \"defineOrbital\": () => /* binding */ defineOrbital,\n/* harmony export */   \"isMenuLocked\": () => /* binding */ isMenuLocked,\n/* harmony export */   \"lockMenu\": () => /* binding */ lockMenu,\n/* harmony export */   \"getAngle\": () => /* binding */ getAngle,\n/* harmony export */   \"setRenderer\": () => /* binding */ setRenderer,\n/* harmony export */   \"enterVR\": () => /* binding */ enterVR,\n/* harmony export */   \"isVR\": () => /* binding */ isVR,\n/* harmony export */   \"getVRPointer\": () => /* binding */ getVRPointer,\n/* harmony export */   \"secondaryTouchPan\": () => /* binding */ secondaryTouchPan,\n/* harmony export */   \"primaryTouchPan\": () => /* binding */ primaryTouchPan,\n/* harmony export */   \"cancelCarry\": () => /* binding */ cancelCarry,\n/* harmony export */   \"setState\": () => /* binding */ setState,\n/* harmony export */   \"getState\": () => /* binding */ getState\n/* harmony export */ });\n/* harmony import */ var _UI_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UI.js */ \"./src/UI.js\");\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _HexManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HexManager.js */ \"./src/HexManager.js\");\n/* harmony import */ var _Environment_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Environment.js */ \"./src/Environment.js\");\n/* harmony import */ var _Online_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Online.js */ \"./src/Online.js\");\n/* harmony import */ var _Physics_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Physics.js */ \"./src/Physics.js\");\n/* harmony import */ var _BarUI_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./BarUI.js */ \"./src/BarUI.js\");\n/* harmony import */ var _Helper_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Helper.js */ \"./src/Helper.js\");\n/* harmony import */ var _PlayerManager_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./PlayerManager.js */ \"./src/PlayerManager.js\");\n/* harmony import */ var _MakerMenu_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./MakerMenu.js */ \"./src/MakerMenu.js\");\n/* harmony import */ var _AssetManager_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./AssetManager.js */ \"./src/AssetManager.js\");\n/* harmony import */ var _Equipment_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Equipment.js */ \"./src/Equipment.js\");\n/* harmony import */ var _lib_OrbitControls_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./lib/OrbitControls.js */ \"./src/lib/OrbitControls.js\");\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n\n\n\n//import * as AssetManager from \"./AssetManager.js\";\n\n\n\n\n\n\n\n\n\n\n\n\n//import * as World from \"./World.js\";\n\n\n\n\nvar vrEnabled;\n\nvar touchCountDebounce = undefined;\nvar singleTouch = false;\n\nvar controllers\nvar orbital;\nvar mdown = false;\nvar mx = 0;\nvar my = 0;\nvar px = 0,\n    py = 0,\n    pz = 0;\nvar menuLocked = false;\n\nvar velArray = [];\nvar velocity = { x: 0, y: 0, z: 0 };\nvar posObject={x:0,y:0,z:0}\n\n\nvar state;\nvar heldPhys = 0;\nvar lastRot = 0;\n\n\nfunction init() {\n    window.posObject=posObject\n    //window.addEventListener('click',animationControl)\n    let target = document.querySelector('.canvasHolder');\n    window.addEventListener('pointermove', pointermove);\n    //target.addEventListener('mousedown', mousedown);\n    //target.addEventListener('mouseup', mouseup);\n\n    //target.addEventListener('touchstart', touchstart);\n    //target.addEventListener('touchend', touchend);\n    target.addEventListener('pointerdown', pointerdown);\n    window.addEventListener('pointerup', pointerup);\n\n    window.addEventListener('contextmenu', contextmenu);\n    window.addEventListener('keyup', keyup);\n    //initSettings();\n}\nvar zoomLevelToggle = false\n\nfunction setRenderer(renderer, renderDom, camera, VR) {\n    defineOrbital(renderDom, camera)\n    if(VR) {\n        defineVRControl(renderer)\n    }\n}\n\nfunction defineOrbital(renderDom, camera) {\n    orbital = new _lib_OrbitControls_js__WEBPACK_IMPORTED_MODULE_12__.OrbitControls(camera, renderDom);\n    orbital.callbackCounts = (count) => {\n        //HexManager.hexPick(px,py)\n\n\n        if(count == 1) {\n            touchCountDebounce = setTimeout(function() {\n                singleTouch = true;\n            }, 100)\n\n        } else if(touchCountDebounce) {\n            clearTimeout(touchCountDebounce);\n\n        }\n    }\n\n\n    orbital.mouseButtons = {\n        LEFT: undefined,\n        MIDDLE: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_13__.MOUSE.ROTATE,\n        RIGHT: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_13__.MOUSE.PAN //THREE.MOUSE.DOLLY\n    }\n\n\n    orbital.maxPolarAngle = 1.3;\n    orbital.isControl()\n    primaryTouchPan();\n\n    orbital.addEventListener('change', function(ev) {\n        var zoom = orbital.target.distanceTo(orbital.object.position);\n        //console.log(zoom)\n        //zoom 30 scale 0\n        //zoom 100 scale 1\n        //zoom 180 scale 2\n        //\n        if(zoom < 30) {\n            if(zoomLevelToggle != 0)\n                _Environment_js__WEBPACK_IMPORTED_MODULE_3__.changeShadowScale(0);\n            zoomLevelToggle = 0\n        } else if(zoom < 100) {\n            if(zoomLevelToggle != 1)\n                _Environment_js__WEBPACK_IMPORTED_MODULE_3__.changeShadowScale(1);\n            zoomLevelToggle = 1\n        } else if(zoom < 180) {\n            if(zoomLevelToggle != 2)\n                _Environment_js__WEBPACK_IMPORTED_MODULE_3__.changeShadowScale(2);\n            zoomLevelToggle = 2\n        } else {\n            if(zoomLevelToggle != 3)\n                _Environment_js__WEBPACK_IMPORTED_MODULE_3__.changeShadowScale(3);\n            zoomLevelToggle = 3\n        }\n        /*\n                if(zoom > 75) {\n                    if(zoomLevelToggle != 2) {\n                        zoomLevelToggle = 2;\n                        //Environment.changeShadowScale(1); //DEV\n                    }\n                } else {\n                    if(zoomLevelToggle != 1) {\n                        zoomLevelToggle = 1;\n                        //Environment.changeShadowScale(0);\n                    }\n                }*/\n        _Environment_js__WEBPACK_IMPORTED_MODULE_3__.setShadowPos(orbital.target)\n        _HexManager_js__WEBPACK_IMPORTED_MODULE_2__.setHexFocus(orbital.target)\n        //console.log('changed camera '+orbital.object.position.y)\n    })\n\n    orbital.addEventListener('end', function(ev) {\n        if(touchCountDebounce) {\n            clearTimeout(touchCountDebounce)\n        }\n        singleTouch = false;\n    });\n\n\n}\n\nfunction secondaryTouchPan() {\n    console.log('p2')\n\n    orbital.touches = {\n        ONE: 69, //PAN \n        TWO: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_13__.TOUCH.DOLLY_PAN //DOLLY_ROTATE\n        //THREE: THREE.TOUCH.DOLLY_PAN\n    }\n}\n\nfunction primaryTouchPan() {\n    console.log('p1')\n    orbital.touches = {\n        ONE: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_13__.TOUCH.PAN,\n        TWO: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_13__.TOUCH.DOLLY_ROTATE\n    }\n}\n\n\nfunction defineVRControl(renderer) {\n    /*\n        controllers=[];\n        window.controllers=controllers\n        for (let i = 0; i < 2; ++i) {\n          const controller = renderer.xr.getController(i);\n         \n\n          let model=AssetManager.make(\"shroom\")\n          model.scale.set(0.5,0.5,0.5)\n     \n          controller.add(model);\n          Render.addToCameraGroup(controller);\n         controllers.push({controller: controller, model: model});\n        }*/\n\n\n}\nvar buttonBobs = [] //DEV\nvar vrSession\n\nfunction enterVR() {\n    /*if(controllers && controllers.length){\n        vrSession =Render.getRenderer().xr.getSession();\n        if(vrSession){\n            /*for (let i = 0; i < 2; ++i) {\n                controllers[i].source=session.inputSources[i]\n            }*/\n    /*for(let j=0;j<7;j++){\n        let bob=Render.cubit(0.1,0.1,0.1, 2+j*0.2, 0.2, 1)\n        buttonBobs.push(bob)\n        Render.addModel(bob)\n    }*/\n    /*}\n    }\n    orbital.enabled=false;\n    vrEnabled=true;*/\n}\n\n/*\nfunction mousedown(ev) {\n    if(ev.which !== 1) { //2 mid and 3 right\n        return false;\n    }\n    mdown = true;\n\n    return true;\n}\n\nfunction mouseup(ev) {\n    if(ev.which === 2) {\n        return false;\n    }\n    if(mdown) {\n        if(!bubbleMenu) { //&& !orbital.isControl()){\n            if(callback)\n                callback();\n        }\n    }\n    mdown = false;\n    endPointer(ev);\n}\n\nfunction touchstart(ev) {\n    mdown = true;\n    mx = ev.touches[0].clientX;\n    my = ev.touches[0].clientY;\n    //startCircle(mx, my);\n    return true;\n}\n\nfunction touchend(ev) {\n    if(mdown) {\n        if(!bubbleMenu && !orbital.isControl()) {\n            if(callback)\n                callback();\n        }\n    }\n    mdown = false;\n    //endCircle();\n    endPointer(ev);\n}\n*/\nfunction pointerdown(ev){\n    if(ev.button==0){\n        mdown=true\n    }\n    mx=ev.clientX\n    my=ev.clientY\n}\nfunction pointerup(ev){\n    mdown = false;\n    endPointer(ev);\n}\nfunction pointermove(ev) {\n    mx = ev.clientX;\n    my = ev.clientY;\n}\n\nfunction endPointer() {\n    if(state == 'landscapeCard')\n        _HexManager_js__WEBPACK_IMPORTED_MODULE_2__.refreshCount()\n    else if(state =='equipmentCard')\n        _Equipment_js__WEBPACK_IMPORTED_MODULE_11__.pointerUp(mx,my)\n\n    //closeBubbleMenu();\n}\n\nfunction getCursor() {\n    return {\n        on: mdown,\n        x: mx,\n        y: my\n    }\n}\n\nfunction screenX() {\n    return mx;\n}\n\nfunction screenY() {\n    return my;\n}\n\nfunction x() {\n    return px;\n}\n\nfunction y() {\n    return py;\n}\n\nfunction z() {\n    return pz;\n}\n\nfunction pos() {\n    \n\n    return posObject;\n}\n\nfunction down() {\n    return mdown && !orbital.isControl();\n}\n\nfunction setVector(pos) {\n    let vel = { x: (pos.x - px), y: (pos.y - py), z: (pos.z - pz) };\n    velArray.push(vel);\n    if(velArray.length > 6)\n        velArray.shift();\n\n    px = pos.x;\n    py = pos.y;\n    pz = pos.z;\n\n    posObject=pos;\n    switch (state) {\n        case \"landscapeCard\":\n            if(!mdown)\n                _HexManager_js__WEBPACK_IMPORTED_MODULE_2__.hexCheck(px, py)\n\n            if(singleTouch || mdown)\n                _HexManager_js__WEBPACK_IMPORTED_MODULE_2__.hexPick(px, py)\n\n            break;\n        case \"makerCard\":\n\n            if(singleTouch || mdown) {\n                let selected = _MakerMenu_js__WEBPACK_IMPORTED_MODULE_9__.getSelection();\n                if(selected) {\n                    if(selected=='trash'){\n                        let closest=_Physics_js__WEBPACK_IMPORTED_MODULE_5__.findWithin(1,pos)\n                        if(closest!=undefined)\n                            _Online_js__WEBPACK_IMPORTED_MODULE_4__.physDel(closest)\n                    }else{\n                        singleTouch = false;\n                        mdown = false;\n                        calcRot();\n                        let name = selected.charAt(0).toUpperCase() + selected.slice(1)\n                        if(selected.startsWith('die')){\n                            _Online_js__WEBPACK_IMPORTED_MODULE_4__.physMake({ x: 1.2,y: 1.2, z: 1.2 }, 1, { x: px, y: py, z: pz + 0.1 }, _Physics_js__WEBPACK_IMPORTED_MODULE_5__.calcQuaterion(lastRot), 3, { name: name, player: _PlayerManager_js__WEBPACK_IMPORTED_MODULE_8__.getOwnPlayer(), model: selected });\n                        }else\n                            _Online_js__WEBPACK_IMPORTED_MODULE_4__.physMake({ x: 1.5, y: 1.5, z: 3 }, 2, { x: px, y: py, z: pz + 0.1 }, _Physics_js__WEBPACK_IMPORTED_MODULE_5__.calcQuaterion(lastRot), 1, { name: name, player: _PlayerManager_js__WEBPACK_IMPORTED_MODULE_8__.getOwnPlayer(), model: selected });\n                        \n                        //let m = AssetManager.make(selected)\n                        //m.position.set(px, py, pz)\n                        //Render.addModel(m)\n                    }\n                }\n            }\n            break;\n        default:\n            if(singleTouch || mdown) {\n                calcRot();\n                heldPhys = _Physics_js__WEBPACK_IMPORTED_MODULE_5__.physCarry(pos, lastRot)\n                if(heldPhys == 1) {\n                    //orbital.dispatchEvent(  { type: 'change' } );\n                    orbital.reset();\n                    //orbital.state=-1;\n                    secondaryTouchPan();\n                }\n            } else if(heldPhys > -1) {\n                _Physics_js__WEBPACK_IMPORTED_MODULE_5__.physDrop(pos, calcVelocity());\n                cancelCarry()\n            }\n    }\n\n}\n\nfunction calcVelocity() {\n    let vel = { x: 0, y: 0, z: 0 }\n    velArray.forEach(v => {\n        vel.x += v.x;\n        vel.y += v.y;\n        vel.z += v.z;\n    })\n    //vel.x/=velArray.length;\n    //vel.y/=velArray.length;\n    //vel.z/=velArray.length;\n    return vel;\n}\n\nfunction calcRot() {\n    let vel = calcVelocity();\n    let arc = Math.sqrt(vel.x * vel.x + vel.y * vel.y)\n    if(arc > 0.2)\n        lastRot = Math.PI / 2 + Math.atan2(vel.y, vel.x);\n}\n/*var callback\n\nfunction onClick(f) {\n    callback = f;\n}\n\nvar radialCallbacks = [];\nvar radialIndex = -1;\n\nfunction initRadial(array) {\n    let circle = document.createElement('div');\n    circle.classList.add('bubbleSelector');\n    circle.style.visibility = 'hidden';\n    touchOn = false;\n    let mainDom = document.querySelector('#main')\n    mainDom.appendChild(circle)\n    if(array && array.length > 0) {\n        array.forEach((e, i) => {\n            let bubb = document.createElement('div');\n            bubb.classList.add('bubble');\n            bubb.style.backgroundColor = i % 2 == 0 ? '#FFED9C' : '#CCFF9C';\n            bubb.style.visibility = 'hidden';\n            bubb.setAttribute('value', e[0]);\n            radialCallbacks.push(e[1]);\n            mainDom.appendChild(bubb);\n        })\n\n\n    }\n    let overtext = document.createElement('div');\n    overtext.classList.add('overtext');\n    overtext.style.visibility = 'hidden';\n    mainDom.appendChild(overtext);\n}*/\nvar touchOn = false;\n/*\nfunction endCircle() {\n    if(touchOn) {\n        let sb = document.querySelector('.bubbleSelector');\n        sb.style.visibility = 'hidden'\n        touchOn = false;\n    }\n}*/\n\nvar bubbleMenu;\nvar tempToggleCamera\n\nfunction contextmenu(ev) {\n    ev.preventDefault();\n\n    /*if(orbital.enabled){\n        orbital.enabled=false;\n    }else{\n        orbital.enabled=true;\n    }*/\n\n\n    return false;\n}\n\nfunction animate() {\n    if(vrEnabled) {\n        if(controllers && controllers.length) {\n            //quest gives 7 arrays, contains pressed bool, touched bool, and value float //DEV\n            //controllers[0].source\n            if(vrSession) {\n                let source = vrSession.inputSources[0]\n                for(let i = 0; i < vrSession.inputSources.length; i++) {\n                    let buttons = vrSession.inputSources[0].gamepad.buttons\n                    if(i == vrSession.inputSources.length - 1) { //pick the last one\n                        //mdown=buttons[i].pressed\n                        if(buttons[i].pressed) {\n\n                        }\n                    } else {\n                        mdown = buttons[i].pressed\n                    }\n\n                }\n\n            }\n        }\n    } else {\n        if(orbital && !orbital.enabled) {\n            let playerModel = World.getOwnPlayer().model\n            let xx = orbital.object.position.x - playerModel.position.x\n            let yy = orbital.object.position.y - playerModel.position.y\n            let rr = Math.sqrt(xx * xx + yy * yy)\n            orbital.object.position.x -= yy / rr\n            orbital.object.position.y += xx / rr\n            orbital.object.lookAt(World.getOwnPlayer().model.position)\n        }\n    }\n\n\n\n\n\n    //console.log(controllers[0].source.gamepad.buttons)\n    //mdown=\n\n}\n\nfunction getAngle() {\n    return orbital.object.rotation.z;\n\n}\n/*\nfunction closeBubbleMenu() {\n    if(bubbleMenu) {\n        bubbleMenu = undefined;\n        let bubbles = document.querySelectorAll('.bubble');\n        bubbles.forEach(e => {\n            e.style.visibility = 'hidden'\n        })\n        let ot = document.querySelector('.overtext');\n        if(ot)\n            ot.style.visibility = 'hidden'\n\n        if(radialIndex >= 0)\n            radialCallbacks[radialIndex](px, py, 0);\n        lockMenu(false);\n    }\n}\n\nfunction openBubbleMenu() {\n    let bubbles = document.querySelectorAll('.bubble');\n    if(bubbles && bubbles.length) {\n        let radial = 2 * Math.PI / bubbles.length;\n        bubbleMenu = {\n            x: mx,\n            y: my\n        };\n        //bubbles.removeClass('hideBubble');\n        bubbles.forEach((e, i) => {\n\n            let xx = mx + Math.sin(radial * i) * 50;\n            let yy = my - Math.cos(radial * i) * 50;\n\n            e.style.left = xx + 'px';\n            e.style.top = yy + 'px';\n            e.style.visibility = 'visible';\n\n        });\n        lockMenu(true);\n    }\n}\n\nfunction bubbleCheck(x, y) {\n    if(bubbleMenu) {\n        moveBubbleSelector(x, y)\n    } else {\n        mx = x;\n        my = y;\n    }\n}\n\nfunction moveBubbleSelector(x, y) {\n    let xx = x;\n    let yy = y;\n    // let sb=document.querySelector('.bubbleSelector')\n    // sb.style.left=xx+'px';\n    // sb.style.top=yy+'px';\n    let dx = x - bubbleMenu.x;\n    let dy = y - bubbleMenu.y;\n    let dr = Math.sqrt(dx * dx + dy * dy);\n    let R = angle(dx, dy);\n\n\n    let bubbles = document.querySelectorAll('.bubble')\n    let radial = 2 * Math.PI / bubbles.length;\n    let tt = R / radial + radial / 2;\n    let index = Math.floor(tt);\n    if(index >= bubbles.length) index = 0;\n\n    if(dr > 100) {\n        index = -1;\n    }\n    let text = \"\"\n    bubbles.forEach((e, i) => {\n        if(i == index) {\n            e.style.border = 'solid blue 6px';\n            text = e.getAttribute('value');\n        } else {\n            e.style.border = '';\n        }\n    });\n    let ang = 180 * R / Math.PI\n    let ot = document.querySelector('.overtext');\n    if(index > -1) {\n        ot.style.visibility = 'visible';\n        ot.style.left = x + 'px';\n        ot.style.top = y + 'px';\n        ot.innerHTML = text;\n        if(dx > 25) {\n            ot.style.transform = 'translate(28px,-50%)';\n        } else if(dx < -25) {\n            ot.style.transform = 'translate(calc(-28px - 100%),-50%)';\n        } else {\n            ot.style.transform = 'translate(-50%,calc(-28px - 100%))';\n        }\n    } else {\n        ot.style.visibility = 'hidden';\n    }\n    radialIndex = index;\n\n    //let text=bubbles.eq(index).attr('value');\n    //console.log(text);\n\n\n}*/\n\n\nfunction angle(dx, dy) {\n    let theta = Math.atan2(dx, -dy); // range (-PI, PI]\n    //theta *= 180 / Math.PI; // rads to degs, range (-180, 180]\n    if(theta < 0) theta = Math.PI * 2 + theta; // range [0, 360)\n    return theta;\n}\nvar tempy = 0;\n\nfunction keyup(ev) {\n    if(isMenuLocked()) {\n        return false;\n    } else {\n        console.log(ev.which)\n        switch (ev.which) {\n            case 13:\n                _BarUI_js__WEBPACK_IMPORTED_MODULE_6__.openApp(2);\n                break;\n            case 27:\n                _BarUI_js__WEBPACK_IMPORTED_MODULE_6__.closeApp();\n                break;\n            case 49:\n                _Environment_js__WEBPACK_IMPORTED_MODULE_3__.changeShadowScale(0);\n                break;\n            case 50:\n                _Environment_js__WEBPACK_IMPORTED_MODULE_3__.changeShadowScale(1);\n                break;\n            case 51:\n                _Environment_js__WEBPACK_IMPORTED_MODULE_3__.changeShadowScale(2);\n                break;\n            case 52:\n                _Environment_js__WEBPACK_IMPORTED_MODULE_3__.changeShadowScale(3);\n                break;\n            case 53:\n                _Environment_js__WEBPACK_IMPORTED_MODULE_3__.changeShadowScale(4);\n                break;\n            case 84:\n                //Online.makePhys({ x: 2, y: 2, z: 3 }, 2, { x: px, y: py, z: 30 }, Physics.calcQuaterion(Math.PI / 2), 0, PlayerManager.getOwnPlayer().color, 'rock');\n                break; //Physics.makePhys(tempy,{x:2,y:2,z:3},2,{x:px,y:py,z:30},0);tempy++;break;\n            case 89:\n                //Online.makePhys({ x: 1.5, y: 1.5, z: 3 }, 2, { x: px, y: py, z: 30 }, Physics.calcQuaterion(Math.PI / 2), 1, PlayerManager.getOwnPlayer().color, 'man');\n                break; //Physics.makePhys(tempy,{x:2,y:2,z:3},2,{x:px,y:py,z:30},1);tempy++;break; //Physics.makePhys(tempy,{x:.5,y:.5,z:.5},2,{x:0,y:0,z:30},1);\n            case 192:\n                { //DEV\n                    window.pickTarget = _Render_js__WEBPACK_IMPORTED_MODULE_1__.pick();\n                    if(window.pickTarget)\n                        console.log(\"picked a \" + window.pickTarget.type)\n                }\n                break;\n\n        }\n    }\n\n}\n\nfunction isMenuLocked() {\n    return menuLocked;\n}\n\nfunction lockMenu(b) {\n    menuLocked = b;\n\n    let doms = document.querySelectorAll('.menuHidable');\n    if(doms.length) {\n        doms.forEach(d => {\n            d.style.visibility = b ? 'hidden' : 'visible';\n        })\n    }\n\n}\n\nvar settingsObject = {};\n/*\nfunction initSettings() {\n    let mainDom = document.querySelector('#main')\n\n    let settingsButton = document.createElement('div');\n    settingsButton.classList.add('settingsButton', 'menuHidable');\n    mainDom.appendChild(settingsButton);\n\n    let settingsBlock = document.createElement('div');\n    settingsBlock.classList.add('settingsBlock');\n\n    let settings = document.createElement('div');\n    settings.classList.add('settingsPane');\n    settingsBlock.appendChild(settings);\n    mainDom.appendChild(settingsBlock);\n    settingsBlock.style.visibility = 'hidden';\n\n\n    function addButton(text, callback, reference, possibleValues) {\n        let row = document.createElement('div')\n        let button = document.createElement('div');\n        button.classList.add('switch');\n        let defaultState;\n        if(reference) {\n            defaultState = settingsObject[reference];\n        }\n\n        if(possibleValues) { //not boolean\n            if(defaultState != possibleValues[0]) {\n                if(defaultState != possibleValues[possibleValues.length - 1]) {\n                    button.classList.add('switchHalf');\n                } else {\n                    button.classList.add('switchOn');\n                }\n            }\n            button.setAttribute(\"value\", defaultState);\n            let index = 0;\n            for(let ii = 0; ii < possibleValues.length; ii++) {\n                if(possibleValues[ii] == defaultState) {\n                    index = ii;\n                }\n            }\n            button.setAttribute(\"index\", index);\n            button.addEventListener('click', function(ev) {\n                ev.stopPropagation();\n                let i = button.getAttribute(\"index\");\n                i++;\n                if(i >= possibleValues.length) {\n                    i = 0;\n                }\n                if(i == 0) {\n                    button.classList.remove('switchOn');\n                } else if(i == possibleValues.length - 1) {\n                    button.classList.remove('switchHalf');\n                    button.classList.add('switchOn');\n                } else {\n                    button.classList.add('switchHalf');\n                }\n                let val = possibleValues[i];\n                button.setAttribute(\"value\", val);\n                button.setAttribute(\"index\", i);\n                callback(val);\n                updateSettings(reference, val)\n\n   \n            });\n        } else { //boolean\n            if(defaultState)\n                button.classList.add('switchOn');\n\n            button.addEventListener('click', function(ev) {\n                ev.stopPropagation();\n                if(!button.classList.contains('switchOn')) {\n                    button.classList.add('switchOn')\n                    callback(true);\n                    updateSettings(reference, true)\n                } else {\n                    button.classList.remove('switchOn')\n                    callback(false);\n                    updateSettings(reference, false)\n                }\n            })\n        }\n\n\n\n\n        row.appendChild(button);\n\n        let label = document.createElement('span');\n        label.innerHTML = text;\n        row.appendChild(label);\n        settings.appendChild(row);\n        callback(defaultState)\n    }\n    let storedSettings = localStorage.getItem(\"settings\");\n    if(storedSettings === null) {\n        settingsObject = {\n            maxResolution: \"1\",\n            maxShadow: true,\n            other: true\n        }\n    } else {\n        settingsObject = JSON.parse(storedSettings);\n    }\n\n    addButton('max resolution (turn off if it lags)', Render.setResolution, \"maxResolution\", [\"4\", \"2\", \"1\"]);\n    addButton('max shadow resolution (turn off if it lags)', Environment.setShadows, \"maxShadow\");\n    addButton('shadows (turn off if it lags)', function(bool) {}, \"other\");\n    addButton('force update', function(bool) {\n        if(bool) window.location.reload(true)\n    });\n    addButton('Toggle light helper', Environment.setLightHelper, \"lightHelper\");\n\n\n\n    settingsButton.addEventListener('click', function(ev) {\n        if(!isMenuLocked()) {\n            lockMenu(true);\n            settingsBlock.style.visibility = 'visible';\n        }\n        addConfetti(settingsButton.offsetLeft + 30, settingsButton.offsetTop + 30, 315);\n\n    })\n\n    settingsBlock.addEventListener('click', function(ev) {\n        if(ev.target == settingsBlock) {\n            settingsBlock.style.visibility = 'hidden';\n            lockMenu(false);\n        }\n    })\n\n}\n\nfunction updateSettings(reference, val) {\n    if(reference) {\n        settingsObject[reference] = val;\n        localStorage.setItem('settings', JSON.stringify(settingsObject));\n    }\n}\n*/\n\nfunction isVR() {\n    return vrEnabled\n}\n\nfunction getVRPointer() {\n    return controllers[controllers.length - 1].controller;\n}\n\nfunction moveLock() {\n\n}\n\nfunction setState(st) {\n    state = st;\n    switch (st) {\n        case 'makerCard':\n            secondaryTouchPan();\n            break;\n        case 'landscapeCard':\n            _HexManager_js__WEBPACK_IMPORTED_MODULE_2__.toggleSelector(true)\n            secondaryTouchPan();\n            break;\n\n        default:\n            primaryTouchPan()\n    }\n\n    if(st != 'landscapeCard')\n        _HexManager_js__WEBPACK_IMPORTED_MODULE_2__.toggleSelector(false)\n}\n\nfunction getState() {\n    return state;\n}\n\nfunction cancelCarry() {\n    heldPhys = -1;\n    mdown = false;\n    singleTouch = false;\n    primaryTouchPan();\n    _Physics_js__WEBPACK_IMPORTED_MODULE_5__.cancelCarry();\n\n}\n\n\n\n\n//# sourceURL=webpack://buup/./src/Control.js?");

/***/ }),

/***/ "./src/Drawer.js":
/*!***********************!*\
  !*** ./src/Drawer.js ***!
  \***********************/
/*! namespace exports */
/*! export close [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getData [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getState [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export makeButton [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setData [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"makeButton\": () => /* binding */ makeButton,\n/* harmony export */   \"getState\": () => /* binding */ getState,\n/* harmony export */   \"getData\": () => /* binding */ getData,\n/* harmony export */   \"setData\": () => /* binding */ setData,\n/* harmony export */   \"close\": () => /* binding */ close\n/* harmony export */ });\n\n\t\n\nfunction init() {\n\n    initSheet();\n    main=document.querySelector('.drawer-group');\n    drawer = main.querySelector('.drawer')\n    \n    drawer.setAttribute('width', '32px'); //drawer.offsetWidth+'px')\n    drawer.setAttribute('height', '32px'); //drawer.offsetHeight+'px')\n    drawer.addEventListener('pointerdown', pointerdown)\n    drawer.addEventListener('pointermove', pointermove)\n    window.addEventListener('pointerup', pointerup)\n    ctx = drawer.getContext('2d');\n    ctx.imageSmoothingEnabled = false;\n\n\n    let topper=main.querySelector('.drawer-top')\n    let p1=d('drawer-paint')\n    p1.style.backgroundColor='black'\n    p1.addEventListener('pointerup',paintChange)\n    let p2=d('drawer-paint')\n    p2.style.backgroundColor='red'\n    p2.addEventListener('pointerup',paintChange)\n    let p3=d('drawer-paint')\n    p3.style.backgroundColor='#65BB00'\n    p3.addEventListener('pointerup',paintChange)\n    let p4=d('drawer-paint')\n    p4.style.backgroundColor='white'\n    p4.addEventListener('pointerup',paintChange)\n\n    let download=d('drawer-download')\n    download.addEventListener('pointerup',downloadImage)\n    let trash=d('drawer-trash')\n    trash.addEventListener('pointerup',trashImage)\n    topper.appendChild(p1)\n    topper.appendChild(p2)\n    topper.appendChild(p3)\n    topper.appendChild(p4)\n    topper.appendChild(download)\n    topper.appendChild(trash)\n\n\n\n    document.onpaste = function(event) {\n        var items = (event.clipboardData || event.originalEvent.clipboardData).items;\n        console.log(JSON.stringify(items)); // will give you the mime types\n         let index;\n        for(index in items) {\n            var item = items[index];\n            if(item.kind === 'file') {\n                var blob = item.getAsFile();\n                var reader = new FileReader();\n                reader.onload = function(event) {\n                    var img = new Image;\n                    img.onload = function(){\n                    \tsetData(img)\n\t\t\t\t\t};\n                    img.src = event.target.result;\n                }; // data url!\n\n                reader.readAsDataURL(blob);\n            }\n        }\n    }\n\n}\n\nvar down = false;\nvar ctx;\nvar paintColor='black';\nvar main;\nvar drawer\nvar state;\n\nfunction pointerdown() {\n    down = true;\n}\n\nfunction pointermove(ev) {\n    if(down) {\n        ctx.fillStyle = paintColor;\n        let rect=ev.target.getBoundingClientRect();\n\n        ctx.fillRect(32 * (ev.clientX - rect.left) / 132, 32 * (ev.clientY - rect.top) / 132, 2, 2);\n    }\n}\n\nfunction pointerup(ev) {\n    down = false;\n}\n\nfunction trashImage(ev){\n\twiggle(ev.target)\n\tctx.fillStyle = \"rgba(255, 255, 255, 0)\";\n\tctx.clearRect(0,0,32,32);\n}\nfunction downloadImage(ev){\n\twiggle(ev.target)\n\tlet target=ev.target.parentElement.parentElement.querySelector('.drawer')\n\t//let img = convertCanvasToImage(target)\n    let img = target.toDataURL(\"image/png\");\n    downloader(img)\n}\n\nfunction downloader(img){\n\tlet a = document.createElement('a');\n\ta.href = img\n    a.download = img //\"img\";\n    //a.download = img;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n}\n\nfunction convertCanvasToImage(canvas) {\n    var image = new Image();\n    image.src = canvas.toDataURL(\"image/png\");\n    return image;\n}\nfunction wiggle(target){\n\ttarget.style.animationName='';\n\tvoid target.offsetWidth;\n\ttarget.style.animationName='jello';\n}\n\nfunction paintChange(ev){\n\twiggle(ev.target)\n\tpaintColor=ev.target.style.backgroundColor;\n}\nfunction getData(){\n\treturn drawer.toDataURL(\"image/png\");\n}\n\nfunction move(target){\n    target.appendChild(main)\n}\nfunction setData(img){\n    ctx.clearRect(0,0,32,32)\n    if(!img.src.includes('undefined')){\n        ctx.fillStyle = \"rgba(255, 255, 255, 0)\";\n        ctx.drawImage(img,0,0,32,32);\n    }\n\n}\n\nfunction d(c){\n\tlet dom=document.createElement('div')\n\tif(c)\n\t\tdom.className=c;\n\treturn dom\n}\n\nfunction makeButton(target,status,callback){\n    let dom=d('drawer-opener')\n    dom.setAttribute('status',status)\n    dom.addEventListener('click',ev=>{\n        \n        let group=target.querySelector('.drawer-group')\n        if(group && group.style.display=='initial'){\n            group.style.display='none'\n            state=undefined;\n            if(callback)\n            callback(false);\n        }else{\n            main.style.display='initial'\n            state=ev.target.getAttribute('status')\n            if(state=='character'){\n                main.style.left='-72px'\n                main.style.top='64px'\n            }else{\n                main.style.top='-100px';\n                main.style.left='50%';\n            }\n           \n            target.appendChild(main)\n            if(callback)\n            callback(true);\n        }\n    })\n   target.appendChild(dom);\n   return dom;\n}\nfunction getState(){\n    return state;\n}\n\nfunction close(){\n    main.style.display='none'\n     state=undefined;\n}\n\n\n\nfunction initSheet(){\nvar sheet = document.createElement('style')\n    sheet.innerHTML = `\n.drawer-group{\n    position: absolute;\n    top: -204px;\n    width: 128px;\n    left: 50%;\n    transform: translate(-50%,-50%);\n}\n.drawer {\n    display:block;\n    width: 128px;\n    height: 128px;\n    position: relative;\n    border-radius: 8px;\n    border: gray solid 1px;\n    image-rendering: pixelated;\n    touch-action: none;\n    background-color: #5555;\n}\n\n.drawer-top{\nposition: relative;\npointer-events: none;\nwidth: 156px;\n}\n.drawer-top *{\n    pointer-events: initial;\n}\n\n.drawer-paint,\n.drawer-trash,\n.drawer-download {\n    width: 24px;\n    height: 24px;\n    border-radius: 12px;\n    display: inline-block;\n    border: gray solid 1px;\n    box-sizing: border-box;\n    animation: 0.2s;\n}\n\n\n.drawer-trash {\n    border: none;\n    background-position: center center;\n    background-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1z\"/></svg>');\n}\n\n.drawer-download {\n    border: none;\n    background-size: cover;\n    background-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M11 5v11.17l-4.88-4.88c-.39-.39-1.03-.39-1.42 0-.39.39-.39 1.02 0 1.41l6.59 6.59c.39.39 1.02.39 1.41 0l6.59-6.59c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L13 16.17V5c0-.55-.45-1-1-1s-1 .45-1 1z\"/></svg>');\n}\n.drawer-opener{\n    width:48px;\n    height: 48px;\n    border-radius:24px !important;\n    background-color: white;\n    position: relative;\n    display: inline-block;\n    background-size: 32px;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.9 13.98l2.1 2.53 3.1-3.99c.2-.26.6-.26.8.01l3.51 4.68c.25.33.01.8-.4.8H6.02c-.42 0-.65-.48-.39-.81L8.12 14c.19-.26.57-.27.78-.02z\"/></svg>');\n}\n.stretch-image{\n    width: 64px;\n    height 64px;\n}\n`;\ndocument.body.appendChild(sheet)\n}\n\n\n\n\n//# sourceURL=webpack://buup/./src/Drawer.js?");

/***/ }),

/***/ "./src/Environment.js":
/*!****************************!*\
  !*** ./src/Environment.js ***!
  \****************************/
/*! namespace exports */
/*! export animate [provided] [no usage info] [missing usage info prevents renaming] */
/*! export changeShadowScale [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getWind [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setLightHelper [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setShadowPos [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setShadows [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"getWind\": () => /* binding */ getWind,\n/* harmony export */   \"animate\": () => /* binding */ animate,\n/* harmony export */   \"changeShadowScale\": () => /* binding */ changeShadowScale,\n/* harmony export */   \"setShadows\": () => /* binding */ setShadows,\n/* harmony export */   \"setShadowPos\": () => /* binding */ setShadowPos,\n/* harmony export */   \"setLightHelper\": () => /* binding */ setLightHelper\n/* harmony export */ });\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n\n\nvar wind;\n\nvar debugLightHelper;\nvar sunLight;\nvar sunLight2;\nvar sunLight2;\n\nvar sunTarget;\nvar sunCenter;\nvar ambientLight;\n\n\nvar SHADOW_SIZE = 2048; //2048*16;\n\nlet pi2 = Math.PI * 2;\n\nlet tempHeight = 1;\nlet tempD = -0.001; //-0.004\nlet shadowMaxHeight;\n\nfunction init() {\n\n    wind = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(1, 0, 0);\n    sunCenter = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 0);\n\n    ambientLight = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.AmbientLight(0x8F8F8F); // soft white light  0x404040\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel2(ambientLight);\n\n    //var directionalLight = new THREE.PointLight( 0xffffff, 1,100 );\n    sunLight = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.DirectionalLight(0xE05757, 0.5); //DirectionalLight\n    sunLight.position.set(0, 250, 0);\n    sunLight.castShadow = true;\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel2(sunLight);\n    sunTarget = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Object3D();\n    sunTarget.position.set(20, 0, 20);\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel2(sunTarget);\n    sunLight.target = sunTarget;\n\n\n    sunLight.shadow.mapSize.width = SHADOW_SIZE; // default\n    sunLight.shadow.mapSize.height = SHADOW_SIZE; // default\n    sunLight.shadow.camera.near = 1; // default\n    // default\n\n    changeShadowScale(0);\n\n    sunLight.shadow.radius = 2.2; //2.2;\n    sunLight.shadow.bias = -.0005;\n\n    sunLight2 = sunLight.clone();\n    sunLight2.shadow.mapSize.width = 256; //256;  // default\n    sunLight2.shadow.mapSize.height = 256; //256; // default\n    sunLight2.shadow.radius = 0;\n\n    sunLight2.visible = false;\n\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel2(sunLight2);\n\n\n\n    window.sunLight = sunLight;\n    setLightHelper(true)\n\n}\n\nfunction changeShadowScale(factor) {\n    let d1;\n    switch (factor) {\n        case 4:\n            { //yuge\n                d1 = 600;\n                sunLight.shadow.camera.far = 1200;\n                sunLight.shadow.mapSize.width = SHADOW_SIZE;\n                sunLight.shadow.mapSize.height = SHADOW_SIZE;\n                shadowMaxHeight = 200 / 2\n                sunLight.position.z = 600\n                _Render_js__WEBPACK_IMPORTED_MODULE_1__.getCursor().scale.set(2,2,2)\n            }\n            break;\n        case 3:\n            {\n                d1 = 300;\n                sunLight.shadow.camera.far = 600;\n                sunLight.shadow.mapSize.width = SHADOW_SIZE;\n                sunLight.shadow.mapSize.height = SHADOW_SIZE;\n                shadowMaxHeight = 100\n                sunLight.position.z = 300\n                _Render_js__WEBPACK_IMPORTED_MODULE_1__.getCursor().scale.set(6,6,6)\n            }\n            break;\n        case 2:\n            {\n                d1 = 120;\n                sunLight.shadow.camera.far = 240;\n                sunLight.shadow.mapSize.width = SHADOW_SIZE;\n                sunLight.shadow.mapSize.height = SHADOW_SIZE;\n                shadowMaxHeight = 40\n                sunLight.position.z = 120\n                _Render_js__WEBPACK_IMPORTED_MODULE_1__.getCursor().scale.set(2,2,2)\n\n            }\n            break;\n        case 1:\n            {\n                d1 = 75;\n                sunLight.shadow.camera.far = 150;\n                sunLight.shadow.mapSize.width = SHADOW_SIZE;\n                sunLight.shadow.mapSize.height = SHADOW_SIZE;\n                shadowMaxHeight = 25\n                sunLight.position.z = 75\n                _Render_js__WEBPACK_IMPORTED_MODULE_1__.getCursor().scale.set(.75,.75,.75)\n            }\n            break;\n        default:\n            {\n                d1 = 30;\n                sunLight.shadow.camera.far = 60;\n                sunLight.shadow.mapSize.width = SHADOW_SIZE;\n                sunLight.shadow.mapSize.height = SHADOW_SIZE;\n                shadowMaxHeight = 10\n                sunLight.position.z = 30\n                _Render_js__WEBPACK_IMPORTED_MODULE_1__.getCursor().scale.set(.25,.25,.25)\n            }\n    }\n\n    sunLight.shadow.camera.left = -d1;\n    sunLight.shadow.camera.right = d1;\n    sunLight.shadow.camera.top = d1;\n    sunLight.shadow.camera.bottom = -d1;\n    if(sunLight.shadow.map) {\n        sunLight.shadow.map.dispose()\n        sunLight.shadow.map = null\n    }\n\n    if(debugLightHelper) {\n        setTimeout(function() {\n            debugLightHelper.update();\n        }, 100)\n\n    }\n}\n\nfunction cycle() {\n\n}\n\nfunction getWind() {\n    return wind;\n}\n\nfunction animate() {\n    tempHeight += tempD;\n    if(tempHeight < 0) {\n        tempHeight = 0;\n        tempD = -tempD;\n    } else if(tempHeight > 1) {\n        tempHeight = 1;\n        tempD = -tempD;\n    }\n    if(tempHeight) {\n        sunLight.color.setHex(0xffffff);\n        ambientLight.color.setHex(0x606060);\n        _Render_js__WEBPACK_IMPORTED_MODULE_1__.setClearColor(0xb0e9fd, 1);\n    }\n    /*else if(tempHeight>50){\n            sunLight.color.setHex(0xFAD227);\n            ambientLight.color.setHex(0x5E5371);\n            Render.setClearColor(0xF0FDB0,1);\n        }else{\n            sunLight.color.setHex(0xFF6600);\n            ambientLight.color.setHex(0x3F2A62);\n            Render.setClearColor(0xF86722,1);\n        }*/\n\n    //sunLight.position.z=200+tempHeight*4;\n\n    let v = shadowMaxHeight * tempHeight\n    sunTarget.position.y = sunCenter.y - v;\n    sunLight.position.y = sunCenter.y + v;\n}\n\n\nfunction setShadows(bool) {\n    if(!bool) {\n        //SHADOW_SIZE=2048;\n        sunLight.visible = false;\n        sunLight2.visible = true;\n    } else {\n        //SHADOW_SIZE=512;\n        sunLight.visible = true;\n        sunLight2.visible = false;\n    }\n    // sunLight.shadow.mapSize.width = SHADOW_SIZE;  // default\n    //sunLight.shadow.mapSize.height = SHADOW_SIZE; // default\n}\n\nfunction setShadowPos(pos) {\n    sunCenter.set(pos.x, pos.y, pos.z)\n    sunLight.position.x = pos.x;\n    sunTarget.position.x = pos.x;\n}\n\nfunction setLightHelper(bool) {\n    if(!bool) {\n        if(debugLightHelper) {\n            debugLightHelper.visible = false;\n        }\n    } else {\n        if(!debugLightHelper) {\n            debugLightHelper = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.CameraHelper(sunLight.shadow.camera);\n            _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel(debugLightHelper);\n        } else {\n            debugLightHelper.visible = true;\n        }\n\n    }\n}\n\n\n\n//# sourceURL=webpack://buup/./src/Environment.js?");

/***/ }),

/***/ "./src/Equipment.js":
/*!**************************!*\
  !*** ./src/Equipment.js ***!
  \**************************/
/*! namespace exports */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export pointerUp [provided] [no usage info] [missing usage info prevents renaming] */
/*! export syncEquipment [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"pointerUp\": () => /* binding */ pointerUp,\n/* harmony export */   \"syncEquipment\": () => /* binding */ syncEquipment\n/* harmony export */ });\n/* harmony import */ var _PictureMaker_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PictureMaker.js */ \"./src/PictureMaker.js\");\n/* harmony import */ var _Online_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Online.js */ \"./src/Online.js\");\n/* harmony import */ var _Control_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Control.js */ \"./src/Control.js\");\n/* harmony import */ var _Physics_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Physics.js */ \"./src/Physics.js\");\n/* harmony import */ var _PlayerManager_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./PlayerManager.js */ \"./src/PlayerManager.js\");\n\n\n\n\n\n\nvar main;\nvar dragger;\nvar menu;\nvar held;\nvar items = {} //name:,description:,model:\nvar equipmentDebounce;\n\nfunction init() {\n    initSheet();\n    main = document.querySelector('#equipmentCard')\n    menu = main.querySelector('#equipment-bar')\n    dragger = main.querySelector('#pseduo-dragger')\n\n    window.addEventListener('pointermove', ev => { //DEV TODO todo\n        if(held) {\n            moveDragger(ev)\n        }\n    })\n\n    /* menu.addEventListener('pointerup', ev => {\n         if(!held){\n             let target=Physics.getCarry()\n             if(target){\n                 makeItem(target.meta.name,target.meta.description,target.meta.model)\n                 Physics.delPhys(target.id)\n                 Control.cancelCarry();\n             }\n         }\n     })*/\n\n    /*main.addEventListener('contextmenu',ev=>{\n        ev.preventDefault();\n    })*/\n\n    window.addEventListener('pointerup', ev => {\n\n    })\n\n}\n\nfunction pointerUp(mx, my) {\n    if(held) {\n        held.classList.remove('equipment-item-selected')\n        if(dragger.children.length)\n            dragger.children[0].remove()\n\n        held.style.display = 'none'\n        let obj = scrapItem(held)\n        if(obj) {\n            let pos = _Control_js__WEBPACK_IMPORTED_MODULE_2__.pos();\n            obj.player = _PlayerManager_js__WEBPACK_IMPORTED_MODULE_4__.getOwnPlayer()\n            if(obj && obj.model.startsWith('die')){\n                obj.label='dice'\n                _Online_js__WEBPACK_IMPORTED_MODULE_1__.physMake({ x: 1.2,y: 1.2, z: 1.2 }, 2, { x: pos.x, y: pos.y, z: 10 }, _Physics_js__WEBPACK_IMPORTED_MODULE_3__.calcQuaterion(Math.PI / 2), 3, obj);\n            }else\n                _Online_js__WEBPACK_IMPORTED_MODULE_1__.physMake({ x: 1.5, y: 1.5, z: 3 }, 2, { x: pos.x, y: pos.y, z: 10 }, _Physics_js__WEBPACK_IMPORTED_MODULE_3__.calcQuaterion(Math.PI / 2), 1, obj);\n        }\n        held = undefined\n    } else {\n        let target = _Physics_js__WEBPACK_IMPORTED_MODULE_3__.getCarry()\n        if(target) {\n            let dom = document.elementFromPoint(mx, my)\n            if(dom) {\n                dom = dom.closest('#equipment-bar')\n                if(dom) {\n                    makeItem(target.meta.name, target.meta.description, target.meta.model)\n                    _Physics_js__WEBPACK_IMPORTED_MODULE_3__.physDel(target.id)\n                    _Control_js__WEBPACK_IMPORTED_MODULE_2__.cancelCarry();\n                }\n\n\n            }\n        }\n    }\n}\n\nfunction moveDragger(ev) {\n    dragger.style.left = ev.clientX + 'px'\n    dragger.style.top = ev.clientY + 'px'\n}\n\nfunction makeItem(name, description, model) {\n    let dom = d('equipment-item')\n    if(!name)\n        name = 'undefined'\n    let h4 = document.createElement('h4')\n    h4.innerText = name\n\n    let p = document.createElement('p')\n    if(description)\n        p.innerText = description\n    else\n        p.innerText = 'stuff'\n\n    let icon = document.createElement('img')\n    icon.className = 'equipment-icon'\n    if(model) {\n        dom.setAttribute('data', model)\n        icon.setAttribute('src', _PictureMaker_js__WEBPACK_IMPORTED_MODULE_0__.get(model));\n    }\n\n    dom.appendChild(h4)\n    dom.appendChild(icon)\n    dom.appendChild(p)\n    dom.addEventListener('pointerdown', ev => {\n        if(dragger.children.length)\n            dragger.children[0].remove()\n        held = dom;\n        held.classList.add('equipment-item-selected')\n        dragger.appendChild(dom.cloneNode(true))\n        moveDragger(ev)\n    })\n    dom.addEventListener('pointerup', ev => {\n        let target = document.elementFromPoint(ev.clientX, ev.clientY)\n        if(!target.classList.contains('equipment-item')) {\n            target = target.parentElement\n            if(!target.classList.contains('equipment-item')) {\n                return;\n            }\n        }\n\n        console.log('up' + target.innerText)\n        if(held) {\n            held.classList.remove('equipment-item-selected')\n            menu.insertBefore(held, target)\n            held = undefined\n        }\n        if(dragger.children.length)\n            dragger.children[0].remove()\n    })\n    menu.appendChild(dom)\n    //item.push({name:name,description:description,model:model})\n    if(equipmentDebounce){\n        clearTimeout(equipmentDebounce)\n        equipmentDebounce=undefined\n    }\n    equipmentDebounce=setTimeout(()=>{\n        let array=[];\n        main.querySelectorAll('.equipment-item').forEach(item=>{\n            array.push(scrapItem(item))\n        })\n         _Online_js__WEBPACK_IMPORTED_MODULE_1__.sendEquipment(_PlayerManager_js__WEBPACK_IMPORTED_MODULE_4__.getOwnPlayer().id,array)\n         console.log('send equipment '+array.length)\n    },2000)\n}\nfunction syncEquipment(data){\n    if(!data || data.length==0){\n        makeItem('A Man', 'Good boi', 'man')\n        makeItem('Cool Rock', \"It's a cool rock\", 'rock')\n        makeItem('Pot', \"420\", 'pot')\n    }else{\n        data.forEach(item=>{\n            makeItem(item.name,item.description,item.model)\n        })\n    }\n}\n\nfunction scrapItem(item) {\n    let obj = {};\n    let name = item.querySelector('h4')\n    let description = item.querySelector('p')\n    let model = item.getAttribute('data')\n    if(name)\n        obj.name = name.innerText\n    if(description)\n        obj.description = description.innerText\n    if(model)\n        obj.model = model\n    return obj;\n}\n\nfunction reset() {\n    menu.querySelectorAll('.equipment-item').forEach(app => {\n        app.style.display = ''\n    })\n}\n\nfunction d(c) {\n    let dom = document.createElement('div')\n    if(c)\n        dom.className = c;\n    return dom;\n}\n\nfunction initSheet() {\n    var sheet = document.createElement('style')\n    sheet.innerHTML = `\n    #equipment-bar{\n        position: absolute;\n        border-radius: 16px;\n        background-color: #fff5;\n        border-radius: 16px;\n        min-height: 128px;\n        max-height: 60%;\n        width: 512px;\n        bottom: 96px;\n        left: 50%;\n        transform: translate(-50%);\n        overflow-x: hidden;\n        overflow-y: auto;\n        touch-action: none;\n        pointer-events:auto;\n    }\n    .equipment-item{\n        user-select: none;\n        border-radius: 8px;\n        background-color: white;\n        display: inline-block;\n        min-height: 16px;\n        min-width: 16px;\n        max-width: 200px;\n        margin: 8px;\n        box-sizing: border-box;\n    }\n    .equipment-item-selected{\n        border: dashed white 3px;\n        opacity: 0.5;\n    }\n    .equipment-item h4{\n        display:block;\n        margin:6px;\n    }\n    .equipment-item p{\n        display: inline-block;\n        margin: 16px;\n    }\n    .equipment-icon{\n        min-width: 48px;\n        min-height: 48px;\n        border-radius: 8px;\n        background-color: gray;\n        display: inline-block;\n    }\n    #pseduo-dragger{\n        position: absolute;\n        pointer-events: none;\n    }`\n    document.body.appendChild(sheet)\n\n}\n\n\n\n//# sourceURL=webpack://buup/./src/Equipment.js?");

/***/ }),

/***/ "./src/Experimental.js":
/*!*****************************!*\
  !*** ./src/Experimental.js ***!
  \*****************************/
/*! namespace exports */
/*! export animate [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export makeShader [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"animate\": () => /* binding */ animate,\n/* harmony export */   \"makeShader\": () => /* binding */ makeShader\n/* harmony export */ });\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n/* harmony import */ var _lib_three_ik_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/three-ik.js */ \"./src/lib/three-ik.js\");\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _Control_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Control.js */ \"./src/Control.js\");\n\n\n\n\n\n\nvar iks=[];\nvar pivot\nvar movingTarget\nvar host\nfunction init(){\n\n\n\twindow.addEventListener('keyup',ev=>{\n\t\tif(ev.which=='87'){\n\t\t\t\n\t\t\tif(window.lastMesh){\n\t\t\t\tmakeSpline(window.lastMesh)\n\t\t\t}\n\t\t}\n\t})\n}\nfunction makeSpline(target){\n\thost=target\n\t\tlet ik = new _lib_three_ik_js__WEBPACK_IMPORTED_MODULE_1__.IK();\n\t\tlet chain = new _lib_three_ik_js__WEBPACK_IMPORTED_MODULE_1__.IKChain();\n\tlet constraints = [new _lib_three_ik_js__WEBPACK_IMPORTED_MODULE_1__.IKBallConstraint(90),new _lib_three_ik_js__WEBPACK_IMPORTED_MODULE_1__.IKBallConstraint(90)];\n\t\n\n// Create a target that the IK's effector will reach\n// for.\n\n//const movingTarget = new THREE.Mesh(new THREE.SphereGeometry(0.1), new THREE.MeshBasicMaterial({ color: 0xff0000 }));\n//movingTarget.position.z = 2;\n\n\n// Create a chain of THREE.Bone's, each wrapped as an IKJoint\n// and added to the IKChain\n\n\n//lastMesh.children[0].children[0].children[0].children[0].children[1].children[0]\nmovingTarget = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh(new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.SphereGeometry(0.1), new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ color: 0xff0000 }));\nmovingTarget.position.z = 0.75;\npivot = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Object3D();\npivot.add(movingTarget);\n_Render_js__WEBPACK_IMPORTED_MODULE_2__.addModel(pivot)\n\ntarget.children.forEach(obj=>{\n\tif(obj.type=='Bone'){\n\t\twalkBone(obj,chain,constraints,0)\n\t}else if(obj.type=='Object3D'){\n\t\twalkBone(obj.children[0],chain,constraints,0)\n\t\t\n\t}\n})\n/*\nfor (let i = 0; i < 10; i++) {\n  const bone = new THREE.Bone();\n  bone.position.y = i === 0 ? 0 : 0.5;\n\n  if (bones[i - 1]) { bones[i - 1].add(bone); }\n  bones.push(bone);\n\n  // The last IKJoint must be added with a `target` as an end effector.\n  const target = i === 9 ? movingTarget : null;\n  chain.add(new IK.IKJoint(bone, { constraints }), { target });\n}*/\n\n// Add the chain to the IK system\nik.add(chain);\n//target.add(ik.getRootBone());\n\n\n// Create a helper and add to the scene so we can visualize\n// the bones\nconst helper = new _lib_three_ik_js__WEBPACK_IMPORTED_MODULE_1__.IKHelper(ik);\n_Render_js__WEBPACK_IMPORTED_MODULE_2__.addModel(helper);\nwindow.ikhelper=helper;\niks.push(ik)\n\n}\n\nfunction walkBone(bone,chain,constraints,iterator){\n\tif(bone && bone.type=='Bone'){\n\t\tlet nextBone;\n\t\tlet target\n\t\tconsole.log('chickn bone '+bone.name)\n\t\tif(bone.children && bone.children.length>0){\n\t\t\tif(bone.children.length>1 && bone.name=='spine005')\n\t\t\t\tnextBone=bone.children[1]\n\t\t\telse \n\t\t\t\tnextBone=bone.children[0]\n\t\t}else{\n\t\t\ttarget=_Render_js__WEBPACK_IMPORTED_MODULE_2__.getCursor()//movingTarget\n\t\t}\n\t\tif(iterator>2){\n\t\t\t//if(iterator==2)\n\t\t\t\t//bone.position.z-=0.1\n\t\t\t\tlet constraint=iterator==5?constraints[0]:constraints[1]\n\t\t\tchain.add(new _lib_three_ik_js__WEBPACK_IMPORTED_MODULE_1__.IKJoint(bone, { constraints }), { target });\n\t\t}\n\t\tif(nextBone)\n\t\t\twalkBone(nextBone,chain,constraints,iterator+1)\n\t}\n}\n\nfunction animate(){\n\tif(iks && iks.length>0 && pivot){\n\n\t\t//pivot.position.set(Control.x(),Control.y(),Control.z())\n\t\tiks.forEach(ik=>{\n\t\t\tik.solve();\n\t\t})\n\n\t}\n}\n\n\n\n\n\n\n\n\n\n\n//============\n\nfunction makeShader() {\n    // \n    //THREE.ShaderChunk.meshphysical_frag = \"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define REFLECTIVITY\\n\\t#define CLEARCOAT\\n\\t#define TRANSPARENCY\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef TRANSPARENCY\\n\\tuniform float transparency;\\n#endif\\n#ifdef REFLECTIVITY\\n\\tuniform float reflectivity;\\n#endif\\n#ifdef CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheen;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#ifdef TRANSPARENCY\\n\\t\\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\\n\\t#endif\\n\\tgl_FragColor = vec4( 1,1,0, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\n    /*\n        `\n    #ifdef USE_ALPHAMAP\n        diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n    #endif\n\n    #ifdef BIGGO\n        gl_FragColor=vec4(1.0,0,0,1.0);\n    #endif\n    `;*/\n    // #include <clearcoat_pars_fragment>\n    var meshphysical_frag = `\n    #define STANDARD\n#ifdef PHYSICAL\n    #define REFLECTIVITY\n    #define CLEARCOAT\n    #define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n    uniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n    uniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n    uniform float clearcoat;\n    uniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n    uniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n    varying vec3 vNormal;\n    #ifdef USE_TANGENT\n        varying vec3 vTangent;\n        varying vec3 vBitangent;\n    #endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vUv;\nuniform float time;\n\n\nvoid main() {\n    #include <clipping_planes_fragment>\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <roughnessmap_fragment>\n    #include <metalnessmap_fragment>\n    #include <normal_fragment_begin>\n    #include <normal_fragment_maps>\n    #include <clearcoat_normal_fragment_begin>\n    #include <clearcoat_normal_fragment_maps>\n    #include <emissivemap_fragment>\n    #include <lights_physical_fragment>\n    #include <lights_fragment_begin>\n    #include <lights_fragment_maps>\n    #include <lights_fragment_end>\n    #include <aomap_fragment>\n    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n    #ifdef TRANSPARENCY\n        diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n    #endif\n\n    //vec2 uv  = texture2D(BaseImage, gl_TexCoord[0].st).rg;\n\n    outgoingLight.x=mod(sqrt(pow((mod(time,1.0)+vUv.x-0.5),2.0)+pow((vUv.y-0.5),2.0))*20.0,1.0);\n   // outgoingLight.y=outgoingLight.x;\n    //outgoingLight.z=outgoingLight.x;\n\n\n    gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}`\n\n\n\n\n    /*\n    #ifdef USE_COLOR\n                if(vColor==vec3(0,0,1))\n                    diffuseColor.rgb *= vec3(1,0,0);\n                else\n                    diffuseColor.rgb *= vColor;\n        #endif*/\n\n    //    #include <color_vertex>\n\n    var meshphysical_vert = `#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n    varying vec3 vNormal;\n    #ifdef USE_TANGENT\n        varying vec3 vTangent;\n        varying vec3 vBitangent;\n    #endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nuniform vec3 shirt;\nuniform vec3 wind;\nuniform float time;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #ifdef USE_COLOR\n        if(color==vec3(0,0,1))\n            vColor.xyz = shirt;\n        else\n            vColor.xyz = color.xyz;\n\n        vUv = uv;\n        \n    #endif\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    #include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n    vNormal = normalize( transformedNormal );\n    #ifdef USE_TANGENT\n        vTangent = normalize( transformedTangent );\n        vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n    #endif\n#endif\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <displacementmap_vertex>\n\n    \n        if(color==vec3(0.12890625, 0.30859375, 0.3125)){\n            float val=max(0.0, 1.0976 - transformed.z);\n            transformed.xyz+=val*wind;\n            transformed.y*=1.0+sin((wind.z+transformed.z)*4.0)/2.0;\n\n        }\n        if(transformed.z<0.1){\n        \ttransformed.z-=sin(time+gl_Position.x*10.0)*0.2;\n        }\n    \n\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    vViewPosition = - mvPosition.xyz;\n    #include <worldpos_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>\n}`\n\n    var uniforms = _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.UniformsUtils.merge(\n        [_lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.ShaderLib.phong.uniforms,\n            {\n                shirt: { value: new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(1, 0, 0) },\n                wind: { value: new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 0) },\n                time: { value: 0.0 }\n\n            }\n        ]\n    );\n\n    uniforms.ambientLightColor.value = null;\n\n    let mat = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.ShaderMaterial({\n        uniforms: uniforms,\n        derivatives: false,\n        lights: true,\n        vertexColors: true,\n        vertexShader: meshphysical_vert,\n        fragmentShader: meshphysical_frag\n        //vertexShader: THREE.ShaderChunk.cube_vert,\n        //fragmentShader: THREE.ShaderChunk.cube_frag\n    });\n    setInterval(()=>{\n    \tmat.uniforms.time.value+=0.05;\n    },100)\n\n    return mat;\n}\n\n\n\n//# sourceURL=webpack://buup/./src/Experimental.js?");

/***/ }),

/***/ "./src/Helper.js":
/*!***********************!*\
  !*** ./src/Helper.js ***!
  \***********************/
/*! namespace exports */
/*! export getRandomColor [provided] [no usage info] [missing usage info prevents renaming] */
/*! export hexToRGB [provided] [no usage info] [missing usage info prevents renaming] */
/*! export hexToRGBFloat [provided] [no usage info] [missing usage info prevents renaming] */
/*! export rgbFloatToHex [provided] [no usage info] [missing usage info prevents renaming] */
/*! export rgbToHex [provided] [no usage info] [missing usage info prevents renaming] */
/*! export testBW [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"rgbToHex\": () => /* binding */ rgbToHex,\n/* harmony export */   \"rgbFloatToHex\": () => /* binding */ rgbFloatToHex,\n/* harmony export */   \"hexToRGB\": () => /* binding */ hexToRGB,\n/* harmony export */   \"hexToRGBFloat\": () => /* binding */ hexToRGBFloat,\n/* harmony export */   \"getRandomColor\": () => /* binding */ getRandomColor,\n/* harmony export */   \"testBW\": () => /* binding */ testBW\n/* harmony export */ });\nfunction hexToRGB(h) {\n    if(!h)\n        return [0,0,0]\n    if(typeof h !== 'string')\n        h = h.toString(16);\n\n    if(h.startsWith('#'))\n        h = h.substring(1)\n    else if(h.startsWith('0x'))\n        h = h.substring(2)\n\n    let r = 0,\n        g = 0,\n        b = 0;\n\n    // 3 digits\n    if(h.length == 3) {\n        r = \"0x\" + h[0] + h[0];\n        g = \"0x\" + h[1] + h[1];\n        b = \"0x\" + h[2] + h[2];\n\n        // 6 digits\n    } else if(h.length == 6) {\n        r = \"0x\" + h[0] + h[1];\n        g = \"0x\" + h[2] + h[3];\n        b = \"0x\" + h[4] + h[5];\n    }\n    let ar = [parseInt(r), parseInt(g), parseInt(b)]\n\n    return ar;\n}\n\nfunction hexToRGBFloat(h) {\n    let ar = hexToRGB(h);\n    return ar.map(v => { return v / 256.0 })\n}\n\nfunction componentToHex(c) {\n    var hex = c.toString(16);\n    return hex.length == 1 ? \"0\" + hex : hex;\n}\n\nfunction rgbToHex(r, g, b) {\n    return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\n}\n\nfunction rgbFloatToHex(r, g, b) {\n    r = Math.floor(r * 256);\n    g = Math.floor(g * 256);\n    b = Math.floor(b * 256);\n    return rgbToHex(r, g, b)\n}\n\nfunction getRandomColor() {\n    var letters = '0123456789ABCDEF';\n    var color = ''; //Math.random()>0.3?0x66B136:0x76610E;\n    for(var i = 0; i < 6; i++) {\n        let val;\n        /*if(i<2)\n            val=(Math.random() * 4)+4\n        else if(i<4)\n            val=(Math.random() * 6)+7\n        else*/\n        val = Math.random() * 16\n\n        color += letters[Math.floor(val)];\n    }\n    return parseInt(color);\n}\n\nfunction testBW(rgb) {\n    // http://stackoverflow.com/a/3943023/112731\n    let val = (rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114)\n    return val > 186\n}\n\n\n\n//# sourceURL=webpack://buup/./src/Helper.js?");

/***/ }),

/***/ "./src/HexManager.js":
/*!***************************!*\
  !*** ./src/HexManager.js ***!
  \***************************/
/*! namespace exports */
/*! export getModel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export hexCheck [provided] [no usage info] [missing usage info prevents renaming] */
/*! export hexPick [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export refreshCount [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setGrid [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setHexFocus [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setType [provided] [no usage info] [missing usage info prevents renaming] */
/*! export toggleSelector [provided] [no usage info] [missing usage info prevents renaming] */
/*! export toggleType [provided] [no usage info] [missing usage info prevents renaming] */
/*! export updateTerrain [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"hexCheck\": () => /* binding */ hexCheck,\n/* harmony export */   \"hexPick\": () => /* binding */ hexPick,\n/* harmony export */   \"toggleType\": () => /* binding */ toggleType,\n/* harmony export */   \"setType\": () => /* binding */ setType,\n/* harmony export */   \"getModel\": () => /* binding */ getModel,\n/* harmony export */   \"updateTerrain\": () => /* binding */ updateTerrain,\n/* harmony export */   \"setGrid\": () => /* binding */ setGrid,\n/* harmony export */   \"refreshCount\": () => /* binding */ refreshCount,\n/* harmony export */   \"toggleSelector\": () => /* binding */ toggleSelector,\n/* harmony export */   \"setHexFocus\": () => /* binding */ setHexFocus\n/* harmony export */ });\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _Helper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Helper.js */ \"./src/Helper.js\");\n/* harmony import */ var _PictureMaker_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PictureMaker.js */ \"./src/PictureMaker.js\");\n/* harmony import */ var _Online_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Online.js */ \"./src/Online.js\");\n/* harmony import */ var _AssetManager_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AssetManager.js */ \"./src/AssetManager.js\");\n/* harmony import */ var _Experimental_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Experimental.js */ \"./src/Experimental.js\");\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n\n\n\n\n\n\n\n\n\n\n//grass #6CA90B\n//grass2/tree leaf #A1C73A\n//grass3 #53963F\n//path #BEB55D\n//mountain/dirt #907B67\n///riverside #999065  river edged grass use grass3\n//river #659799\n// tree #B68A61\n//tree2 #8C735B\n\n/* house\nwall #B9AE8C\nroof #70665C\nhinges #20140E\ndoor #67483C\nwindow #67483C\n#703212\n\ncastle wall #797B7E\n*/\n\n\nvar chunks={};\nvar visibleChunks=[];\n//chunk {id,x,y,land,meta}\n\n\n\nvar hex = {}\n//var grid = [];\n//var meta=[];\nconst SCALE = 8\nconst SIZE = 32\nconst HALF_GRID = 12 * SCALE / 2\n\nvar hexType = 2;\n\nvar hexSelector\n\nvar hexDebounce;\nvar gridLineModel;\nvar metaMode=false;\n\nfunction init() {\n    window.updateTerrain=updateTerrain;\n    window.compress=compress;\n    window.decompress=decompress;\n    //console.log('water',Helper.get)\n    let testShader=_Experimental_js__WEBPACK_IMPORTED_MODULE_5__.makeShader();\n\n\n    _Render_js__WEBPACK_IMPORTED_MODULE_0__.loadModel('./assets/models/Hex.glb', m => {\n        console.log('got children ' + m.children.length)\n        let basicMat = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_6__.MeshStandardMaterial({ vertexColors: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_6__.VertexColors, metalness: 0, roughness: 1.0 }); // \n        //basicMat.shading = THREE.SmoothShading;\n        for(let i = 0; i < m.children.length; i++) {\n            //m.children[i]\n            let mm = m.children[i]\n            //mm.geometry.computeVertexNormals(true);\n            //m.children[i].scale.set(200,200,200)\n            //mm.rotation.x=Math.PI/2\n            mm.position.set(0, 0, 60)\n            mm.scale.set(SCALE, SCALE, SCALE)\n            //mm.material= new THREE.MeshBasicMaterial( {color: 0x20E89F, side: THREE.FrontSide} );\n\n            mm.material = testShader\n            mm.receiveShadow = true;\n            if(mm.name.startsWith('Water')){\n                //debugger;\n                //AssetManager.readColors(mm,[0.12890625, 0.30859375, 0.3125],[1,0,0])\n                //AssetManager.readColors(mm,Helper.hexToRGBFloat('#214f51'),[1,0,0])\n                //AssetManager.readColors(mm,[0.12890625, 0.30859375, 0.31640625],[1,0,0])\n                //AssetManager.readColors(mm,Helper.hexToRGBFloat('#659799')[1,0,0])\n                //console.log('replace!')\n                \n            }\n            if(mm.name.startsWith(\"Mount\") || mm.name.startsWith(\"Tree\") || mm.name.startsWith(\"House\") || mm.name.startsWith(\"Wall\"))\n                mm.castShadow = true;\n            //Render.addModel(mm)\n            if(mm.name.endsWith('H')){\n                hex[mm.name+'2'] = mm;\n                hex[mm.name+'3'] = mm;\n                mm.name+='1'\n\n            }\n\n            hex[mm.name] = mm;\n\n            let colors = [];\n            if(mm.geometry) {\n\n\n                let count = mm.geometry.attributes.color.array.length / 4\n                for(let i = 0; i < count; i++) {\n                    let n = i * 4;\n                    let vr = mm.geometry.attributes.color.array[0 + n];\n                    let vg = mm.geometry.attributes.color.array[1 + n];\n                    let vb = mm.geometry.attributes.color.array[2 + n];\n                    //let va=mm.geometry.attributes.color.array[3+n];\n                    let val = _Helper_js__WEBPACK_IMPORTED_MODULE_1__.rgbFloatToHex(vr, vg, vb)\n                    colors[val] = val\n                }\n                /*if(mm.name.startsWith(\"Water\"))\n                    console.log('water ',colors)*/\n            }\n            /*\n            #1e4c0f: \"#1e4c0f\"\n#4c4824: \"#4c4824\"\n#164e0c: \"#164e0c\"\n#164e0d: \"#164e0d\"\n#164f0c: \"#164f0c\"\n#174e0d: \"#174e0d\"\n#184e0d: \"#184e0d\"\n#214f50: \"#214f50\"\n#214f51: \"#214f51\"\n#274e4a: \"#274e4a\"\n#18510a: \"#18510a\"\n#225052: \"#225052\"\n#266500: \"#266500\"\n#504722: \"#504722\"\n#514721: \"#514721\"*/\n/*\n#4a4827: \"#4a4827\"\n#174e0d: \"#174e0d\"\n#214f51: \"#214f51\"\n#266500: \"#266500\"\n#504722: \"#504722\"\n#514721: \"#514721\"*/\n\n\n            //console.log(vr,vg,vb,va)\n            //let val=Helper.rgbFloatToHex(mm.geometry.attributes.color.array[0],mm.geometry.attributes.color.array[1],mm.geometry.attributes.color.array[2])\n            //console.log(val)\n\n\n\n        }\n        /*hex['House_H2']=hex['House_H1'];hex['House_H3']=hex['House_H1'];\n        hex['Wall_H2']=hex['Wall_H1'];hex['Wall_H3']=hex['Wall_H1'];\n        hex['Water_H2']=hex['Water_H1'];hex['Water_H3']=hex['Water_H1'];*/\n\n        function clik(d, i) {\n            d.addEventListener('click', ev => {\n                let target = ev.target;\n                if(!target.classList.contains('hex')) {\n                    target = target.parentElement\n                }\n                target.classList.remove('jelloAnim')\n                void target.offsetWidth;\n                target.classList.add('jelloAnim')\n                setType(i)\n                metaMode=false;\n            })\n        }\n\n        let doms = document.querySelectorAll('.hex')\n        doms[0].appendChild(_PictureMaker_js__WEBPACK_IMPORTED_MODULE_2__.generate(getModel('Grass_O1')));\n        clik(doms[0], 1);\n        doms[1].appendChild(_PictureMaker_js__WEBPACK_IMPORTED_MODULE_2__.generate(getModel('Tree_N'), 75, -75));\n        clik(doms[1], 4);\n        doms[2].appendChild(_PictureMaker_js__WEBPACK_IMPORTED_MODULE_2__.generate(getModel('Grass_P1')));\n        clik(doms[2], 2);\n        doms[3].appendChild(_PictureMaker_js__WEBPACK_IMPORTED_MODULE_2__.generate(getModel('Mount_N'), 90));\n        clik(doms[3], 3);\n        doms[4].appendChild(_PictureMaker_js__WEBPACK_IMPORTED_MODULE_2__.generate(getModel('Water_N')));\n        clik(doms[4], 0);\n        doms[5].appendChild(_PictureMaker_js__WEBPACK_IMPORTED_MODULE_2__.generate(getModel('House_N')));\n        clik(doms[5], 5);\n        doms[6].appendChild(_PictureMaker_js__WEBPACK_IMPORTED_MODULE_2__.generate(getModel('Wall_N'),65,-90));\n        clik(doms[6], 6);\n\n       doms[7].style.backgroundColor='red'\n\n       doms[7].addEventListener('click', ev => {\n                let target = ev.target;\n                if(!target.classList.contains('hex')) {\n                    target = target.parentElement\n                }\n                target.classList.remove('jelloAnim')\n                void target.offsetWidth;\n                target.classList.add('jelloAnim')\n                metaMode=true;\n            })\n\n        clearLand()\n\n        let firstChunk=createChunk(0,0)\n\n        processLand(firstChunk);\n\n\n\n\n\n        //window.m=m;//.children[0]\n    })\n    pointerInit();\n    hexLines();\n\n}\n\nfunction pointerInit() {\n    let pointerMat = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_6__.MeshBasicMaterial({ color: 0x4AE13A });\n\n    let g = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_6__.Group();\n    let p = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_6__.PlaneBufferGeometry(.6, SCALE);\n    let m = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_6__.Mesh(p, pointerMat)\n    m.position.set(SCALE, 0, 0)\n    g.add(m)\n    for(let i = 0; i < 6; i++) {\n        let n = m.clone();\n        n.rotation.z = i * Math.PI / 3\n\n        n.position.set(Math.cos(n.rotation.z) * SCALE, Math.sin(n.rotation.z) * SCALE, 0)\n        g.add(n)\n    }\n    g.position.z += 6;\n    _Render_js__WEBPACK_IMPORTED_MODULE_0__.addModel(g)\n    hexSelector = g;\n    hexSelector.visible = false;\n}\n\nfunction hexLines() {\n    let radius = 1;\n    let skew = SCALE * radius * Math.sqrt(3) / 2;\n\n\n    //dummy.position.set(offsetx+i*9,0,offsetz+j*skew*2 +i*skew);\n    //let m=hex[prefix+st].clone();\n    //m.position.set((-HALF_GRID)+x*skew*2 +y*skew,y*SCALE*1.5,-SCALE*.2)\n\n    var geometry = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_6__.Geometry();\n    let my = SCALE / 2;\n    for(let x = 0; x < SIZE; x++) {\n        for(let y = 0; y < SIZE; y++) {\n            geometry.vertices.push(new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_6__.Vector3((-HALF_GRID + skew) + x * skew * 2 + y * skew, -my + y * SCALE * 1.5, .8))\n            geometry.vertices.push(new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_6__.Vector3((-HALF_GRID + skew) + x * skew * 2 + y * skew, my + y * SCALE * 1.5, .8))\n            geometry.vertices.push(new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_6__.Vector3((-HALF_GRID + skew) + x * skew * 2 + y * skew, my + y * SCALE * 1.5, .8))\n            geometry.vertices.push(new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_6__.Vector3((-HALF_GRID) + x * skew * 2 + y * skew, SCALE + y * SCALE * 1.5, .8))\n            geometry.vertices.push(new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_6__.Vector3((-HALF_GRID) + x * skew * 2 + y * skew, SCALE + y * SCALE * 1.5, .8))\n            geometry.vertices.push(new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_6__.Vector3((-HALF_GRID - skew) + x * skew * 2 + y * skew, my + y * SCALE * 1.5, .8))\n        }\n    }\n    /*geometry.vertices.push( new THREE.Vector3( -2, 0, 0 ) );\n\tgeometry.vertices.push( new THREE.Vector3( 0, 2, 0 ) );\n\tgeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ) );\n\tgeometry.vertices.push( new THREE.Vector3( 2, 0, 0 ) );*/\n\n    var material = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_6__.LineBasicMaterial({ color: 0xffffff });\n    gridLineModel = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_6__.LineSegments(geometry, material);\n    //Render.addModel( line );\n}\n\nfunction setGrid(bool) {\n    if(bool) {\n        _Render_js__WEBPACK_IMPORTED_MODULE_0__.addModel(gridLineModel);\n    } else {\n        _Render_js__WEBPACK_IMPORTED_MODULE_0__.removeModel(gridLineModel);\n    }\n}\n\nfunction place(chunk,x, y, t) {\n    console.log('stuff ',chunk.x,chunk.y,x,y)\n    chunk.grid[x][y] = t\n    chunk.dirty=true;\n    processLand(chunk);\n}\nfunction alter(chunk,x, y, t) {\n    chunk.meta[x][y] = t\n    processLand(chunk);\n}\n\nfunction processLand(chunk) {\n    SEED = 6;\n    let offsetX=chunk.x*SIZE\n    let offsetY=chunk.y*SIZE\n    modelClear(chunk)\n    for(let i = 0; i < chunk.grid.length; i++) {\n        for(let j = 0; j < chunk.grid.length; j++) {\n            let n = chunk.grid[i][j];\n            let rando = Math.floor(chunk.meta[i][j]/6)+1;\n            let turner = chunk.meta[i][j]%6\n            if(n != 1) { //hex coordinate system follows, hang tight it's a bumpy ride!\n                //if(i==2 && j==2)\n                //debugger\n                let l, r, tl, tr;\n\n                l = (i > 0) ? chunk.grid[i - 1][j] : 0\n                // pure hex x left right\n                r = (i < chunk.grid.length - 1) ? chunk.grid[i + 1][j] : 0\n\n\n                //land('P1',i,j,1)\n\n                //upper hex edges, left and right\n\n                if(j < chunk.grid.length - 1) {\n\n                    tl = (i > 0) ? chunk.grid[i - 1][j + 1] : 0\n                    tr = chunk.grid[i][j + 1]\n                } else {\n                    tl = 0;\n                    tr = 0;\n                }\n\n                //land('T1',i,j,1)\n\n                //lower hex edges, left and right, notice the farther then normal postive check due to our skewed hex design\n\n                let bl, br;\n                if(j > 0) {\n                    bl = chunk.grid[i][j - 1]\n                    br = (i < chunk.grid.length - 1) ? chunk.grid[i + 1][j - 1] : 0\n                } else {\n                    bl = 0;\n                    br = 0;\n                }\n                l = l == n;\n                r = r == n;\n                tr = tr == n;\n                br = br == n;\n                bl = bl == n;\n                tl = tl == n;\n\n                let st = (tl ? '1' : '0') + (l ? '1' : '0') + (bl ? '1' : '0') + (br ? '1' : '0') + (r ? '1' : '0') + (tr ? '1' : '0');\n\n\n                //let total=l?1:0 + r?1:0 + tl?1:0 + tr?1:0 + bl?1:0 + br?1:0;\n                let start = -1;\n                let index = 0;\n                let circle = [tl, tr, r, br, bl, l]\n                let branches = [];\n                let hole = 5;\n                circle.forEach((b, i) => {\n                    if(b) {\n                        branches.push(i)\n                        if(start == -1)\n                            start = i;\n\n                        index = i;\n                    } else\n                        hole = i\n                })\n                //console.log('grid %i %i %s branches %i',i,j,st,branches.length)\n\n                let letter = 'N'\n                let type = ''\n                if(branches.length == 6) {\n                    land(chunk,n, 'H' + rando, i, j, turner);\n                } else if(branches.length > 0) {\n                    let distances = [];\n\n                    var last = branches[0]\n                    for(let i = 1; i < branches.length; i++) {\n                        distances.push((branches[i] - last) - 1)\n                        last = branches[i]\n                    }\n                    //console.log(distances)\n\n                    let r = start == -1 ? 0 : start;\n\n                    switch (branches.length) {\n                        case 1:\n                            letter = 'E'\n                            r += 0;\n                            break;\n\n                        case 2:\n                            letter = 'P';\n                            if(distances[0] == 0) {\n                                type = '3';\n                                r += 0;\n                            } else if(distances[0] == 1) {\n                                type = '2';\n                                r += 0;\n                            } else if(distances[0] == 2) {\n                                type = '1';\n                                r += 0;\n                            } else if(distances[0] == 3) {\n                                type = '2';\n                                r += 4;\n                            } else {\n                                type = '3';\n                                r += 5;\n                            }\n                            break;\n\n                        case 3:\n                            letter = 'T'; //3 paths\n                            if(distances[0] == 0) {\n                                if(distances[1] == 0) {\n                                    type = 1;\n                                    r += 0;\n                                } else if(distances[1] == 3) {\n                                    type = 1;\n                                    r += 5;\n                                } else if(distances[1] == 1) {\n                                    type = 3;\n                                    r += 3;\n                                } else if(distances[1] == 2) {\n                                    type = 2;\n                                    r += 4;\n                                }\n                            } else if(distances[0] == 1) {\n                                if(distances[1] == 0) {\n                                    type = 2; //r+=0;\n                                } else if(distances[1] == 1) {\n                                    type = 4; //r+=0;\n                                } else if(distances[1] == 2) {\n                                    type = 3;\n                                    r += 2;\n                                }\n                            } else if(distances[0] == 2) {\n                                if(distances[1] == 0) {\n                                    type = 3;\n                                    r += 0;\n                                } else if(distances[1] == 1) {\n                                    type = 2;\n                                    r += 3;\n                                }\n                            } else {\n                                type = 1;\n                                r += 4;\n                            }\n                            r = r % 6;\n                            break;\n\n                        case 4:\n                            letter = 'Q'; //4 path\n                            if(distances[0] == 0) {\n                                if(distances[1] == 0) {\n                                    if(distances[2] == 0) {\n                                        type = 1;\n                                        r += 0\n                                    } else if(distances[2] == 1) {\n                                        type = 3;\n                                        r += 2;\n                                    } else if(distances[2] == 2) {\n                                        type = 1;\n                                        r += 5;\n                                    }\n                                } else if(distances[1] == 1) {\n                                    if(distances[2] == 0) {\n                                        type = 2;\n                                        r += 4;\n                                    } else if(distances[2] == 1) {\n                                        type = 3;\n                                        r += 1\n                                    }\n                                } else { //}( 2==2)\n                                    type = 1;\n                                    r += 4;\n                                }\n                            } else if(distances[0] == 1) {\n                                if(distances[1] == 0) {\n                                    if(distances[2] == 0) {\n                                        type = 3;\n                                        r += 4;\n\n                                    } else {\n                                        type = 2;\n                                    }\n                                } else { //1 1 0\n                                    type = 3\n                                }\n                            } else {\n                                type = 1;\n                                r += 3;\n                            }\n                            r = r % 6;\n                            break;\n\n                        case 5:\n                            letter = 'F';\n                            r = hole + 1;\n                            break;\n\n\n\n                    }\n                    land(chunk,n, letter + type, i+offsetX, j+offsetY, r)\n                } else {\n                    land(chunk,n, 'N', i+offsetX, j+offsetY, turner)\n                }\n\n\n\n                //rotation 0 tl\n                //1 l\n                //2 bl\n                //3 br\n                //4 r\n                //5 tr\n                /*\n                \t\t\t\tswitch(total){\n                \t\t\t\t\tcase 1: land('P2',i,j); break;\n                \t\t\t\t\tcase 2: land('P1',i,j); break;\n                \t\t\t\t\tcase 3: land('T1',i,j); break;\n                \t\t\t\t\tcase 4: land('Q1',i,j); break;\n                \t\t\t\t\tcase 5: land('F1',i,j); break;\n                \t\t\t\t\tcase 6: land('H',i,j); break;\n                \t\t\t\t\tdefault: land('O1',i,j);\n                \t\t\t\t}*/\n\n                //land('Q1',i,j,1)\n\n\n                //no neighbors! \n                //land('P1',i,j,n-2)\n\n            } else if(n == 1) {\n                //SEED=i*j\n                land(chunk,n, 'O' + rando, i+offsetX, j+offsetY, turner) //,Math.floor(Math.random()*6))\n            }\n        }\n\n    }\n}\n\nfunction land(chunk,n, st, x, y, r) {\n    //n==1 grass, n==2 path, n==3 mount\n    let radius = 1;\n    let skew = SCALE * radius * Math.sqrt(3) / 2;\n    let prefix = \"Grass_\";\n    switch (n) {\n        case 1:\n            prefix = \"Grass_\";\n            break; //more efficient as it's most common\n        case 0:\n            prefix = \"Water_\";\n            break;\n        case 3:\n            prefix = \"Mount_\";\n            break;\n        case 4:\n            prefix = \"Tree_\";\n            break;\n        case 5:\n            prefix = \"House_\";\n            break;\n        case 6:\n            prefix = \"Wall_\";\n            break;\n    }\n\n    //dummy.position.set(offsetx+i*9,0,offsetz+j*skew*2 +i*skew);\n    let picked = hex[prefix + st];\n    if(picked) {\n        let m = picked.clone();\n\n        m.position.set((-HALF_GRID) + x * skew * 2 + y * skew, y * SCALE * 1.5, -SCALE * .2) //z -SCALE*.2\n        //console.log('pos ')\n       /* if( m.position.x<leastx)\n            leastx=m.position.x\n        if( m.position.x>mostx)\n            mostx=m.position.x\n\n        if( m.position.y<leasty)\n            leasty=m.position.y\n        if( m.position.y>mosty)\n            mosty=m.position.y\n\n        console.log('least ',leastx,leasty,mostx,mosty)*/\n\n\n        if(r) { //sp always not 0\n            r = 6 - r;\n            m.rotation.z = r * Math.PI / 3\n        }\n\n        chunk.modelReferences.push(m)\n        _Render_js__WEBPACK_IMPORTED_MODULE_0__.addModel(m)\n    } else {\n        console.log('invalid model ' + prefix + st)\n    }\n\n}\nvar leastx=9999,mostx=-9999,leasty=9999,mosty=-9999\n\nfunction modelClear(chunk) {\n    chunk.modelReferences.forEach(m => {\n        _Render_js__WEBPACK_IMPORTED_MODULE_0__.removeModel(m)\n    })\n    chunk.modelReferences = [];\n}\n\nfunction clearLand() {\n\n   /* modelClear()\n    for(let i = 0; i < SIZE; i++) {\n        grid[i] = [];\n        meta[i]=[];\n        for(let j = 0; j < SIZE; j++) {\n            grid[i][j] = 1\n            meta[i][j] = Math.floor(Math.random()*18)\n        }\n    }*/\n}\n\nfunction hexCheck(x, y,skipSelector) {\n\n    let radius = 1;\n    let skew = SCALE * radius * Math.sqrt(3) / 2;\n    //m.position.set(-120+x*skew*2 +y*skew,-120+y*30,40)\n    let y2 = Math.floor((SCALE + y) / (SCALE * 1.5));\n    let x2 = Math.floor(((x + HALF_GRID + SCALE) - y2 * skew) / (skew * 2))\n    if(!skipSelector)\n    hexSelector.position.set(-HALF_GRID + x2 * skew * 2 + y2 * skew, y2 * SCALE * 1.5, .8)\n\n    return [x2, y2]\n\n\n}\nlet lastPick = { x: 0, y: 0 }\nlet hexChangeCount = 0;\n\nfunction hexPick(x, y) {\n    let [x2, y2] = hexCheck(x, y)\n\n    let cx=Math.floor(x2/SIZE)\n    let cy=Math.floor(y2/SIZE)\n    x2=x2%SIZE\n    y2=y2%SIZE\n    if(x2<0)\n        x2+=SIZE\n\n    if(y2<0)\n        y2+=SIZE\n    let chunk=chunks[cx+','+cy]\n    if(!chunk)\n        chunk=createChunk(cx,cy)\n\n\n    //console.log('click',x,y,x2,y2)\n    let bounds = chunk.grid.length;\n    if(!(x2 == lastPick.x && y2 == lastPick.y) && x2 > -1 && y2 > -1 && x2 < bounds && y2 < bounds) {\n        /*let v=grid[x2][y2];\n\t\t\n        if(v==hexType)\t\n        \tv=1\n        else\n        \tv=hexType*/\n\n        //if(hexChangeCount==0)\n\n        if(metaMode){\n            let v=chunk.meta[x2][y2]+1\n            if(v>=18)\n                v=0;\n             alter(chunk,x2, y2, v)\n        }else{\n            if(hexChangeCount == 0 && chunk.grid[x2][y2] == hexType) {\n                place(chunk,x2, y2, 1)\n            } else {\n                place(chunk,x2, y2, hexType)\n            }\n            hexChangeCount++;\n        }\n        \n\n        /*if((x2==lastPick.x && y2==lastPick.y)){\n\n        }*/\n\n\n\n\n        lastPick.x = x2;\n        lastPick.y = y2;\n        if(hexDebounce) {\n            clearTimeout(hexDebounce)\n            hexDebounce = null\n        }\n        hexDebounce = setTimeout(function() {\n            //Online.terrain(0, compress(grid))\n        }, 2000)\n\n    }\n}\n\nfunction refreshCount() {\n    hexChangeCount = 0;\n    lastPick.x = 0;\n    lastPick.y = 0;\n}\n\n\n\n\n\n\n\nvar SEED = 6;\n\n// in order to work 'Math.seed' must NOT be undefined,\n// so in any case, you HAVE to provide a Math.seed\nfunction randomSeed(max, min) {\n    max = max || 1;\n    min = min || 0;\n\n    SEED = (SEED * 9301 + 49297) % 233280;\n    var rnd = SEED / 233280;\n\n    return min + rnd * (max - min);\n}\n\n\nfunction toggleType() {\n    if(hexType == 2)\n        hexType = 3\n    else if(hexType == 3)\n        hexType = 4\n    else if(hexType == 4)\n        hexType = 0\n    else if(hexType == 0)\n        hexType = 1;\n    else\n        hexType = 2\n}\n\nfunction setType(i) {\n    hexType = i;\n    console.log('set hex ' + hexType)\n}\n\nfunction getModel(st) {\n    return hex[st].clone();\n}\n\nfunction updateTerrain(chunk, data) {\n    //grid = decompress(data)\n\n    //processLand();\n}\n\nfunction toggleSelector(bool) {\n    hexSelector.visible = bool;\n}\n\n\nfunction compress(array){\n    let st=''\n    for(let i=0;i<array.length;i++){\n        for(let j=0;j<array.length;j++){\n            st+=String.fromCharCode(array[i][j]+48) \n        }\n    }\n    //console.log('hex out ',st)\n    return st;\n}\nfunction decompress(st){\n    //Math.sqrt(st.length)\n    let size=SIZE;\n    let array=[];\n    for(let i=0;i<size;i++){\n        array[i]=[]\n        for(let j=0;j<size;j++){\n            array[i][j]=st.charCodeAt(i*size+j)-48;////String.fromCharCode(array[i][j])\n        }\n    }\n    return array;\n}\n\n\n\n//////\nfunction createChunk(x,y){\n    let id=x+','+y\n    let grid=[];\n    let meta=[];\n    let modelReferences=[];\n    for(let i = 0; i < SIZE; i++) {\n        grid[i] = [];\n        meta[i]=[];\n        for(let j = 0; j < SIZE; j++) {\n            grid[i][j] = 1\n            meta[i][j] = Math.floor(Math.random()*18)\n        }\n    }\n    let visible=true;\n    let skew = SCALE  * Math.sqrt(3) / 2;\n    let actualX=(((-HALF_GRID) + x * skew * 2) + (y * skew)  )*SIZE\n    let actualY=(y * SCALE * 1.5 )*SIZE\n\n    let obj={id,x,y,actualX,actualY,grid,meta,modelReferences,visible};\n    chunks[id]=obj\n    visibleChunks.push(obj)\n    return obj;\n}\n\nfunction setHexFocus(pos){\n\n\n    let [x,y]=hexCheck(pos.x,pos.y)\n    x/=SIZE\n    y/=SIZE\n\n    \n\n    let all=Object.values(chunks)\n\n    all.forEach(chunk=>{\n        let xx=chunk.x-x\n        let yy=chunk.y-y\n        let r=Math.sqrt(xx*xx + yy*yy)\n        if(r<2){\n             if(!chunk.visible){\n                chunk.visible=true;\n                processLand(chunk)\n                 if(chunk.plane)\n                    chunk.plane.visible=false;\n             }\n        }else {\n            if(chunk.visible){\n                chunk.visible=false;\n                if(chunk.dirty && chunk.plane){\n                    console.log('dump plane')\n                    _Render_js__WEBPACK_IMPORTED_MODULE_0__.removeModel(chunk.plane)\n                    delete chunk.plane\n                }\n\n                if(!chunk.plane){\n                    chunk.plane=_PictureMaker_js__WEBPACK_IMPORTED_MODULE_2__.processHexChunk(chunk)\n                    console.log('new plane')\n                    _Render_js__WEBPACK_IMPORTED_MODULE_0__.addModel(chunk.plane)\n                    chunk.dirty=false;\n                }\n                modelClear(chunk)\n                console.log('show plane')\n                chunk.plane.visible=true\n                \n            }\n        }\n    })\n}\n\n\n\n\n\n\n\n//# sourceURL=webpack://buup/./src/HexManager.js?");

/***/ }),

/***/ "./src/Login.js":
/*!**********************!*\
  !*** ./src/Login.js ***!
  \**********************/
/*! namespace exports */
/*! export hide [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export show [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"hide\": () => /* binding */ hide,\n/* harmony export */   \"show\": () => /* binding */ show\n/* harmony export */ });\n/* harmony import */ var _Online_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Online.js */ \"./src/Online.js\");\n/* harmony import */ var _Helper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Helper.js */ \"./src/Helper.js\");\n/* harmony import */ var _PlayerManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PlayerManager.js */ \"./src/PlayerManager.js\");\n/* harmony import */ var _BarUI_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./BarUI.js */ \"./src/BarUI.js\");\n/*\n<div class=\"list\">\n    <div class=\"list-item\"><span>Hello</span>\n        <div id=\"login-junk\">\n            \n        </div></div>\n</div>*/\n\n\n\n\n\n\n\nvar input\n\nfunction init() {\n    initSheet();\n\n    let login = document.querySelector('#login-junk')\n    login.style.display = 'none'\n    let list = document.createElement('div');\n    list.className = 'list'\n\n    //let login = document.createElement('div')\n    //login.id = 'login-junk'\n    //\n    input = login.querySelector('input')\n    if(detectmob()) {\n        input.setAttribute('readonly', 'readonly')\n    }\n    //let input = document.createElement('input')\n    //input.setAttribute('type', 'password')\n    //input.setAttribute('size', '4')\n    //input.setAttribute('maxlength', '4')\n    //login.appendChild(input)\n\n    makeNum(login)\n    let loginMenu = document.querySelector('#login-menu')\n    loginMenu.appendChild(list)\n    loginMenu.appendChild(login)\n    _BarUI_js__WEBPACK_IMPORTED_MODULE_3__.hide();\n\n\n    fetch('/getUsers', {\n        method: 'post',\n        /*headers: {\n          'Content-Type': 'application/json'\n        },*/\n        //body: JSON.stringify({username:username,password:pass})\n    }).then(function(response) {\n        return response.json();\n    }).then(function(data) {\n        if(data) {\n            _PlayerManager_js__WEBPACK_IMPORTED_MODULE_2__.init(data.users)\n            data.users.forEach(user => {\n                let dom = document.createElement('div');\n                dom.className = 'list-item';\n                let color = user.color;\n                dom.style.backgroundColor = color;\n                let bool = _Helper_js__WEBPACK_IMPORTED_MODULE_1__.testBW(_Helper_js__WEBPACK_IMPORTED_MODULE_1__.hexToRGB(color))\n\n                dom.style.color = bool ? '#000000' : '#FFFFFF';\n                dom.style.textShadow = '1px 1px 2px ' + (bool ? '#FFFFFF' : '#000000');\n\n\n                dom.addEventListener('click', ev => {\n                    let login = document.querySelector('#login-junk')\n                    login.style.display = ''\n                    login.parentElement.classList.remove('bigger-item')\n                    dom.appendChild(login)\n                    dom.classList.add('bigger-item')\n                    ev.stopPropagation();\n                    input.focus();\n                })\n\n                let port = document.createElement('div');\n                port.className = 'list-portrait';\n                dom.appendChild(port)\n\n                let span = document.createElement('span');\n                span.innerText = user.username;\n                dom.appendChild(span)\n                list.appendChild(dom);\n            })\n        }\n    }).catch(e => {\n        console.error('ERROR' + e);\n    });\n\n\n    /*\n        for(let i = 0; i < 20; i++) {\n            let dom = document.createElement('div');\n            dom.className = 'list-item';\n            let color = getRandomColor();\n            dom.style.backgroundColor = color;\n            let bool = testBW(hexToRGB(color))\n\n            dom.style.color = bool ? '#000000' : '#FFFFFF';\n            dom.style.textShadow = '1px 1px 2px ' + (bool ? '#FFFFFF' : '#000000');\n\n\n            dom.addEventListener('click', ev => {\n                let login = document.querySelector('#login-junk')\n                login.style.display=''\n                login.parentElement.classList.remove('bigger-item')\n                dom.appendChild(login)\n                dom.classList.add('bigger-item')\n                ev.stopPropagation();\n            })\n\n            let port = document.createElement('div');\n            port.className = 'list-portrait';\n            dom.appendChild(port)\n\n            let span = document.createElement('span');\n            span.innerText = text();\n            dom.appendChild(span)\n            list.appendChild(dom);\n        }*/\n}\n\nfunction text() {\n    let r = Math.random() * 32;\n    let st = ''\n    for(let i = 0; i < r; i++) {\n        st += Math.random() > 0.2 ? String.fromCharCode(110 + Math.random() * 6) : ' ';\n    }\n    return st;\n}\n\n/*\nfunction hexToRGB(h) {\n\n    if(h.startsWith('0x'))\n        h = h.substring(1)\n    let r = 0,\n        g = 0,\n        b = 0;\n\n    // 3 digits\n    if(h.length == 4) {\n        r = \"0x\" + h[1] + h[1];\n        g = \"0x\" + h[2] + h[2];\n        b = \"0x\" + h[3] + h[3];\n\n        // 6 digits\n    } else if(h.length == 7) {\n        r = \"0x\" + h[1] + h[2];\n        g = \"0x\" + h[3] + h[4];\n        b = \"0x\" + h[5] + h[6];\n    }\n    let ar = [parseInt(r), parseInt(g), parseInt(b)]\n\n    return ar;\n}*/\n\n\n\nfunction makeNum(ele) {\n    let row = document.createElement('div');\n    row.className = 'num-row'\n\n    for(let i = 1; i <= 10; i++) {\n        let item = document.createElement('div')\n        item.innerText = i == 10 ? 0 : i;\n        item.className = 'num'\n        row.appendChild(item)\n        item.addEventListener('click', ev => {\n            ev.stopPropagation \n            if(input.value.length < 4)\n                input.value += ev.target.innerText\n        })\n        // if(i%3==0){\n        //  row=document.createElement('div');\n        // }\n    }\n    let del = document.createElement('div')\n    del.className = 'num'\n    del.innerText = 'C'\n    del.addEventListener('click', ev => {\n        ev.stopPropagation();\n        input.value = ''\n    })\n    row.appendChild(del)\n\n    let go = document.createElement('div')\n    go.className = 'num'\n    go.innerText = 'Go'\n    go.style.backgroundColor = '#fff5';\n    go.addEventListener('click', ev => {\n        ev.stopPropagation();\n        let span = ev.target.parentElement.parentElement.parentElement.querySelector('span')\n        if(span) {\n            console.log('login with ', span.innerText, ':', input.value)\n            _Online_js__WEBPACK_IMPORTED_MODULE_0__.login(span.innerText, input.value)\n        }\n    })\n    row.appendChild(go)\n\n\n    ele.appendChild(row)\n}\n\n\n\nfunction initSheet() {\n\n    var sheet = document.createElement('style')\n    sheet.innerHTML = `\n        .list-item{\n            border-radius: 16px;\n            background-color: white;\n            box-shadow: 6px 16px 1px #0005;\n            max-width: calc(100% - 128px);\n            transform: translate(-50%,0);// rotate3d(1,0,0,0deg);\n            margin: 32px 0 16px 0;\n            position: relative;\n            padding: 16px;\n            left: 50%;\n            font-weight: bold;\n            font-size: 2em;\n            text-shadow: 1px 1px 2px black;\n            text-align: center;\n            font-family: 'openBold', serif;\n            transition: 0.2s transform;\n\n        }\n        .list-item span{\n            margin: 32px 0 32px 0;\n        }\n        .list-item:hover{\n            transform: translate(-50%,0) scale(1.05,1.05);// rotate3d(1,0,0,0deg);\n        }\n        .list{\n            width: 100%;\n            height: 100%;\n            position: absolute;\n            overflow-y: scroll;\n        }\n        .list *{\n            user-select: none;\n        }\n        .list-portrait{\n            left: 8px;\n            top: 8px;\n            position: absolute;\n            display: inline-block;\n            width: 64px;\n            height: 64px;\n            border-radius: 32px;\n            background-color: white;\n            box-shadow: 6px 16px 1px #0005;\n            overflow: hidden;\n            box-sizing: border-box;\n            border: white solid 6px;\n            transform: translate(-50%,-50%);\n            transition: left 0.4s;\n        }\n        .bigger-item .list-portrait{\n            left: 50% !important;\n            top: 0px !important;\n        }\n        .login-popin{\n            position: fixed;\n            border-radius: 16px;\n            background-color: white;\n            box-shadow: 6px 16px 1px #0005;\n        }\n        #login-junk{\n            max-width: 500px;\n            height: 300px;\n            transform: translate(-50%,0);\n            position: relative;\n            left: 50%;\n        }\n        .num{\n            margin-left: 0 !important;\n            border-radius: 28px;\n            font-size: 36px;\n            background-color: #0005;\n            width: 56px;\n            height: 56px;\n            display: inline-block;\n            overflow: hidden;\n            cursor: pointer;\n        }\n        .num-row{\n            width: 168px;\n            height: 168px;\n            position: absolute;\n            left: 50%;\n            transform: translate(-50%,0);\n        }\n        input{\n            text-align: center;\n            font-size: 16px;\n            outline: none;\n            border: none;\n            border-bottom: black 6px solid;\n            margin: 16px;\n            background-color: transparent;\n            color: inherit;\n        }\n        `\n    document.body.appendChild(sheet);\n}\n\nfunction hide() {\n    document.querySelector('#login-menu').style.display = 'none';\n}\n\nfunction show() {\n    document.querySelector('#login-menu').style.display = 'block';\n}\n\n\nfunction detectmob() {\n    if(navigator.userAgent.match(/Android/i) ||\n        navigator.userAgent.match(/webOS/i) ||\n        navigator.userAgent.match(/iPhone/i) ||\n        navigator.userAgent.match(/iPad/i) ||\n        navigator.userAgent.match(/iPod/i) ||\n        navigator.userAgent.match(/BlackBerry/i) ||\n        navigator.userAgent.match(/Windows Phone/i)\n    ) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n\n\n//# sourceURL=webpack://buup/./src/Login.js?");

/***/ }),

/***/ "./src/Main.js":
/*!*********************!*\
  !*** ./src/Main.js ***!
  \*********************/
/*! namespace exports */
/*! export controls [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"controls\": () => /* binding */ controls\n/* harmony export */ });\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _HexManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HexManager.js */ \"./src/HexManager.js\");\n/* harmony import */ var _Control_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Control.js */ \"./src/Control.js\");\n/* harmony import */ var _Online_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Online.js */ \"./src/Online.js\");\n/* harmony import */ var _PictureMaker_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PictureMaker.js */ \"./src/PictureMaker.js\");\n/* harmony import */ var _Physics_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Physics.js */ \"./src/Physics.js\");\n/* harmony import */ var _UI_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./UI.js */ \"./src/UI.js\");\n/* harmony import */ var _BarUI_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./BarUI.js */ \"./src/BarUI.js\");\n/* harmony import */ var _Login_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Login.js */ \"./src/Login.js\");\n/* harmony import */ var _Chat_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Chat.js */ \"./src/Chat.js\");\n/* harmony import */ var _Settings_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Settings.js */ \"./src/Settings.js\");\n/* harmony import */ var _MakerMenu_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./MakerMenu.js */ \"./src/MakerMenu.js\");\n/* harmony import */ var _AssetManager_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./AssetManager.js */ \"./src/AssetManager.js\");\n/* harmony import */ var _Drawer_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./Drawer.js */ \"./src/Drawer.js\");\n/* harmony import */ var _Equipment_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./Equipment.js */ \"./src/Equipment.js\");\n/* harmony import */ var _Character_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./Character.js */ \"./src/Character.js\");\n/* harmony import */ var _Helper_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./Helper.js */ \"./src/Helper.js\");\n/* harmony import */ var _Experimental_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./Experimental.js */ \"./src/Experimental.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar mainDom;\n\nfunction init() {\n    mainDom=document.querySelector('#main');\n    _UI_js__WEBPACK_IMPORTED_MODULE_7__.init(mainDom)\n    try{\n\n\n    \n    controls = {};\n    \n\n    window.onError = function(message, source, lineno, colno, error) {\n        _UI_js__WEBPACK_IMPORTED_MODULE_7__.systemMessage(message,'error')\n    }\n    _Physics_js__WEBPACK_IMPORTED_MODULE_6__.init();\n\n   \n/*\n    window.addEventListener('keydown', ev => {\n        console.log(ev.keyCode)\n        switch (ev.keyCode) {\n            case 37:\n            case 65:\n                controls.left = true;\n                break; //left\n            case 39:\n            case 68:\n                controls.right = true;\n                break; //right\n            case 38:\n            case 87:\n                controls.up = true;\n                break; //up\n            case 40:\n            case 83:\n                controls.down = true;\n                break; //down\n            case 32:\n                make();\n                break;\n            case 66:\n                for(let ii = 0; ii < 12; ii++) { make(); }\n                break;\n            case 69:\n                HexManager.toggleType();\n                break;\n            case 71:\n                makeMan();\n                break;\n            case 81:\n                PictureMaker.test();\n                break;\n            case 82:\n                //PictureMaker.make(HexManager.getModel('Tree_N'), 75, -75);\n                Online.resetPhys();\n                break;\n            case 84:\n                //PictureMaker.make(HexManager.getModel('Mount_N'), 90, -20);\n                break;\n            case 89:\n                Online.makePhys({x:.5,y:.5,z:.5},2,{x:0,y:0,z:30});\n                break;\n\n            case 8:\n                HexManager.setType(1);\n                break;\n        }\n    })\n    window.addEventListener('keyup', ev => {\n        switch (ev.keyCode) {\n            case 37:\n            case 65:\n                controls.left = false;\n                break; //left\n            case 39:\n            case 68:\n                controls.right = false;\n                break; //right\n            case 38:\n            case 87:\n                controls.up = false;\n                break; //up\n            case 40:\n            case 83:\n                controls.down = false;\n                break; //down\n        }\n    })*/\n\n\n\n\n\n\n    let canvas = _Render_js__WEBPACK_IMPORTED_MODULE_1__.init();\n    _HexManager_js__WEBPACK_IMPORTED_MODULE_2__.init();\n    //Control.init();\n    _PictureMaker_js__WEBPACK_IMPORTED_MODULE_5__.init();\n\n    _BarUI_js__WEBPACK_IMPORTED_MODULE_8__.init();\n    _Login_js__WEBPACK_IMPORTED_MODULE_9__.init();\n    \n    _Chat_js__WEBPACK_IMPORTED_MODULE_10__.init();\n    _Settings_js__WEBPACK_IMPORTED_MODULE_11__.init();\n    _MakerMenu_js__WEBPACK_IMPORTED_MODULE_12__.init();\n    _AssetManager_js__WEBPACK_IMPORTED_MODULE_13__.init();\n\n    _Drawer_js__WEBPACK_IMPORTED_MODULE_14__.init();\n    window.Helper=_Helper_js__WEBPACK_IMPORTED_MODULE_17__\n\n    let loop=setInterval(function(){\n        if(_AssetManager_js__WEBPACK_IMPORTED_MODULE_13__.getPending()<=0){\n            _Equipment_js__WEBPACK_IMPORTED_MODULE_15__.init();\n            _Character_js__WEBPACK_IMPORTED_MODULE_16__.init();\n            _Experimental_js__WEBPACK_IMPORTED_MODULE_18__.init();\n\n            clearInterval(loop)\n        }\n    },1000)\n\n    \n\n     //makeRoom(200,220,80,10)\n\n     //Render.addModel(Render.plane(100,100,0))\n}catch(err){\n    _UI_js__WEBPACK_IMPORTED_MODULE_7__.systemMessage(err,'error')\n}\n\n\n}\ninit();\n\n\n\nvar controls\n\n\nfunction makeRoom(w, d, h, t) {\n    let body = new CANNON.Body({ mass: 0, material: wallProperty });\n\n    let xWall = new CANNON.Box(new CANNON.Vec3(t / 2, d, h));\n    let yWall = new CANNON.Box(new CANNON.Vec3(w, t / 2, h));\n    let zWall = new CANNON.Box(new CANNON.Vec3(w, d, t / 2));\n\n\n\n    body.addShape(xWall, new CANNON.Vec3(-w, 0, h / 2));\n    body.addShape(xWall, new CANNON.Vec3(w, 0, h / 2));\n\n    body.addShape(yWall, new CANNON.Vec3(0, -d, h / 2));\n    body.addShape(yWall, new CANNON.Vec3(0, d, h / 2));\n\n    body.addShape(zWall, new CANNON.Vec3(0, 0, h));\n    body.addShape(zWall, new CANNON.Vec3(0, 0, 0));\n    world.addBody(body);\n\n    let xm = _Render_js__WEBPACK_IMPORTED_MODULE_1__.cubic(t, d * 2, h, -w, 0, h / 2, _Render_js__WEBPACK_IMPORTED_MODULE_1__.wood);\n    let xm2 = xm.clone()\n    xm2.position.x = w;\n\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel(xm)\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel(xm2)\n\n    let ym = _Render_js__WEBPACK_IMPORTED_MODULE_1__.cubic(w * 2, t, h, 0, d, h / 2, _Render_js__WEBPACK_IMPORTED_MODULE_1__.wood);\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel(ym)\n\n    let zm = _Render_js__WEBPACK_IMPORTED_MODULE_1__.cubic(w * 2, d * 2, t, 0, 0, 0, _Render_js__WEBPACK_IMPORTED_MODULE_1__.ground);\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel(zm)\n\n}\n\n\n\nfunction rand(x) {\n    return (Math.random() * 2 - 1) * x\n}\n\n\n\n//# sourceURL=webpack://buup/./src/Main.js?");

/***/ }),

/***/ "./src/MakerMenu.js":
/*!**************************!*\
  !*** ./src/MakerMenu.js ***!
  \**************************/
/*! namespace exports */
/*! export getSelection [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"getSelection\": () => /* binding */ getSelection\n/* harmony export */ });\n/* harmony import */ var _AssetManager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AssetManager.js */ \"./src/AssetManager.js\");\n/* harmony import */ var _PictureMaker_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PictureMaker.js */ \"./src/PictureMaker.js\");\n\n\n\nvar menu;\nvar selected;\nvar stuff = [\n    'man',\n    'chicken',\n    'pot',\n    'rock',\n    'gran',\n    'goblin',\n    'hedgehog',\n    'werewolf',\n    'vampire',\n    'zombie',\n    'trash',\n    'die4',\n    'die6',\n    'die8',\n    'die10',\n    'die20',\n]\n\nfunction init() {\n    menu = document.querySelector('#makerBar')\n    stuff.forEach(i => {\n        item(i);\n    })\n}\n\nfunction item(st) {\n    let dom = d('makerIcon')\n    dom.setAttribute('data', st)\n    dom.addEventListener('click', ev => {\n        selected = ev.target.getAttribute('data')\n        ev.target.style.animation=''\n        void ev.target.offsetWidth\n        ev.target.style.animation='jello 0.4s'\n    })\n    dom.innerText = st\n    menu.appendChild(dom)\n}\n\nfunction d(c) {\n    let div = document.createElement('div')\n    div.className = c;\n    return div\n}\n\nfunction getSelection() {\n    return selected\n}\n\n\n\n//# sourceURL=webpack://buup/./src/MakerMenu.js?");

/***/ }),

/***/ "./src/Online.js":
/*!***********************!*\
  !*** ./src/Online.js ***!
  \***********************/
/*! namespace exports */
/*! export login [provided] [no usage info] [missing usage info prevents renaming] */
/*! export message [provided] [no usage info] [missing usage info prevents renaming] */
/*! export physDel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export physMake [provided] [no usage info] [missing usage info prevents renaming] */
/*! export physReset [provided] [no usage info] [missing usage info prevents renaming] */
/*! export physSend [provided] [no usage info] [missing usage info prevents renaming] */
/*! export sendEquipment [provided] [no usage info] [missing usage info prevents renaming] */
/*! export terrain [provided] [no usage info] [missing usage info prevents renaming] */
/*! export updateSheet [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"login\": () => /* binding */ login,\n/* harmony export */   \"physMake\": () => /* binding */ physMake,\n/* harmony export */   \"physReset\": () => /* binding */ physReset,\n/* harmony export */   \"message\": () => /* binding */ message,\n/* harmony export */   \"terrain\": () => /* binding */ terrain,\n/* harmony export */   \"physSend\": () => /* binding */ physSend,\n/* harmony export */   \"physDel\": () => /* binding */ physDel,\n/* harmony export */   \"updateSheet\": () => /* binding */ updateSheet,\n/* harmony export */   \"sendEquipment\": () => /* binding */ sendEquipment\n/* harmony export */ });\n/* harmony import */ var _lib_socket_io_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/socket.io.js */ \"./src/lib/socket.io.js\");\n/* harmony import */ var _lib_socket_io_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_lib_socket_io_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Main_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Main.js */ \"./src/Main.js\");\n/* harmony import */ var _Physics_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Physics.js */ \"./src/Physics.js\");\n/* harmony import */ var _UI_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./UI.js */ \"./src/UI.js\");\n/* harmony import */ var _Login_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Login.js */ \"./src/Login.js\");\n/* harmony import */ var _Chat_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Chat.js */ \"./src/Chat.js\");\n/* harmony import */ var _PlayerManager_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PlayerManager.js */ \"./src/PlayerManager.js\");\n/* harmony import */ var _HexManager_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./HexManager.js */ \"./src/HexManager.js\");\n/* harmony import */ var _Control_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Control.js */ \"./src/Control.js\");\n/* harmony import */ var _Character_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Character.js */ \"./src/Character.js\");\n/* harmony import */ var _BarUI_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./BarUI.js */ \"./src/BarUI.js\");\n/* harmony import */ var _Equipment_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Equipment.js */ \"./src/Equipment.js\");\n //import io from \"socket.io-client\"\n \n \n \n \n \n \n \n \n \n \n \n \n\n var socket;\n\n var physReady = false;\n var pendingLogin;\n\n function initSocket() {\n    try{\n     window.sysMessage=sysMessage;\n     window.forceSave=forceSave;\n\n     _BarUI_js__WEBPACK_IMPORTED_MODULE_10__.show();\n\n     console.log('trying auth...');\n     pendingLogin = _UI_js__WEBPACK_IMPORTED_MODULE_3__.systemMessage('attempting communications...', 'net', true)\n     socket = _lib_socket_io_js__WEBPACK_IMPORTED_MODULE_0__('/dand-dev')\n     /*.connect('', { //,{transports: ['websocket'],secure: true}\n         reconnection: true,\n         reconnectionAttempts: 10\n     });*/\n     //socket = io(':443/dand-dev')\n\n     /*&'makeavoy.com',{\n         transports: ['websocket','xhr-polling']\n     });*/\n     //.connect('/dand-dev',{ secure: true, transports: [ \"flashsocket\",\"polling\",\"websocket\" ] });\n     //https://makeavoy.com/dand-dev\n     //'/dand-dev',{transports: ['websocket']}\n     //socket = io('/dand-dev',{transports: ['websocket'],secure: true});\n\n\n     socket.on('connect', function() {\n         _Login_js__WEBPACK_IMPORTED_MODULE_4__.hide();\n         console.log('connected')\n         socket.emit('physInit')\n         if(pendingLogin)\n         \tpendingLogin.remove();\n         pendingLogin = undefined;\n     });\n\n     socket.on('event', function(data) {});\n     socket.on('disconnect', function(data) {\n         console.log('disconnected ', data)\n         if(data.includes('disconnect')) {\n             _Login_js__WEBPACK_IMPORTED_MODULE_4__.show();\n             //socket.io.opts.reconnection = false;\n         } else {\n             pendingLogin = _UI_js__WEBPACK_IMPORTED_MODULE_3__.systemMessage('lost connection, attempting reconnection...', 'net', true)\n             /*socket.connect('', {\n                 reconnection: true,\n                 reconnectionAttempts: 10\n             });*/\n         }\n     });\n\n     socket.on('message', function(userId, m) {\n         _Chat_js__WEBPACK_IMPORTED_MODULE_5__.hook(userId, m)\n     });\n     socket.on('join', function(username) {\n         _Chat_js__WEBPACK_IMPORTED_MODULE_5__.makeDivider(username + ' has joined!')\n     });\n\n     socket.on('terrain', function(id, chunk, data) {\n         //Chat.makeDivider(username+' has joined!')\n         _HexManager_js__WEBPACK_IMPORTED_MODULE_7__.updateTerrain(chunk, data)\n     });\n\n\n\n     //socket.emit('init','hi')\n\n     socket.on('physSend', function(obj, floating) {\n         _Physics_js__WEBPACK_IMPORTED_MODULE_2__.remoteAdjustPhys(obj, floating)\n     });\n     socket.on('physUpdate', function(data) {\n         //Physics.setPlayer()\n         if(physReady) {\n             _Physics_js__WEBPACK_IMPORTED_MODULE_2__.syncOnline(data)\n             console.log('phys synced')\n         } else\n             console.log('!!!phys IGNORED')\n     })\n     socket.on('physInit', function(inits, data) {\n         _Physics_js__WEBPACK_IMPORTED_MODULE_2__.physClear();\n         inits.forEach((item, i) => {\n             _Physics_js__WEBPACK_IMPORTED_MODULE_2__.physMake(item[0], item[1], item[2], { x: 0, y: 0, z: 0 }, { x: 0, y: 0, z: 0, w: 0 }, item[3], item[4])\n         })\n         _Physics_js__WEBPACK_IMPORTED_MODULE_2__.syncOnline(data)\n         physReady = true;\n     })\n\n\n     socket.on('physMake', function(id, size, mass, pos, quat, type, meta) {\n         _Physics_js__WEBPACK_IMPORTED_MODULE_2__.physMake(id, size, mass, pos, quat, type, meta)\n         console.log('made')\n     })\n     socket.on('physDel', function(id) {\n         _Physics_js__WEBPACK_IMPORTED_MODULE_2__.physDel(id)\n         console.log('deleted')\n     })\n     socket.on('updateSheet', function(id, obj) {\n         _Character_js__WEBPACK_IMPORTED_MODULE_9__.updateSheet(id, obj)\n         console.log('deleted')\n     })\n     socket.on('sysMessage', function(m,type) {\n         console.log('sysMessage ',m,type)\n         _UI_js__WEBPACK_IMPORTED_MODULE_3__.systemMessage(m,type)\n     })\n\n     lastChats();\n     getGrid();\n     getSheets();\n     getEquipment(_PlayerManager_js__WEBPACK_IMPORTED_MODULE_6__.getOwnPlayer().id);\n     _Control_js__WEBPACK_IMPORTED_MODULE_8__.init();\n }catch(err){\n    _UI_js__WEBPACK_IMPORTED_MODULE_3__.systemMessage(\"Stage2 Auth: \"+err,'error');\n    console.log('test')\n }\n }\n\n\n /*\n function init(){\n     document.querySelector('#test').disabled=true;\n     document.querySelector('#test').addEventListener('click',sendMessage)\n     document.querySelector('#button').addEventListener('click',onclick)\n }init()*/\n\n\n function login(username, pass) {\n     /*let username=document.querySelector('#username').value\n     let pass=document.querySelector('#password').value*/\n     fetch('/login', {\n         method: 'post',\n         headers: {\n             'Content-Type': 'application/json'\n         },\n         body: JSON.stringify({ username: username, password: pass })\n     }).then(function(response) {\n         if(!response.ok) {\n\n             _UI_js__WEBPACK_IMPORTED_MODULE_3__.systemMessage(response.status + \":\" + response.statusText, 'warn')\n\n             return undefined;\n         } else\n             return response.json();\n     }).then(function(data) {\n         if(data) {\n             //UI.systemMessage(data.message, 'success')\n             _PlayerManager_js__WEBPACK_IMPORTED_MODULE_6__.setOwnPlayer(data.id)\n             initSocket();\n         }\n     }).catch(e => {\n         _UI_js__WEBPACK_IMPORTED_MODULE_3__.systemMessage(e, 'error')\n         console.error('ERROR ', e);\n     });\n }\n\n function lastChats() {\n     fetch('/lastChats', {\n         method: 'post',\n         headers: {\n             'Content-Type': 'application/json'\n         },\n         //body: JSON.stringify({ username: username, password: pass })\n     }).then(function(response) {\n         if(!response.ok) {\n             return undefined;\n         } else\n             return response.json();\n     }).then(function(data) {\n         if(data) {\n             _Chat_js__WEBPACK_IMPORTED_MODULE_5__.lastChats(data.array)\n         }\n     }).catch(e => {\n         _UI_js__WEBPACK_IMPORTED_MODULE_3__.systemMessage(e, 'error')\n         console.error('ERROR ', e);\n     });\n }\n function getEquipment(id){\n \t \n     fetch('/getEquipment', {\n         method: 'post',\n         headers: {\n             'Content-Type': 'application/json'\n         },\n         body: JSON.stringify({ id: id })\n     }).then(function(response) {\n         if(!response.ok) {\n             return undefined;\n         } else\n             return response.json();\n     }).then(function(data) {\n         if(data) {\n             _Equipment_js__WEBPACK_IMPORTED_MODULE_11__.syncEquipment(data.array)\n         }\n     }).catch(e => {\n         _UI_js__WEBPACK_IMPORTED_MODULE_3__.systemMessage(e, 'error')\n         console.error('ERROR ', e);\n     });\n }\n\n function getGrid() {\n     fetch('/grid', {\n         method: 'post',\n         headers: {\n             'Content-Type': 'application/json'\n         },\n         //body: JSON.stringify({ username: username, password: pass })\n     }).then(function(response) {\n         if(!response.ok) {\n             return undefined;\n         } else\n             return response.json();\n     }).then(function(data) {\n         if(data) {\n             if(data.grid.length > 0)\n                 _HexManager_js__WEBPACK_IMPORTED_MODULE_7__.updateTerrain(0, data.grid)\n         }\n     }).catch(e => {\n         _UI_js__WEBPACK_IMPORTED_MODULE_3__.systemMessage(e, 'error')\n         console.error('ERROR ', e);\n     });\n }\n\n\n function getSheets() {\n     fetch('/getSheets', {\n         method: 'post',\n         headers: {\n             'Content-Type': 'application/json'\n         },\n         //body: JSON.stringify({ username: username, password: pass })\n     }).then(function(response) {\n         if(!response.ok) {\n             return undefined;\n         } else\n             return response.json();\n     }).then(function(data) {\n         if(data) {\n             _Character_js__WEBPACK_IMPORTED_MODULE_9__.applyUsers(data.array)\n         }\n     }).catch(e => {\n         _UI_js__WEBPACK_IMPORTED_MODULE_3__.systemMessage(e, 'error')\n         console.error('ERROR ', e);\n     });\n }\n\n\n function physMake(size, mass, pos, quat, type, meta) {\n     socket.emit('physMake', size, mass, pos, quat, type, meta);\n }\n\n function physReset() {\n     socket.emit('physReset');\n }\n\n function message(string) {\n     socket.emit('message', string);\n }\n\n function m(st) {\n     if(!st)\n         st = 'test'\n     socket.emit('message', st);\n }\n\n function terrain(chunk, data) {\n     socket.emit('terrain', _PlayerManager_js__WEBPACK_IMPORTED_MODULE_6__.getOwnPlayer().id, chunk, data);\n }\n\n function physSend(obj, floating) {\n     //physData.push([id, body.position, body.quaternion, body.velocity, body.angularVelocity])\n\n     socket.emit('physSend', { id: obj.id, position: obj.position, velocity: obj.velocity, quaternion: obj.quaternion, angularVelocity: obj.angularVelocity }, floating);\n }\n\n function physDel(id) {\n     socket.emit('physDel', id);\n }\n\n function updateSheet(id, obj) {\n     socket.emit('updateSheet', id, obj);\n }\n\n function sysMessage(m,type){\n    socket.emit('sysMessage', m,type);\n }\n\nfunction forceSave(){\n    socket.emit('forceSave');\n}\nfunction sendEquipment(id,array){\n    socket.emit('sendEquipment',id,array);\n}\n\n \n\n//# sourceURL=webpack://buup/./src/Online.js?");

/***/ }),

/***/ "./src/Physics.js":
/*!************************!*\
  !*** ./src/Physics.js ***!
  \************************/
/*! namespace exports */
/*! export calcQuaterion [provided] [no usage info] [missing usage info prevents renaming] */
/*! export cancelCarry [provided] [no usage info] [missing usage info prevents renaming] */
/*! export createPhysicsDebugger [provided] [no usage info] [missing usage info prevents renaming] */
/*! export findWithin [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getCarry [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export physCarry [provided] [no usage info] [missing usage info prevents renaming] */
/*! export physClear [provided] [no usage info] [missing usage info prevents renaming] */
/*! export physDel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export physDrop [provided] [no usage info] [missing usage info prevents renaming] */
/*! export physMake [provided] [no usage info] [missing usage info prevents renaming] */
/*! export remoteAdjustPhys [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setPlayer [provided] [no usage info] [missing usage info prevents renaming] */
/*! export syncOnline [provided] [no usage info] [missing usage info prevents renaming] */
/*! export updatePhysics [provided] [no usage info] [missing usage info prevents renaming] */
/*! export world [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"updatePhysics\": () => /* binding */ updatePhysics,\n/* harmony export */   \"setPlayer\": () => /* binding */ setPlayer,\n/* harmony export */   \"physMake\": () => /* binding */ physMake,\n/* harmony export */   \"physDel\": () => /* binding */ physDel,\n/* harmony export */   \"getCarry\": () => /* binding */ getCarry,\n/* harmony export */   \"cancelCarry\": () => /* binding */ cancelCarry,\n/* harmony export */   \"physCarry\": () => /* binding */ physCarry,\n/* harmony export */   \"syncOnline\": () => /* binding */ syncOnline,\n/* harmony export */   \"findWithin\": () => /* binding */ findWithin,\n/* harmony export */   \"physDrop\": () => /* binding */ physDrop,\n/* harmony export */   \"remoteAdjustPhys\": () => /* binding */ remoteAdjustPhys,\n/* harmony export */   \"createPhysicsDebugger\": () => /* binding */ createPhysicsDebugger,\n/* harmony export */   \"world\": () => /* binding */ world,\n/* harmony export */   \"calcQuaterion\": () => /* binding */ calcQuaterion,\n/* harmony export */   \"physClear\": () => /* binding */ physClear\n/* harmony export */ });\n/* harmony import */ var _Main_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Main.js */ \"./src/Main.js\");\n/* harmony import */ var _Control_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Control.js */ \"./src/Control.js\");\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _Online_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Online.js */ \"./src/Online.js\");\n/* harmony import */ var _AssetManager_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AssetManager.js */ \"./src/AssetManager.js\");\n/* harmony import */ var _Chat_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Chat.js */ \"./src/Chat.js\");\n/* harmony import */ var _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/cannon.min.js */ \"./src/lib/cannon.min.js\");\n/* harmony import */ var _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\n\n\nvar gooProperty;\nvar wallProperty;\n\n\nvar meshes;\nvar particles;\nvar bullets;\nvar world;\nvar playerBody;\nvar orientation = 0;\nvar defaultMat\nvar randTest=[]\n\nconst dt = 1 / 30; //1/20\n/// 1/100\n\nfunction init() {\n    window.randTest=randTest\n    let N = 1;\n    meshes = [];\n    particles = [];\n    bullets = [];\n\n    // Setup our world\n    world = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.World();\n    world.quatNormalizeSkip = 0;\n    world.quatNormalizeFast = false;\n    world.allowSleep = true;\n\n    world.gravity.set(0, 0, -10);\n    world.broadphase = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.NaiveBroadphase();\n\n    defaultMat = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Material(\"basicMaterial\");\n\n    const contactMaterial = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.ContactMaterial(defaultMat, defaultMat, {\n        friction: 0.2\n    });\n\n    world.addContactMaterial(contactMaterial);\n\n\n\n    // Create boxes\n    let mass = 4,\n        radius = 1.3;\n    let boxShape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Vec3(1, 1, 2));\n    for(let i = 0; i < N; i++) {\n        let boxBody = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Body({ mass: mass });\n        boxBody.addShape(boxShape);\n        boxBody.position.set(0, 0, 60);\n        world.addBody(boxBody);\n        //boxBody.angularDamping=0.8 //really high\n        playerBody = boxBody\n        window.playerBody = playerBody\n        //playerBody.angularDamping=1\n        //bodies.push(boxBody);\n    }\n\n\n    /*\n            // Create a plane\n            let groundShape = new CANNON.Plane();\n            let c=40\n            let h=150\n            let points=[\n            new CANNON.Vec3(-c,-c,0),new CANNON.Vec3(-c,c,0),new CANNON.Vec3(c,c,0),new CANNON.Vec3(c,-c,0),\n            new CANNON.Vec3(-c,-c,h),new CANNON.Vec3(-c,c,h),new CANNON.Vec3(c,c,h),new CANNON.Vec3(c,-c,h)\n            ]\n            let faces=[[4,7,6,5]]//[[3,2,1,0],[4,5,0,1],[6,7,3,2],[0,3,7,4],[2,1,5,6],[4,7,6],[6,5,4]]//,  ,   [2,3,6,7]] //\n            let box = new CANNON.ConvexPolyhedron(points,faces);\n            */\n    /*let groundBody = new CANNON.Body({ mass: 0 });\n            groundBody.addShape(box);\n            groundBody.position.set(0,0,25)\n           // groundBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2);\n            world.addBody(groundBody);*/\n\n    // Joint body\n    /*let shape = new CANNON.Sphere(0.1);\n    let jointBody = new CANNON.Body({ mass: 0 });\n    jointBody.addShape(shape);\n    jointBody.collisionFilterGroup = 0;\n    jointBody.collisionFilterMask = 0;\n    world.addBody(jointBody)*/\n\n    //debugger\n    /*var gooWallPhysics = new CANNON.ContactMaterial(gooProperty,\n                                                            wallProperty,\n                                                            1, // friction coefficient\n                                                            0  // restitution\n                                                            );*/\n    // We must add the contact materials to the world\n    //world.addContactMaterial(gooWallPhysics);\n\n\n    gooProperty = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Material({ name: \"gooProperty\", friction: 10.0, restitution: -1.0 });\n    gooProperty.name = \"gooProperty\"\n    //gooProperty.friction=1\n\n    wallProperty = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Material({ name: \"wallProperty\", friction: 0.1, restitution: 1 });\n    wallProperty.name = \"wallProperty\"\n\n\n    makeFloor();\n\n}\n\nvar count = 0;\n\nfunction makeBullet() {\n    let fireSpeed = 12;\n\n    let boxBody;\n    if(bullets.length > 30) {\n        boxBody = bullets.shift();\n        bullets.push(boxBody)\n        //boxBody.arrayIndex=\n        boxBody.collisionResponse = true;\n        boxBody.wakeUp();\n\n\n    } else {\n\n\n        let size = { x: .4, y: .4, z: .4 }\n        let boxShape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Vec3(size.x / 2, size.y / 2, size.z / 2));\n        boxBody = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Body({ mass: 2 });\n        boxBody.addShape(boxShape);\n        //bodies.push(boxBody);\n\n        boxBody.bullet = true;\n\n        bullets.push(boxBody)\n\n\n        let cube = _Render_js__WEBPACK_IMPORTED_MODULE_2__.cubic(size.x, size.y, size.z, 0, 0, 0, _Render_js__WEBPACK_IMPORTED_MODULE_2__.yellow);\n        meshes.push(cube)\n\n        _Render_js__WEBPACK_IMPORTED_MODULE_2__.addModel(cube)\n        world.addBody(boxBody);\n\n\n    }\n\n\n    let v = new THREE.Vector3(0, 0, 0)\n    let speed = new THREE.Vector3(0, 0, 0)\n\n\n    let xx = -Math.sin(orientation)\n    let yy = Math.cos(orientation)\n\n    v.x = xx * 1.5\n    v.y = yy * 1.5\n    speed.x = fireSpeed * xx;\n    speed.y = fireSpeed * yy;\n\n\n    v.add({ x: rand(.2), y: rand(.2), z: rand(.2) })\n\n\n    //v.applyQuaternion(Render.player.quaternion)\n    v.add(_Render_js__WEBPACK_IMPORTED_MODULE_2__.player.position)\n    boxBody.position.copy(v)\n    boxBody.quaternion.copy(_Render_js__WEBPACK_IMPORTED_MODULE_2__.player.quaternion)\n\n    //speed.applyQuaternion(Render.player.quaternion)\n    boxBody.velocity.copy(speed)\n\n    let opposite = new THREE.Vector3(-0.05 * speed.x, -0.05 * speed.y, -0.05 * speed.z)\n    //opposite.applyQuaternion(Render.player.quaternion)\n    opposite.add(playerBody.velocity);\n\n    playerBody.velocity.copy(opposite)\n\n\n    //boxBody.angularDamping=0.8 //really high\n    count++;\n\n}\n\nfunction makeBlood(p, v) {\n    let boxBody;\n    if(count > 100) {\n        boxBody = particles.shift();\n        particles.push(boxBody)\n        boxBody.collisionResponse = true;\n    } else {\n\n        let size = { x: .4, y: .4, z: .4 }\n        let boxShape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Vec3(size.x / 2, size.y / 2, size.z / 2));\n        boxBody = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Body({ mass: 0.01, material: gooProperty });\n        boxBody.addShape(boxShape);\n        //bodies.push(boxBody);\n\n        particles.push(boxBody)\n\n        //let cube=Render.cubic(size.x,size.y,size.z,0,0,0,Render.blood);\n        let sphere = new THREE.SphereGeometry(.35, 5, 3)\n        let orb = new THREE.Mesh(sphere, _Render_js__WEBPACK_IMPORTED_MODULE_2__.blood);\n        meshes.push(orb)\n\n        _Render_js__WEBPACK_IMPORTED_MODULE_2__.addModel(orb)\n        world.addBody(boxBody);\n    }\n    boxBody.position.copy(p.position)\n    if(v)\n        boxBody.velocity.copy(v)\n\n    boxBody.addEventListener(\"collide\", ev => {\n        if(ev.body.material) {\n            if(ev.body.material.name == 'wallProperty') {\n                boxBody.collisionResponse = false;\n                boxBody.sleep();\n            }\n        }\n    })\n\n}\n\n\nfunction makeMan() {\n    let size = { x: 1, y: 1, z: 2 }\n    let boxShape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Vec3(size.x / 2, size.y / 2, size.z / 2));\n    let boxBody = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Body({ mass: 8 });\n    boxBody.addShape(boxShape);\n    //bodies.push(boxBody);\n    boxBody.angularDamping = 1\n    boxBody.position.set(_Control_js__WEBPACK_IMPORTED_MODULE_1__.x(), _Control_js__WEBPACK_IMPORTED_MODULE_1__.y(), 20)\n\n\n    boxBody.addEventListener(\"collide\", ev => {\n        if(ev.body.bullet) {\n            if(ev.body.velocity.length() > 5) {\n                boxBody.angularDamping = 0.01\n                console.log('sht')\n                makeBlood(boxBody, ev.body.velocity)\n            }\n        }\n    })\n\n\n    let cube = _Render_js__WEBPACK_IMPORTED_MODULE_2__.cubic(size.x, size.y, size.z);\n    meshes.push(cube)\n\n    _Render_js__WEBPACK_IMPORTED_MODULE_2__.addModel(cube)\n    world.addBody(boxBody);\n}\n\nfunction makeFloor() {\n    let groundShape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Plane();\n    let groundBody = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Body({ mass: 0,material:defaultMat });\n    groundBody.addShape(groundShape);\n    world.addBody(groundBody);\n\n}\n\nfunction applyQuaternion(v, q) { //ripped from threejs because i didnt feel like converting between cannojs types\n\n\n    const x = v.x,\n        y = v.y,\n        z = v.z;\n    const qx = q.x,\n        qy = q.y,\n        qz = q.z,\n        qw = q.w;\n\n    // calculate quat * vector\n\n    const ix = qw * x + qy * z - qz * y;\n    const iy = qw * y + qz * x - qx * z;\n    const iz = qw * z + qx * y - qy * x;\n    const iw = -qx * x - qy * y - qz * z;\n\n    // calculate result * inverse quat\n\n    v.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    v.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    v.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n\n    return v;\n}\n\nfunction updatePhysics() {\n    /*bodies[0].position.set(point.x,point.y,point.z)\n    bodies[0].velocity.set(0,0,0)\n    bodies[0].angularDamping=1\n    bodies[0].inertia.set(0,0,0)*/\n\n    world.step(dt);\n\n\n    let bodies=Object.values(physArray)\n    for(var i = 0; i !== bodies.length; i++) {\n        if(bodies[i].id != undefined) {\n            let m = meshArray[bodies[i].id]\n            m.position.copy(bodies[i].position);\n            m.quaternion.copy(bodies[i].quaternion);\n        }\n\n/*\n        if(bodies[i].position.z < -100) {\n            bodies[i].position.set(Math.random() * 80 - 40, Math.random() * 80 - 40, 100)\n\n            bodies[i].velocity.set(0, 0, 0)\n            bodies[i].collisionResponse = false;\n            bodies[i].sleep();\n        }*/\n\n    }\n\n    let r = _Control_js__WEBPACK_IMPORTED_MODULE_1__.getAngle();\n    let vd = playerBody.velocity.length()\n    if(_Main_js__WEBPACK_IMPORTED_MODULE_0__.controls.left) {\n        //if(playerBody.velocity.x>-40)\n        //playerBody.velocity.x-=4\n        if(vd < 2) {\n            playerBody.velocity.x -= Math.cos(r) * 2\n            playerBody.velocity.y -= Math.sin(r) * 2\n        }\n        orientation = r + Math.PI / 2\n        playerBody.quaternion.setFromAxisAngle(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Vec3(0, 0, 1), orientation);\n\n    } else if(_Main_js__WEBPACK_IMPORTED_MODULE_0__.controls.right) {\n        //if(playerBody.velocity.x<40)\n        if(vd < 2) {\n            playerBody.velocity.x += Math.cos(r) * 2\n            playerBody.velocity.y += Math.sin(r) * 2\n        }\n        orientation = r - Math.PI / 2;\n        playerBody.quaternion.setFromAxisAngle(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Vec3(0, 0, 1), orientation);\n\n    } else if(_Main_js__WEBPACK_IMPORTED_MODULE_0__.controls.up) {\n        //if(playerBody.velocity.y<40)\n        if(vd < 2) {\n            playerBody.velocity.x -= Math.sin(r) * 2\n            playerBody.velocity.y += Math.cos(r) * 2\n        }\n        orientation = r\n        playerBody.quaternion.setFromAxisAngle(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Vec3(0, 0, 1), orientation);\n\n    } else if(_Main_js__WEBPACK_IMPORTED_MODULE_0__.controls.down) {\n        //if(playerBody.velocity.y>-40)\n        if(vd < 2) {\n            playerBody.velocity.x += Math.sin(r) * 2\n            playerBody.velocity.y -= Math.cos(r) * 2\n        }\n        orientation = r + Math.PI\n        playerBody.quaternion.setFromAxisAngle(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Vec3(0, 0, 1), orientation);\n\n    }\n    _Render_js__WEBPACK_IMPORTED_MODULE_2__.player.position.copy(playerBody.position);\n    _Render_js__WEBPACK_IMPORTED_MODULE_2__.player.quaternion.copy(playerBody.quaternion);\n    //console.log(Render.player.position)\n}\n\n\nfunction setPlayer(position, quaternion, velocity) {\n    if(position && quaternion && velocity) {\n        playerBody.position.copy(position);\n        playerBody.quaternion.copy(quaternion);\n        playerBody.velocity.copy(velocity);\n    }\n}\n\n\n\n\n///ONLINE\n\nvar physArray = []\nvar meshArray = []\n\nfunction physMake(id, size, mass, pos,quat, type, meta) {\n    let body = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Body({ mass: mass,material:defaultMat });\n    let shape;\n    switch(type){\n        case 1: shape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Cylinder(size.x, size.y, size.z, 6); break;\n        case 3: shape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Sphere(size.x); body.angularDamping=0.3;break;\n        default: shape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Vec3(size.x, size.y, size.z));\n    }\n\n\n    body.addShape(shape);\n    body.position.set(pos.x, pos.y, pos.z);\n    if(quat)\n        body.quaternion.copy(quat);\n    //body.rotation.x=Math.PI/2\n    //body.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2);\n\n    body.id = id;\n    body.meta=meta;\n    //physIDs.push(id);\n    physArray[id] = body;\n    world.addBody(body);\n\n\n    let mesh;\n    if(meta && meta.model){\n        let inner=_AssetManager_js__WEBPACK_IMPORTED_MODULE_4__.make(meta.model,meta.player);\n        mesh=_Render_js__WEBPACK_IMPORTED_MODULE_2__.makeGroup();\n        if(!meta.label)\n            inner.position.z=-size.z/2;\n        inner.rotation.x=Math.PI/2;\n        mesh.add(inner)\n\n        if(meta.label){\n            if(meta.label=='dice'){\n                body.labelDom=_Chat_js__WEBPACK_IMPORTED_MODULE_5__.addBubble('dice',{color:meta.player.color},mesh,)\n                body.labelDom.mult=parseInt(meta.model.substring(3))\n            }\n        }\n        //mesh.up.set(0,0,1)\n        /*if(mesh.children && mesh.children.length>1)\n            if(mesh.children[0].geometry){\n                mesh.children[0].geometry.rotateX(Math.PI/2)\n            }*/\n    }else if(type==1) {\n        mesh = _Render_js__WEBPACK_IMPORTED_MODULE_2__.cylinder(size.x, size.y, size.z, pos.x, pos.y, pos.z, meta.color)\n        //mesh.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2);\n    } else\n        mesh = _Render_js__WEBPACK_IMPORTED_MODULE_2__.cubicColored(size.x * 2, size.y * 2, size.z * 2, pos.x, pos.y, pos.z, meta.color)\n    _Render_js__WEBPACK_IMPORTED_MODULE_2__.addModel(mesh);\n    meshArray[id] = mesh;\n    mesh.physId = id;\n    let dupe=JSON.parse(JSON.stringify(body.meta))\n    dupe.player.shader=undefined;\n    console.log('phys ',id,dupe)\n}\n\nfunction physDel(id){\n    _Render_js__WEBPACK_IMPORTED_MODULE_2__.removeModel(meshArray[id])\n    delete meshArray[id];\n    if(physArray[id].labelDom){\n        _Chat_js__WEBPACK_IMPORTED_MODULE_5__.popBubble(physArray[id].labelDom);\n    }\n    world.remove(physArray[id])\n    delete physArray[id];\n}\n\n\nfunction syncOnline(data) {\n    data.forEach(stuff => {\n        let p = physArray[stuff[0]];\n        if(p) {\n            /*interpolate(p.position,stuff[1])\n            interpolate(p.angularVelocity,stuff[4])\n            p.quaternion.copy(stuff[2])*/\n\n            //interpolate(p.position, stuff[1], 4)\n            p.position.copy(stuff[1])\n            p.quaternion.copy(stuff[2])\n            p.velocity.copy(stuff[3])\n            //interpolate(p.velocity, stuff[3])\n\n            p.angularVelocity.copy(stuff[4])\n\n            if(p.sleepState != stuff[5].sleep) {\n                if(stuff[5].sleep == 2) {\n                    p.sleep();\n                } else if(p.sleepState == 2) {\n                    p.wakeUp();\n                }\n                //p.sleepState=stuff[5]\n            }\n            if(p.labelDom){ //stuff[5].value!=-1 &&  //value is changing, but also we have a label, hopefully this is dice\n                let v=stuff[5].value;//((p.quaternion.z) + (p.quaternion.w) )/2\n                if(p.labelDom.mult){\n                    let val=Math.floor(v*p.labelDom.mult)+1\n                    v=val+' / '+p.labelDom.mult\n                    /*if(!randTest[p.labelDom.mult])\n                        randTest[p.labelDom.mult]=[]\n                    randTest[p.labelDom.mult].push(val)\n                    if(randTest[p.labelDom.mult].length>100)\n                        randTest[p.labelDom.mult].shift();*/\n                }\n                p.labelDom.bubble.innerText=v;\n            }\n        }\n    })\n}\n\nfunction interpolate(a, b, z) {\n    let m = { x: a.x - b.x, y: a.y - b.y, z: a.z - b.z }\n    if(!z)\n        z = 2\n    a.x -= m.x / z\n    a.y -= m.y / z\n    a.z -= m.z / z\n}\n\n\nfunction physClear() {\n    meshArray.forEach(m => {\n        _Render_js__WEBPACK_IMPORTED_MODULE_2__.removeModel(m);\n    })\n    meshArray = [];\n    let bodies=Object.values(physArray)\n    bodies.forEach(p => {\n        world.remove(p);\n    })\n\n    physArray = [];\n}\nvar adjustDelay = 0;\n\nvar carryTarget;\n\n/** first pass, find nearest physical object, if found set carryTarget, return true, next pass move the carryTarget, and update it for remote players\nreturn true if carrying in first or nth passes, return false if couldnt find object within range, return values indicate controller can opt for carrying controls or normal controls\n**/\nfunction physCarry(pos,rot) {\n    if(carryTarget == undefined) {\n        let closest=findWithin(2.2,pos)\n        if(closest != undefined){\n            carryTarget = physArray[closest]\n            window.carryTarget=carryTarget\n            return 1;\n        }else{\n            carryTarget=-1;\n        }\n    } else if(carryTarget != -1) {\n\n        let p = carryTarget;\n        p.quaternion.setFromAxisAngle(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Vec3(0, 0, 1),rot);\n\n        p.position.copy(pos)\n        p.position.z += 6;\n        p.sleep();\n        adjustDelay++;\n        if(adjustDelay > 10) {\n            adjustDelay = 0\n            _Online_js__WEBPACK_IMPORTED_MODULE_3__.physSend(p, true)\n            let temp=JSON.parse(JSON.stringify(p.meta))\n            delete temp.shader\n            console.log('send phys ',p.id,temp)\n        }\n        return 1;\n    }\n    return 0;\n}\nfunction findWithin(range,pos){\n    let closest;\n        let distance = range;\n        meshArray.forEach(mesh => {\n            if(mesh.physId != undefined) {\n                let d = mesh.position.distanceTo(pos);\n                if(d < distance) {\n                    window.lastMesh=mesh;\n                    closest = mesh.physId\n                    distance = d;\n                }\n            }\n        })\n    return closest\n}\n\nfunction remoteAdjustPhys(obj, floating) {\n    let p = physArray[obj.id];\n    if(p) {\n        p.position.copy(obj.position)\n        p.quaternion.copy(obj.quaternion)\n        if(floating) {\n            //p.velocity.copy(obj.velocity)\n            //p.angularVelocity.copy(obj.angularVelocity)\n            p.sleep()\n        } else {\n            p.velocity.copy(obj.velocity)\n            p.angularVelocity.copy(obj.angularVelocity)\n            p.wakeUp();\n        }\n    }\n}\n\nfunction physDrop(pos, vel) {\n    //let ar = Object.values(physArray)\n    //if(ar.length > 0) {\n    if(carryTarget && carryTarget!=-1) {\n        let p = carryTarget\n        if(p) {\n            p.wakeUp();\n            p.position.copy(pos)\n            p.velocity.copy(vel)\n            p.position.z += 6;\n            adjustDelay = 0\n            _Online_js__WEBPACK_IMPORTED_MODULE_3__.physSend(p, false)\n            console.log('send phys NOW')\n        }\n    }\n    carryTarget = undefined\n}\n\n\nfunction createPhysicsDebugger(scene) {\n    let cannonDebugRenderer = new THREE.CannonDebugRenderer(scene, world);\n    return cannonDebugRenderer\n}\n\nfunction calcQuaterion(rot){\n    let quat=new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Quaternion(0,0,0,0)\n    quat.setFromAxisAngle(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_6__.Vec3(0,0,1),rot);\n    return quat;\n}\nfunction getCarry(){\n    if(carryTarget==-1)\n        return undefined\n\n    return carryTarget\n}\nfunction cancelCarry(){\n    carryTarget=undefined\n}\n\n\n//# sourceURL=webpack://buup/./src/Physics.js?");

/***/ }),

/***/ "./src/PictureMaker.js":
/*!*****************************!*\
  !*** ./src/PictureMaker.js ***!
  \*****************************/
/*! namespace exports */
/*! export generate [provided] [no usage info] [missing usage info prevents renaming] */
/*! export get [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export make [provided] [no usage info] [missing usage info prevents renaming] */
/*! export processHexChunk [provided] [no usage info] [missing usage info prevents renaming] */
/*! export test [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"make\": () => /* binding */ make,\n/* harmony export */   \"get\": () => /* binding */ get,\n/* harmony export */   \"generate\": () => /* binding */ generate,\n/* harmony export */   \"test\": () => /* binding */ test,\n/* harmony export */   \"processHexChunk\": () => /* binding */ processHexChunk\n/* harmony export */ });\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _AssetManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AssetManager.js */ \"./src/AssetManager.js\");\n\n\n\n\n\nvar scene;\nvar camera;\nvar testToggle=true;\nvar cached=[];\n\nvar chunkCanvas\nvar chunkCtx\n\n\nfunction init(){\n\tscene=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Scene();\n\t    camera = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.PerspectiveCamera(45, 1, 1, 1000);\n    camera.position.z = 200; //400\n    camera.position.y = -200; //-800\n    camera.up = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 1)\n\n    camera.lookAt(new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 0));\n\n    var ambientLight = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.AmbientLight( 0x8F8F8F ); // soft white light  0x404040\n   scene.add( ambientLight );\n\n\n\n    //let m=Render.cubic(100,100,1)\n    //scene.add(m)\n    ///\n    chunkCanvas=document.createElement('Canvas')\n    chunkCanvas.width=''+32*1.73*3\n    chunkCanvas.height=''+32*3\n    chunkCanvas.style.zIndex=99\n    chunkCanvas.style.border='red solid 3px'\n    chunkCanvas.style.position='absolute'\n    chunkCanvas.style.top='0px'\n    document.querySelector('#main').appendChild(chunkCanvas)\n    chunkCtx = chunkCanvas.getContext('2d')\n}\n\nfunction make(m,size,offset){\n    if(size)\n        m.scale.set(size,size,size)\n    else\n        m.scale.set(110,110,110)\n\n    if(offset)\n        m.position.set(0,0,offset)\n    else\n        m.position.set(0,0,-30)\n\n    scene.add(m)\n\tlet val=_Render_js__WEBPACK_IMPORTED_MODULE_1__.bufferPrint(scene,camera)\n    //document.querySelector('#main').appendChild(pic);\n\n    scene.remove(m)\n    return val;\n}\nfunction generate(m,size,offset){\n    let pic= document.createElement('img');\n    pic.className='hexPortrait'\n    pic.setAttribute('src', make(m,size,offset));\n    return pic;\n    //document.querySelector('#main').appendChild(pic);\n}\nfunction test(){\n\tif(testToggle)\n\t\t_Render_js__WEBPACK_IMPORTED_MODULE_1__.toggleScene(scene,camera);\n\telse\n\t\t_Render_js__WEBPACK_IMPORTED_MODULE_1__.toggleScene();\n\ttestToggle=!testToggle;\n}\n\nfunction get(m,size,offset){\n    let result=cached[m]\n    if(result){\n        return result\n    }else{\n        let model=_AssetManager_js__WEBPACK_IMPORTED_MODULE_2__.make(m)\n        result=make(model,size,offset)\n        cached[m]=result\n        return result\n    }\n}\n\nvar chunkCanvas\nfunction processHexChunk(chunk){\n    //let skew = 4  * Math.sqrt(3);\n    let skew= Math.sqrt(3)\n    //m.position.set((-HALF_GRID) + x * skew * 2 + y * skew, y * SCALE * 1.5, -SCALE * .2) //z -SCALE*.2\n\n    chunkCtx.clearRect(0,0,+32*1.73*3,32*3);\n    let data=chunk.grid\n    for(let i=0;i<data.length;i++){\n        for(let j=0;j<data.length;j++){\n            let val=data[i][j]\n            let color='black'\n            switch(val){\n                case 0: color='#3449CF';break; //water\n                case 1: color='#2E4209';break; //grass   #2E4209 6CA90B\n                case 3: color='#4C3200';break; //mountain\n                case 4: color='#4F5822';break; //tree\n                case 5: color='#594C40';break; //house\n                case 6: color='#515157';break; //wall\n            }\n\n            chunkCtx.beginPath();\n            chunkCtx.rect(Math.floor(j*skew+i*3*37.5/32), (data.length-j -1)*3, 5, 3);\n            chunkCtx.fillStyle = color;\n            chunkCtx.fill();\n        }\n\n    }\n    let texture =new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.CanvasTexture( chunkCanvas)\n    let material = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ map : texture,transparent:true });\n    let size=8*32*skew\n    let plane = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh(new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.PlaneGeometry(644.3229004156224, 372), material);\n    console.log('actual ',chunk.actualX,chunk.actualY) //\n    plane.position.set(chunk.actualX+644.3229004156224*2.5 +48,chunk.actualY+372/2,chunk.x%2==1?0.1:0) //644.3229004156224/2\n    return plane\n    //Render.addModel(plane)\n}\n\n\n\n//# sourceURL=webpack://buup/./src/PictureMaker.js?");

/***/ }),

/***/ "./src/PlayerManager.js":
/*!******************************!*\
  !*** ./src/PlayerManager.js ***!
  \******************************/
/*! namespace exports */
/*! export getOwnColor [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getOwnPlayer [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getUser [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setOwnPlayer [provided] [no usage info] [missing usage info prevents renaming] */
/*! export users [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"getUser\": () => /* binding */ getUser,\n/* harmony export */   \"getOwnPlayer\": () => /* binding */ getOwnPlayer,\n/* harmony export */   \"setOwnPlayer\": () => /* binding */ setOwnPlayer,\n/* harmony export */   \"getOwnColor\": () => /* binding */ getOwnColor,\n/* harmony export */   \"users\": () => /* binding */ users\n/* harmony export */ });\n\nvar users;\nvar ownPlayer;\n\n\nfunction init(data){\n\tusers=[];\n\tdata.forEach(user=>{\n\t\tusers[user.id]=user;\n\t})\n}\nfunction getUser(id){\n\treturn users[id]\n}\n\nfunction getOwnPlayer(){\n\treturn ownPlayer;\n}\nfunction setOwnPlayer(id){\n\n\townPlayer=users[id];\n\tif(!ownPlayer)\n\t\tthrow new Error(\"player doesn't exist\")\n}\nfunction getOwnColor(){\n\treturn parseInt('0x'+ownPlayer.color.substring(1))\n}\n\n\n\n//# sourceURL=webpack://buup/./src/PlayerManager.js?");

/***/ }),

/***/ "./src/Render.js":
/*!***********************!*\
  !*** ./src/Render.js ***!
  \***********************/
/*! namespace exports */
/*! export addAnchor [provided] [no usage info] [missing usage info prevents renaming] */
/*! export addModel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export addModel2 [provided] [no usage info] [missing usage info prevents renaming] */
/*! export blood [provided] [no usage info] [missing usage info prevents renaming] */
/*! export bufferPrint [provided] [no usage info] [missing usage info prevents renaming] */
/*! export cubic [provided] [no usage info] [missing usage info prevents renaming] */
/*! export cubicColored [provided] [no usage info] [missing usage info prevents renaming] */
/*! export cylinder [provided] [no usage info] [missing usage info prevents renaming] */
/*! export defaultModel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getAlphaCanvas [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getCursor [provided] [no usage info] [missing usage info prevents renaming] */
/*! export ground [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export loadModel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export makeGroup [provided] [no usage info] [missing usage info prevents renaming] */
/*! export plane [provided] [no usage info] [missing usage info prevents renaming] */
/*! export player [provided] [no usage info] [missing usage info prevents renaming] */
/*! export removeModel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export resize [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setClearColor [provided] [no usage info] [missing usage info prevents renaming] */
/*! export togglePhysicsDebugger [provided] [no usage info] [missing usage info prevents renaming] */
/*! export toggleScene [provided] [no usage info] [missing usage info prevents renaming] */
/*! export wood [provided] [no usage info] [missing usage info prevents renaming] */
/*! export yellow [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"addModel\": () => /* binding */ addModel,\n/* harmony export */   \"removeModel\": () => /* binding */ removeModel,\n/* harmony export */   \"setClearColor\": () => /* binding */ setClearColor,\n/* harmony export */   \"toggleScene\": () => /* binding */ toggleScene,\n/* harmony export */   \"defaultModel\": () => /* binding */ defaultModel,\n/* harmony export */   \"makeGroup\": () => /* binding */ makeGroup,\n/* harmony export */   \"addModel2\": () => /* binding */ addModel2,\n/* harmony export */   \"cubic\": () => /* binding */ cubic,\n/* harmony export */   \"cubicColored\": () => /* binding */ cubicColored,\n/* harmony export */   \"cylinder\": () => /* binding */ cylinder,\n/* harmony export */   \"plane\": () => /* binding */ plane,\n/* harmony export */   \"wood\": () => /* binding */ wood,\n/* harmony export */   \"ground\": () => /* binding */ ground,\n/* harmony export */   \"blood\": () => /* binding */ blood,\n/* harmony export */   \"yellow\": () => /* binding */ yellow,\n/* harmony export */   \"getAlphaCanvas\": () => /* binding */ getAlphaCanvas,\n/* harmony export */   \"bufferPrint\": () => /* binding */ bufferPrint,\n/* harmony export */   \"loadModel\": () => /* binding */ loadModel,\n/* harmony export */   \"addAnchor\": () => /* binding */ addAnchor,\n/* harmony export */   \"resize\": () => /* binding */ resize,\n/* harmony export */   \"player\": () => /* binding */ player,\n/* harmony export */   \"togglePhysicsDebugger\": () => /* binding */ togglePhysicsDebugger,\n/* harmony export */   \"getCursor\": () => /* binding */ getCursor\n/* harmony export */ });\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n/* harmony import */ var _Main_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Main.js */ \"./src/Main.js\");\n/* harmony import */ var _Physics_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Physics.js */ \"./src/Physics.js\");\n/* harmony import */ var _Control_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Control.js */ \"./src/Control.js\");\n/* harmony import */ var _Environment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Environment */ \"./src/Environment.js\");\n/* harmony import */ var _lib_GLTFLoader_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/GLTFLoader.js */ \"./src/lib/GLTFLoader.js\");\n/* harmony import */ var _Experimental_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Experimental.js */ \"./src/Experimental.js\");\n/* harmony import */ var _lib_EffectComposer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/EffectComposer.js */ \"./src/lib/EffectComposer.js\");\n/* harmony import */ var _lib_ShaderPass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/ShaderPass.js */ \"./src/lib/ShaderPass.js\");\n/* harmony import */ var _lib_SSAOPass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./lib/SSAOPass.js */ \"./src/lib/SSAOPass.js\");\n/* harmony import */ var _lib_CannonDebugRenderer_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./lib/CannonDebugRenderer.js */ \"./src/lib/CannonDebugRenderer.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//import CannonDebugRenderer\n\n\n\n//import * as Control from \"./Control.js?v=16\";\n//import * as World from \"./World.js?v=16\";\n//import {OrbitControls} from \"./lib/OrbitControls.js\";\n//import * as Texture from \"./Texture.js?v=16\";\n//import * as Stats from \"./lib/stats.js\";\n//import * as AssetManager from \"./AssetManager.js?v=16\";\n//import * as Experiment from \"./Experiment.js?v=16\";\n\n\nvar camera, renderer;\nvar scene\nvar group\n\nvar activeCamera, activeScene;\n\n\nvar docWidth, docHeight;\nvar anchors=[];\n\nvar loader;\nvar mixer;\n\nvar SHADOW_SIZE = 2048;\nvar SIZE_DIVIDER = 8;\n\nvar alphaCanvas;\n\n\nvar activeCanvas;\n\nvar composer;\n\nvar specterMaterial;\nvar defaultMat\n\n\nvar player;\nvar wood;\nvar ground;\nvar blood;\nvar yellow;\n\nvar raycaster\nvar pointer;\nvar hexSelector;\nvar pointerMat;\nvar pointerMatOn;\n\nvar physDebugger;\nvar defaultModel;\n\n\nfunction init() {\n\n\n\n    camera = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 5000);\n    camera.position.z = 200; //400\n    camera.position.y = -200; //-800\n    camera.up = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 1)\n\n    camera.lookAt(new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 0));\n\n    scene = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Scene();\n    activeScene = scene;\n\n    alphaCanvas = document.querySelector('.canvasHolder');\n\n\n\n\n    renderer = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.WebGLRenderer({ antialias: true, alpha: true, }); //\n    renderer.shadowMap.enabled = true;\n    renderer.shadowMap.type = _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.PCFSoftShadowMap;\n    renderer.toneMapping = _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.ACESFilmicToneMapping\n    renderer.outputEncoding = _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.sRGBEncoding\n\n    renderer.setClearColor(0xFF7F32, 1); //0xb0e9fd,1);//0xb0e9fd,1)\n\n    alphaCanvas.appendChild(renderer.domElement);\n\n    loader = new _lib_GLTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.GLTFLoader();\n\n    initCustomMaterial();\n\n    activeCanvas = alphaCanvas;\n\n    activeScene = scene;\n    activeCamera = camera;\n\n\n\n    resize();\n\n\n    composer = new _lib_EffectComposer_js__WEBPACK_IMPORTED_MODULE_7__.EffectComposer(renderer);\n    //var luminosityPass = new ShaderPass(LuminosityShader);\n    //composer.addPass(luminosityPass);\n    let ssaoPass = new _lib_SSAOPass_js__WEBPACK_IMPORTED_MODULE_9__.SSAOPass(scene, camera, 300, 200);\n    ssaoPass.kernelRadius = 6;\n    ssaoPass.minDistance = 0.00015;\n    ssaoPass.maxDistance = 0.001;\n    composer.addPass(ssaoPass);\n    window.ssao = ssaoPass\n\n\n\n    let material = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ color: 0x75D5CE });\n    new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0x20E89F, metalness: 0, roughness: 1.0 });\n\n    wood = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0x20E89F, metalness: 0, roughness: 1.0 });\n    ground = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0x5471A5, metalness: 0, roughness: 1.0 });\n    let guyMat = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0xEAF722, metalness: 0, roughness: 1.0 });\n    defaultMat = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0xCF2ADE, metalness: 0, roughness: 1.0 });\n    blood = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0xB60B0B, metalness: 0, roughness: 1.0 });\n    yellow = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0xEAF722, metalness: 0, roughness: 1.0 });\n\n\n    //material = new THREE.MeshBasicMaterial( {color: new THREE.Color(\"white\")} );\n    /*geometry = new THREE.BoxBufferGeometry( 100, 100, 100 );\n    cube = new THREE.Mesh( geometry, material );\n    cube.position.z=50;\n    scene.add( cube );*/\n    group = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Group();\n\n    /*\n        group.add(cubic(10,100,50,-50,0,50,wood));\n        group.add(cubic(10,100,50,50,0,50,wood));\n        group.add(cubic(100,10,50,0,50,50,wood));\n        group.add(cubic(100,100,10,0,0,20,ground));*/\n\n    player = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Group();\n    let whiteMat = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ color: 0xFFFFFF, side: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.FrontSide });\n\n    let blackMat = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ color: 0x321818, side: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.FrontSide });\n\n\n    let p1 = cubic(1, 1, 2, 0, 0, 0, guyMat);\n    let p2 = cubic(1, .2, 1, 0, .5, .5, whiteMat)\n    let p3 = cubic(.3, .2, .3, 0, .6, .5, blackMat)\n\n    player.add(p1)\n    player.add(p2)\n    player.add(p3)\n    group.add(player)\n\n    let referenceCube = cubic(.5, .5, 1.5, 0.75, 0, 20, new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ color: 0xD62B5F }))\n    group.add(referenceCube)\n\n    scene.add(group)\n    pointerInit();\n    _Environment__WEBPACK_IMPORTED_MODULE_4__.init();\n    _Control_js__WEBPACK_IMPORTED_MODULE_3__.setRenderer(renderer, alphaCanvas, camera, false)\n\n    let l = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ color: 0xff0000 });\n    let r = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ color: 0xff8800 });\n    let f = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ color: 0xffff00 });\n    let b = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ color: 0x00ff00 });\n    let u = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ color: 0x0000ff });\n    let d = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ color: 0x8800ff });\n    let cub = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BoxBufferGeometry(1, 1, 1);\n    defaultModel = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh(cub, [l, r, f, b, u, d]);\n\n\n    setTimeout(function() {\n        animate();\n    }, 1)\n\n    return alphaCanvas\n}\n\nfunction pointerInit() {\n    let pointerGeom = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.CircleGeometry(1, 8);\n    //pointerGeom.rotateX(-Math.PI/2.0);\n    pointerMat = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ color: 0x4AE13A });\n    pointerMatOn = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ color: 0xEBEE00 });\n    pointer = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh(pointerGeom, pointerMat);\n    pointer.position.z = 0.05;\n    scene.add(pointer);\n     raycaster= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Raycaster();\n}\n\nfunction getAlphaCanvas() {\n    return alphaCanvas;\n}\n\nfunction togglePhysicsDebugger(bool) {\n\n    if(bool && !physDebugger)\n        physDebugger = new _lib_CannonDebugRenderer_js__WEBPACK_IMPORTED_MODULE_10__.CannonDebugRenderer(scene, _Physics_js__WEBPACK_IMPORTED_MODULE_2__.world); //Physics.createPhysicsDebugger(scene)\n}\n\nfunction loadModel(model, callback, texture, color) {\n    loader.load(\n        ('./' + model), //villager22.gltf',\n        (gltf) => {\n            // called when the resource is loaded\n            //gltf.scene.scale.set(10,10,10);\n            let model; //=gltf.scene.children[0];\n            gltf.scene.rotation.x = Math.PI / 2;\n            gltf.scene.traverse(function(child) {\n                if(child instanceof _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh) {\n                    //if(child.name==\"Cube\"){\n                    model = child;\n                    if(!texture) {\n                        if(color)\n                            child.material = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: color, metalness: 0, roughness: 1.0 }); // \n                        else\n                            child.material = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ vertexColors: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.VertexColors, metalness: 0, roughness: 1.0 }); // \n\n                        child.material.needsUpdate = true;\n                        //child.material.skinning=true;\n                    }\n                    //child.material.morphTargets=true;\n\n                    //child.material.map.needsUpdate = true;\n                    // }else{\n\n                    //}\n                }\n            });\n            //gltf.scene.children[0].children[1].scale.set(20,20,20);\n            //gltf.scene.children.pop();\n            //let mixer = new THREE.AnimationMixer( gltf.scene );\n            //model=gltf.scene.children[0]\n            let m2 = gltf.scene.children[0];\n            if(model) {\n                var animations = gltf.animations;\n                if(animations && animations.length) {\n\n                    mixer = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.AnimationMixer(model);\n                    for(var i = 0; i < animations.length; i++) {\n                        var animation = animations[i];\n                        // There's .3333 seconds junk at the tail of the Monster animation that\n                        // keeps it from looping cleanly. Clip it at 3 seconds\n\n                        //if ( sceneInfo.animationTime ) {\n                        //    animation.duration = sceneInfo.animationTime;\n\n\n                        // }\n                        let action = mixer.clipAction(animation);\n                        //action.setEffectiveTimeScale(200);\n                        //action.timeScale=0.002;\n                        action.timeScale = 0.002;\n                        //if ( state.playAnimation ) \n                        action.play();\n                    }\n                }\n                //mainScene.add( gltf.scene.children[0] );\n            }\n            callback(gltf.scene);\n        },\n        (xhr) => {\n            // called while loading is progressing\n            console.log(`${( xhr.loaded / xhr.total * 100 )}% loaded`);\n        },\n        (error) => {\n            // called when loading has errors\n            console.error('An error happened', error);\n        },\n    );\n}\n\nfunction resize() {\n    //Math.max(window.screen.width, window.innerWidth)\n    //Math.max(window.screen.height, window.innerHeight)\n    if(window.screen.width > window.innerWidth) {\n        docWidth = window.innerWidth\n        docHeight = window.innerHeight\n    } else {\n        docWidth = window.screen.width\n        docHeight = window.screen.height\n    }\n\n    //docWidth =  window.innerWidth //Math.max(window.screen.width, window.innerWidth)\n    //docHeight = window.innerHeight //Math.max(window.screen.height, window.innerHeight)//window.innerHeight;\n    camera.aspect = docWidth / docHeight;\n    camera.updateProjectionMatrix();\n\n    renderer.setPixelRatio(0.5); //window.devicePixelRatio / SIZE_DIVIDER);\n    renderer.setSize(docWidth, docHeight);\n}\n\nvar dir = 1;\n\nfunction animate(time) {\n    _Physics_js__WEBPACK_IMPORTED_MODULE_2__.updatePhysics();\n    //group.rotation.z+=0.002*dir;\n    if(group.rotation.z > Math.PI / 16)\n        dir = -1;\n    else if(group.rotation.z < -Math.PI / 16)\n        dir = 1;\n\n    applyCursor()\n    _Environment__WEBPACK_IMPORTED_MODULE_4__.animate();\n\n    if(physDebugger)\n        physDebugger.update();\n    renderer.render(activeScene, activeCamera);\n    //composer.render();\n    if(anchors.length>0){\n        anchors.forEach((a,i)=>{\n            updateAnchor(a,i);\n        })\n    }\n    _Experimental_js__WEBPACK_IMPORTED_MODULE_6__.animate();\n    requestAnimationFrame(animate);\n}\n\nfunction dumpImage(img) {\n    let dom = document.querySelector('#afterImage');\n    if(dom)\n        dom.setAttribute('src', img);\n}\n\nfunction bufferPrint(sc, cam) {\n    //renderer.setPixelRatio(0.2)\n    //_grabImage=true;\n\n    //renderer.setPixelRatio(0.5)\n\n    renderer.setSize(128, 128);\n    renderer.setClearColor(0xffffff, 0)\n\n    if(sc && cam) {\n        renderer.render(sc, cam);\n    } else\n        renderer.render(getScene(), camera);\n    //dumpImage(renderer.domElement.toDataURL());\n    //renderer.setPixelRatio(0.5)\n    let m = renderer.domElement.toDataURL()\n    renderer.setSize(docWidth, docHeight);\n    return m;\n}\n\n\nfunction addAnchor(host, bubble) {\n    let anchor = {\n        host: host,\n        bubble: bubble,\n        x: 0,\n        y: 0,\n        offset: 0,\n    }\n    anchors.forEach(a => {\n        if(a.host == host) {\n            a.offset -= 40;\n        }\n    })\n    anchors.push(anchor);\n    console.log(anchors.length + ' anchors');\n    updateAnchor(anchor, anchors.length - 1);\n    return anchor;\n}\n\nfunction updateAnchor(anchor, index) {\n    if(!anchor.bubble) {\n        anchors.splice(index, 1);\n        return false;\n    }\n    if(anchor.host) {\n        let vector = projectVector(anchor.host);\n        anchor.bubble.style.left = -16 + vector.x + 'px';\n        anchor.bubble.style.top = (40 + anchor.offset + vector.y) + 'px';\n        anchor.x = vector.x;\n        anchor.y = vector.y;\n    }\n\n}\n\nfunction roundEdge(x) {\n    x = x % (Math.PI)\n    if(x < 0)\n        x += Math.PI * 2;\n\n    if(x > Math.PI / 4) {\n        if(x > 5 * Math.PI / 4) {\n            if(x < 7 * Math.PI / 4) {\n                return Math.PI * 3 / 2;\n            }\n        } else {\n            if(x > 3 * Math.PI / 4) {\n                return Math.PI;\n            } else {\n                return Math.PI / 2;\n            }\n        }\n    }\n    return 0;\n}\n\nfunction syncModel(index, obj) {\n    let m = modelsIndexed[index];\n    m.position.x = obj.x;\n    m.position.y = obj.y;\n    m.position.z = obj.z;\n}\n\nfunction createModel(index) {\n    let model = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh(cubeGeometry, cubeMaterial);\n    modelsIndexed[index] = model;\n    return model;\n}\n\nfunction addModel(model) {\n    group.add(model)\n}\n\nfunction addModel2(model) {\n    scene.add(model)\n}\n\nfunction removeModel(model) {\n    group.remove(model)\n}\n\nfunction cubic(i, j, k, x, y, z, c) {\n    let geometry = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BoxBufferGeometry(i, j, k);\n    if(!c)\n        c = defaultMat\n\n    let cube = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, c);\n    cube.castShadow = true;\n\n    cube.position.x = x ? x : 0;\n    cube.position.y = y ? y : 0;\n    cube.position.z = z ? z : 0;\n    return cube;\n}\n\nfunction cubicColored(i, j, k, x, y, z, c) {\n    if(!c)\n        c = defaultMat\n    else\n        c = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ color: c });\n\n    return cubic(i, j, k, x, y, z, c)\n}\n\nfunction cylinder(i, j, k, x, y, z, c) {\n    let geometry = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.CylinderGeometry(i, j, k, 6);\n    if(!c)\n        c = defaultMat\n    else\n        c = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ color: c });\n\n    geometry.rotateX(Math.PI / 2)\n    geometry.rotateZ(Math.PI / 2)\n\n    let cyl = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, c);\n    cyl.castShadow = true;\n    cyl.position.x = x ? x : 0;\n    cyl.position.y = y ? y : 0;\n    cyl.position.z = z ? z : 0;\n    return cyl;\n}\n\nfunction plane(i, j, k) {\n    const geometry = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.PlaneBufferGeometry(i, j);\n    const material = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({ color: 0xffff00, side: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.DoubleSide });\n    const plane = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, material);\n    return plane\n}\n\n\nfunction getRandomColor() {\n    var letters = '0123456789ABCDEF';\n    var color = Math.random() > 0.5 ? 0x66B136 : 0x76610E;\n    return parseInt(color);\n}\n\nfunction applyCursor() {\n    /*if(Control.down()) {\n        pointer.material = pointerMatOn;\n    } else\n        pointer.material = pointerMat;*/\n\n    var vector = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    vector.set((_Control_js__WEBPACK_IMPORTED_MODULE_3__.screenX() / window.innerWidth) * 2 - 1, -(_Control_js__WEBPACK_IMPORTED_MODULE_3__.screenY() / window.innerHeight) * 2 + 1, 0.5);\n    vector.unproject(camera)\n    var dir = vector.sub(camera.position).normalize();\n    var distance = -camera.position.z / dir.z;\n    var pos = camera.position.clone().add(dir.multiplyScalar(distance));\n/*\n    let intersects = raycaster.intersectObjects( scene.children,true );\n\n\n     console.log('sect',intersects.length)\n    if(intersects.length>0){\n        if(intersects[0].point.z>=pos.z){\n            pos.set(intersects[0].point.x,intersects[0].point.y,intersects[0].point.z)\n            console.log('sect')\n        }\n    }\n*/\n\n    pointer.position.x = pos.x;\n    pointer.position.y = pos.y\n    pointer.position.z = pos.z+0.5;\n    // console.log(pointer.position)\n    _Control_js__WEBPACK_IMPORTED_MODULE_3__.setVector(pointer.position);\n}\n\nfunction projectVector(object) {\n\n    var width = docWidth,\n        height = docHeight;\n    var widthHalf = width / 2,\n        heightHalf = height / 2;\n\n    let vector = object.position.clone();\n    vector.z += 4\n    //vector.applyMatrix4(object.matrixWorld);\n    vector.project(camera)\n\n    //var projector = new THREE.Projector();\n    //projector.projectVector( vector.setFromMatrixPosition( object.matrixWorld ), camera );\n\n    vector.x = (vector.x * widthHalf) + widthHalf;\n    vector.y = -(vector.y * heightHalf) + heightHalf;\n    return vector;\n\n}\n\n\nvar specterMaterial\n\nfunction initCustomMaterial() {\n\n    var meshphysical_frag = `\n    #define STANDARD\n#ifdef PHYSICAL\n    #define REFLECTIVITY\n    #define CLEARCOAT\n    #define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n    uniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n    uniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n    uniform float clearcoat;\n    uniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n    uniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n    varying vec3 vNormal;\n    #ifdef USE_TANGENT\n        varying vec3 vTangent;\n        varying vec3 vBitangent;\n    #endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n    #include <clipping_planes_fragment>\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <roughnessmap_fragment>\n    #include <metalnessmap_fragment>\n    #include <normal_fragment_begin>\n    #include <normal_fragment_maps>\n    #include <clearcoat_normal_fragment_begin>\n    #include <clearcoat_normal_fragment_maps>\n    #include <emissivemap_fragment>\n    #include <lights_physical_fragment>\n    #include <lights_fragment_begin>\n    #include <lights_fragment_maps>\n    #include <lights_fragment_end>\n    #include <aomap_fragment>\n    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n    #ifdef TRANSPARENCY\n        diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n    #endif\n    gl_FragColor = vec4( outgoingLight,1.-(((0.2125 * outgoingLight.r) + (0.7154 * outgoingLight.g) + (0.0721 * outgoingLight.b)) ) );\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}`\n\n    //gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\n    /*\n    #ifdef USE_COLOR\n                if(vColor==vec3(0,0,1))\n                    diffuseColor.rgb *= vec3(1,0,0);\n                else\n                    diffuseColor.rgb *= vColor;\n        #endif*/\n\n    //    #include <color_vertex>\n\n    var meshphysical_vert = `#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n    varying vec3 vNormal;\n    #ifdef USE_TANGENT\n        varying vec3 vTangent;\n        varying vec3 vBitangent;\n    #endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nuniform vec3 shirt;\nuniform vec3 wind;\n\nvoid main() {\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #ifdef USE_COLOR\n        if(color==vec3(0,0,1))\n            vColor.xyz = shirt;\n        else\n            vColor.xyz = color.xyz;\n        \n    #endif\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    #include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n    vNormal = normalize( transformedNormal );\n    #ifdef USE_TANGENT\n        vTangent = normalize( transformedTangent );\n        vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n    #endif\n#endif\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <displacementmap_vertex>\n\n    \n        if(color==vec3(1,0,0)){\n            float val=max(0.0, 1.0976 - transformed.z);\n            transformed.xyz+=val*wind;\n            transformed.y*=1.0+sin((wind.z+transformed.z)*4.0)/2.0;\n\n        }\n    \n\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    vViewPosition = - mvPosition.xyz;\n    #include <worldpos_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>\n}`\n\n    var uniforms = _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.UniformsUtils.merge(\n        [_lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.ShaderLib.standard.uniforms,\n            //{shirt: {value:new THREE.Vector3(0,1,0)},\n            //wind: {value:new THREE.Vector3(0,0,0)}}\n        ]\n    );\n\n    /*specterMaterial =  new THREE.ShaderMaterial({\n    uniforms: uniforms,\n    fragmentShader: fragmentShader(),\n    vertexShader: vertexShader(),\n  })**/\n\n\n    specterMaterial = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.ShaderMaterial({\n        uniforms: uniforms,\n        derivatives: false,\n        lights: true,\n        vertexColors: true,\n        vertexShader: meshphysical_vert,\n        fragmentShader: meshphysical_frag,\n        roughness: 0.0,\n        metalness: 1.0,\n        //vertexShader: THREE.ShaderChunk.cube_vert,\n        //fragmentShader: THREE.ShaderChunk.cube_frag\n    });\n\n\n}\n\nfunction toggleScene(sc, cam) {\n    if(cam && sc) {\n        activeCamera = cam;\n        activeScene = sc;\n    } else {\n        activeScene = scene;\n        activeCamera = camera;\n    }\n}\n\nfunction getCursor(){\n    return pointer;\n}\n\n\n\n/////SCENE///////\n\nvar emptyScene;\nvar scenes;\n\n\n\nfunction sceneInit() {\n    emptyScene = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Scene();\n    scenes = [];\n\n    let cubeGeometry = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BoxBufferGeometry(20, 20, 20);\n    let cubeMaterial = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0xff8833 }); //map: texture\n\n    /*\n      var geometry = new THREE.SphereGeometry( 5, 32, 32 );\n      var material = new THREE.MeshBasicMaterial( {color: 0xffff00} );\n      var sphere = new THREE.Mesh( geometry, material );\n\n      sphere.position.set(0,0,-30);\n      cubes.push(sphere);\n      scenes[2].add(sphere);\n      var geo = new THREE.OctahedronGeometry( 30, 1 );\n      var mat = new THREE.MeshBasicMaterial( {color: 0xC92DD1} ); \n      var octa= new THREE.Mesh( geo, mat );\n      octa.position.set(0,0,20);\n      cubes.push(octa);\n      scenes[3].add(octa);*/\n}\n\n\n\nfunction flipScene(i) {\n    activeScene = i;\n}\nvar activeScene = 0;\nvar activeModule;\n/*\nfunction getScene() {\n    let index = activeScene;\n    let scene = scenes[index];\n    if(scene == undefined) {\n        scene = emptyScene\n        scenes[index] = 'pend';\n\n        //wow this is a conufsing mess but it's functional!\n        let importerFunction = SCENE_IMPORT[index];\n        if(importerFunction) {\n            Main.pendApp(index)\n            importerFunction(module => {\n                scenes[index] = [module.init(index,()=>{Main.clearPendApp(index)},Main.apps[index]), module]\n                \n            });\n        } else {\n            scenes[index] = [emptyScene, undefined]\n        }\n\n    \n    } else if(scene == 'pend') {\n        scene = emptyScene;\n    } else {\n        activeModule = scene[1]; //define the module that's currently active so we can run it's animate function in sceneAnimate()\n        scene = scene[0] //please forgive me, trust me it works\n    }\n\n    return scene;\n}*/\n\n///////////////\n\nfunction setClearColor(a, b) {\n    renderer.setClearColor(a, b);\n}\n\nfunction makeGroup() {\n    return new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Group();\n}\n\n\n\n\n\n\n//# sourceURL=webpack://buup/./src/Render.js?");

/***/ }),

/***/ "./src/Settings.js":
/*!*************************!*\
  !*** ./src/Settings.js ***!
  \*************************/
/*! namespace exports */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init\n/* harmony export */ });\n/* harmony import */ var _HexManager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./HexManager.js */ \"./src/HexManager.js\");\n/* harmony import */ var _Environment_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Environment.js */ \"./src/Environment.js\");\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n\n\n\n\n\nlet settings;\nfunction init() {\n\tsettings=document.querySelector('.settingsPane')\n    addButton('Toggle Hex Grid Lines', _HexManager_js__WEBPACK_IMPORTED_MODULE_0__.setGrid);\n    addButton('Toggle Light Helper', _Environment_js__WEBPACK_IMPORTED_MODULE_1__.setLightHelper);\n    addButton('Toggle Physics Mesh Helper', _Render_js__WEBPACK_IMPORTED_MODULE_2__.togglePhysicsDebugger);\n\n}\n\n\nfunction addButton(text, callback, reference, possibleValues) {\n    let row = document.createElement('div')\n    let button = document.createElement('div');\n    button.classList.add('switch');\n    let defaultState;\n    if(reference) {\n        defaultState = settingsObject[reference];\n    }\n\n    if(possibleValues) { //not boolean\n        if(defaultState != possibleValues[0]) {\n            if(defaultState != possibleValues[possibleValues.length - 1]) {\n                button.classList.add('switchHalf');\n            } else {\n                button.classList.add('switchOn');\n            }\n        }\n        button.setAttribute(\"value\", defaultState);\n        let index = 0;\n        for(let ii = 0; ii < possibleValues.length; ii++) {\n            if(possibleValues[ii] == defaultState) {\n                index = ii;\n            }\n        }\n        button.setAttribute(\"index\", index);\n        button.addEventListener('click', function(ev) {\n            ev.stopPropagation();\n            let i = button.getAttribute(\"index\");\n            i++;\n            if(i >= possibleValues.length) {\n                i = 0;\n            }\n            if(i == 0) {\n                button.classList.remove('switchOn');\n            } else if(i == possibleValues.length - 1) {\n                button.classList.remove('switchHalf');\n                button.classList.add('switchOn');\n            } else {\n                button.classList.add('switchHalf');\n            }\n            let val = possibleValues[i];\n            button.setAttribute(\"value\", val);\n            button.setAttribute(\"index\", i);\n            callback(val);\n            updateSettings(reference, val)\n\n            /*\n            if(!button.classList.contains('switchOn')){\n            \tbutton.classList.add('switchOn')\n            \tcallback(true);\n            \tupdateSettings(reference,true)\n            }else{\n            \tbutton.classList.remove('switchOn')\n            \tcallback(false);\n            \tupdateSettings(reference,false)\n            }*/\n        });\n    } else { //boolean\n        if(defaultState)\n            button.classList.add('switchOn');\n\n        button.addEventListener('click', function(ev) {\n            ev.stopPropagation();\n            if(!button.classList.contains('switchOn')) {\n                button.classList.add('switchOn')\n                callback(true);\n                updateSettings(reference, true)\n            } else {\n                button.classList.remove('switchOn')\n                callback(false);\n                updateSettings(reference, false)\n            }\n        })\n    }\n\n\n\n\n    row.appendChild(button);\n\n    let label = document.createElement('span');\n    label.innerHTML = text;\n    row.appendChild(label);\n    settings.appendChild(row);\n    callback(defaultState)\n}\n\nfunction updateSettings(){\n    \n}\n\n\n\n\n//# sourceURL=webpack://buup/./src/Settings.js?");

/***/ }),

/***/ "./src/UI.js":
/*!*******************!*\
  !*** ./src/UI.js ***!
  \*******************/
/*! namespace exports */
/*! export addConfetti [provided] [no usage info] [missing usage info prevents renaming] */
/*! export cursorMessage [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export systemMessage [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"systemMessage\": () => /* binding */ systemMessage,\n/* harmony export */   \"cursorMessage\": () => /* binding */ cursorMessage,\n/* harmony export */   \"addConfetti\": () => /* binding */ addConfetti\n/* harmony export */ });\n//version 2.5 confetti added\n\n\nlet main;\nlet sysTop;\nlet textDump;\n\nfunction init(mainDom){\n\n\tstyleInit();\n\tif(mainDom){\n\t\tmain=mainDom\n\t}else{\n\t\tmain=document.querySelector(\"#main\")\n\t\tif(!main)\n\t\t\tmain=document.body\n\t}\n\n\n\tif(main){\n\t\tsysTop=document.createElement('div');\n\t\tsysTop.className='uiHolderSysTop';\n\t\tmain.appendChild(sysTop);\n\n\t\t//systemMessage(_spam('this is a test'))\n\t\t\n\n\t\ttextDump=document.createElement('input')\n\t\ttextDump.type='text'\n\t\ttextDump.style.position='fixed'\n\n\t\ttextDump.taxindex='-1'\t\t\t\n\t\ttextDump.style.display='none'\n\t\ttextDump.style.pointerEvents= 'none';\n\n\t\tmain.appendChild(textDump)\n\n\t}else{\n\t\tconsole.error('UI.js:: uh oh! no system dom element found')\n\t}\n\n/*\n\t//dev\n\twindow.addEventListener('keyup',function(ev){\n\t\tif(ev.keyCode==32){\n\t\t\tlet v=Math.random();\n\t\t\tlet type=v>0.2?v>0.4?v>0.6?'warn':'error':'person':'time';\n\t\t\t\n\t\t\tsystemMessage(_spam('this is a test '),type)\n\t\t}else if(ev.keyCode==90){\n\t\t\tDEVVAR=systemMessage('No network connection oh darrrrrrn \\n We\\'ll keep tryna connect in the background ;)','net',true)\n\t\t}else if(ev.keyCode==27){\n\t\t\tDEVVAR.remove();\n\t\t}\n\t})*/\n\n} \n\nfunction systemMessage(m,type,persistant,timeout){\n\tif(!timeout)\n\t\ttimeout=3500\n\tlet dom=document.createElement('div');\n\tdom.className='uiSysTop';\n\n\tlet icon=document.createElement('div');\n\tlet extra=' ';\n\n\tif(typeof type === 'object' && type !== null){\n\t\tif(type.type)\n\t\t\textra+=type.type\n\t\tif(type.color)\n\t\t\tdom.style.backgroundColor=type.color\n\t}else{\n\t\tswitch(type){\n\t\t\tcase 'warn': extra+='uiIconWarning'; dom.style.backgroundColor='#EFEF79';break;\n\t\t\tcase 'error': extra+='uiIconError'; dom.style.backgroundColor='#D25E5E';break;\n\t\t\tcase 'net': extra+='uiIconNet'; dom.style.backgroundColor='#FFC65E';break;\n\t\t\tcase 'person': extra+='uiIconPerson'; dom.style.backgroundColor='#D257FF';break;\n\t\t\tcase 'time': extra+='uiIconTime'; dom.style.backgroundColor='#5094D9';break;\n\t\t\tcase 'success': extra+='uiIconSuccess'; dom.style.backgroundColor='#95F17F';break;\n\t\t}\n\t}\n\n\t\n\ticon.className='uiIcon'+extra;\n\tlet span=document.createElement('span');\n\tspan.innerText=m;\n\n\tspan.addEventListener('click',function(ev){\n\t\t_copyText(span)\n\t\tcursorMessage(ev.clientX,ev.clientY,'Copied');\n\t})\n\n\tdom.appendChild(icon);\n\tdom.appendChild(span);\n\n\n\tfunction _endMessage() {\n\t\tdom.style.animation=persistant?'0.5s uiSysMini forwards':'0.5s uiSysFold forwards';\n\t\tsetTimeout(function(){\n\t\t\tif(persistant){\n\t\t\t\tdom.style.position='absolute'\n\t\t\t\tdom.style.left='-64px'\n\t\t\t\tdom.addEventListener('click',function(ev) {\n\t\t\t\t\tdom.style.animation='0.5s uiSysMax forwards';\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tdom.style.animation='0.5s uiSysMini forwards';\n\t\t\t\t\t},timeout)\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tdom.remove();\n\t\t\t}\n\n\t\t},500);\n\t}\n\tif(!persistant){\n\t\tlet closeButton=document.createElement('div');\n\t\tcloseButton.className='uiCloseButton';\n\t\tdom.appendChild(closeButton);\n\n\t\tcloseButton.addEventListener('click',function(ev){\n\t\t\t_endMessage();\n\t\t})\n\t}\n\n\tsetTimeout(function(){\n\t\t_endMessage();\n\t},timeout)\n\n\tsysTop.appendChild(dom);\n\treturn dom;\n}\n\nfunction cursorMessage(x,y,message){\n\tlet dom=document.createElement('div');\n\tdom.className='uiCursorMessage';\n\tdom.style.left=x+'px'\n\tdom.style.top=y+'px'\n\tdom.innerText=message;\n\tmain.appendChild(dom);\n\tsetTimeout(function(){\n\t\tdom.style.animation='1s uiFade forwards'\n\t\tsetTimeout(function(){\n\t\t\tdom.remove();\n\t\t},1000)\n\t},1500)\n}\n\n\n\nfunction _spam(m){\n\tlet st='';\n\tlet max=Math.random()*20\n\tfor(let i=0;i<max;i++){\n\t\tst+=m;\n\t}\n\treturn st;\n}\nfunction _copyText(dom){\n\ttextDump.value=dom.innerText;\n\ttextDump.style.display='block'\n\ttextDump.select();\n\t\t//_copyText.setSelectionRange(0, 99999); /*For mobile devices*/\n\n\tdocument.execCommand(\"copy\");\n\ttextDump.blur();\n\ttextDump.style.display='none'\n\t\n}\n\nfunction addConfetti(x, y, angle) {\n    let mainDom = document.querySelector('#main')\n\n    let con = document.createElement('div');\n    con.classList.add('confetti');\n    con.innerHTML = '<svg viewbox=\"0 0 100 100\" style=\"fill:none;stroke:lightgreen;stroke-linecap:round\"><path d=\"M45 70L55 75M45 50L55 50M45 30L55 25\" /></svg>';\n    con.style.left = x + 'px'\n    con.style.top = y + 'px',\n        con.style.transform = 'translate(-50%,-50%) rotate(' + (angle ? angle : 0) + 'deg)';\n    setTimeout(function() {\n        con.remove();\n    }, 500);\n    mainDom.appendChild(con)\n}\n\n\nfunction styleInit(){\n\tvar sheet = document.createElement('style')\n\tsheet.innerHTML =`\n\t\t.uiSysTop{\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tposition: relative;\n\t\tmax-width: 600px;\n\t\theight: 64px;\n\t\tborder-radius: 32px;\n\t\ttransform: translate(-50%);\n\t\tbox-shadow: 3px 3px 3px #0005;\n\t\tleft: 50%;\n\t\tbackground: #E0F9D5;\n\t\tmargin: 12px;\n\t\tanimation: uiSysUnfold 1s;\n\t\toverflow: hidden;\n\t\tline-height: 16px;\n\t}\n\t.uiSysTop div{\n\n\t\tmargin: 16px;\n\t\tmargin-left: 0px;\n\t\tflex: 0 0 64px;\n\t}\n\t.uiSysTop span{\n\t\tmargin-right: 48px;\n\t\tmargin-top: 8px;\n\t\tline-height: normal;\n\t\tvertical-align: middle;\n\t\tflex: 1;\n\n\t}\n\t@keyframes uiSysUnfold{\n\t\t0%{\n\t\t\tmax-width: 64px;\n\t\t\ttop: -64px;\n\t\t\topacity: 0.2;\n\t\t}\n\t\t50%{\n\t\t\tmax-width: 64px;\n\t\t\ttop:0px;\n\t\t\topacity: 1;\n\t\t}\n\t\t100%{\n\t\t\ttop: 0px;\n\t\t}\n\t}\n\t@keyframes uiSysFold{\n\t\t100%{\n\t\t\tmax-width: 64px;\n\t\t\ttop: -64px;\n\t\t\topacity: 0.2;\n\t\t\theight: 0;\n\t\t}\n\t\t50%{\n\t\t\tmax-width: 64px;\n\t\t\ttop:0px;\n\t\t\topacity: 1;\n\t\t}\n\t\t0%{\n\t\t\ttop: 0px;\n\n\t\t}\n\t}\n\t@keyframes uiSysMini{\n\t\t100%{\n\t\t\tmax-width: 64px;\n\t\t}\n\t\t50%{\n\t\t\tmax-width: 64px;\n\n\t\t}\n\t\t0%{\n\t\t\t\n\t\t}\n\t}\n\t@keyframes uiSysMax{\n\t\t0%{\n\t\t\tmax-width: 64px;\n\t\t}\n\t\t50%{\n\t\t\tmax-width: 64px;\n\t\t}\n\t\t100%{\n\t\t\tleft: 50%;\n\t\t}\n\t}\n\n\t.uiHolderSysTop{\n\t\twidth: 600px;\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%);\n\t\t/*border: 3px #0999 dotted;*/\n\t\ttransition: height 1s;\n\t}\n\t.uiIcon{\n\t\tfloat: left;\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tbackground-repeat: no-repeat;\n\t    background-size:32px;\n\t    background-position: center center;\n\t\tbackground-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z\"/></svg>');\n\t}\n\t.uiIconWarning{\n\t\tbackground-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\"/></svg>') !important;\n\t}\n\t.uiIconError{\n\t\tbackground-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z\"/></svg>') !important;\n\t}\n\t.uiIconNet{\n\t\tbackground-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M23.64 7c-.45-.34-4.93-4-11.64-4-1.5 0-2.89.19-4.15.48L18.18 13.8 23.64 7zm-6.6 8.22L3.27 1.44 2 2.72l2.05 2.06C1.91 5.76.59 6.82.36 7l11.63 14.49.01.01.01-.01 3.9-4.86 3.32 3.32 1.27-1.27-3.46-3.46z\"/></svg>') !important;\n\t}\n\t.uiIconPerson{\n\t\tbackground-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"/></svg>') !important;\n\t\t\n\t}\n\t.uiIconTime{\n\t\tbackground-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z\"/></svg>') !important;\n\t}\n\n\t.uiIconSuccess{\n\t\tbackground-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\"/></svg>') !important;\n\t}\n\t\n\t.uiCloseButton{\n\t\tposition: absolute;\n\t\tright: 0;\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tbackground-repeat: no-repeat;\n\t    background-size:16px;\n\t    background-position: center center;\n\t\tbackground-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/></svg>');\n\t\t\n\t}\n\n\t.uiCursorMessage{\n\t\tmin-width: 64px;\n\t\theight: 64px;\n\t\tborder: 5px solid white;\n\t\tbackground-color: #FBAB7E;\n\t\tbackground-image: linear-gradient(270deg, #FBAB7E 0%, #F7CE68 100%);\n\n\t\tcolor: white;\n\t\tfont-size: 24px;\n\t\tfont-weight: bold;\n\t\tfont-stretch: ultra-condensed;\n\t\ttransform: translate(-50%,-50%);\n\t\tanimation: uiWobble 0.3s;\n\t\tborder-radius: 32px;\n\t\tbox-sizing: border-box;\n\t\tposition: absolute;\n\t\tline-height: 48px;\n\t\tpadding: 0 8px 0 8px;\n\t\tfont-family: sans-serif;\n\t}\n\n\t@keyframes uiWobble{\n\t\t0%{\n\t\t\ttransform: translate(-50%,-50%) scale(0.6,0.4);\n\t\t}\n\t\t33%{\n\t\t\ttransform: translate(-50%,-50%) scale(0.9,1.15);\n\t\t}\n\t\t66%{\n\t\t\ttransform: translate(-50%,-50%) scale(0.8,0.9);\n\t\t}\n\t\t100%{\n\n\t\t}\n\t}\n\n\t@keyframes uiFade{\n\t\t0%{\n\t\t\topacity: 1;\n\t\t\ttransform: translate(-50%,-50%);\n\t\t}\n\t\t100%{\n\t\t\topacity: 0;\n\t\t\ttransform: translate(-50%,0%)\n\t\t}\n\t}\n\n\t.confetti{\n\t\tpointer-events: none;\n\t\tleft:200px;\n\t\ttop:200px;\n\t\twidth:50px;\n\t\theight:50px;\n\t\tposition: absolute;\n\t\tstroke-width:40px;\n\t\t/*background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100\" height=\"100\" viewbox=\"0 0 100 100\" style=\"fill:none;stroke:lightgray;stroke-linecap:round;\"><path d=\"M45 65L75 75M45 50L75 50M45 35L75 25\" /></svg>');\n\t\tbackground-size: cover;\n\t\tbackground-position: center;\n\t  \tbackground-repeat: no-repeat;*/\n\t}\n\t.confetti svg{\n\t\tposition: relative;\n\t\tanimation: dooter 0.5s forwards;\n\t\ttransform: translate(-50%,-50%);\n\t\twidth: 50px;\n\t\theight: 50px;\n\t}\n\t@keyframes dooter{\n\t\tfrom{\n\t\t\ttransform: translate(0%,0%) scale(0.1,0.1);\n\t\t\tstroke-width:30;\n\t\t}\n\t\tto{\n\t\t\ttransform: translate(100%,0%) scale(3,3);\n\t\t\tstroke-width:0;\n\t\t\tfilter:hue-rotate(270deg);\n\t\t}\n\t}\n\n\t`\n\tdocument.body.appendChild(sheet);\n}\n\n\n\n//# sourceURL=webpack://buup/./src/UI.js?");

/***/ })

},
0,[["./src/Main.js","runtime","libs"]]]);