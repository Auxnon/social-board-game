/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is not neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkbuup"] = self["webpackChunkbuup"] || []).push([["main"],{

/***/ "./src/BarUI.js":
/*!**********************!*\
  !*** ./src/BarUI.js ***!
  \**********************/
/*! namespace exports */
/*! export apps [provided] [no usage info] [missing usage info prevents renaming] */
/*! export clearPendApp [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export pendApp [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"pendApp\": () => /* binding */ pendApp,\n/* harmony export */   \"clearPendApp\": () => /* binding */ clearPendApp,\n/* harmony export */   \"apps\": () => /* binding */ apps,\n/* harmony export */   \"init\": () => /* binding */ init\n/* harmony export */ });\n/* harmony import */ var _UI_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UI.js */ \"./src/UI.js\");\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _Control_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Control.js */ \"./src/Control.js\");\n\r\n\r\n\r\n\r\n//doms\r\nvar apps;\r\nvar svg;\r\nvar path;\r\nvar bar;\r\nvar barBox;\r\nvar mainTitle;\r\n\r\nvar focused;\r\nvar barMove = false;\r\nvar barPos = 1;\r\nvar appPoints;\r\nvar moveFactor = 0;\r\n\r\nvar count = 0;\r\nvar tick = false;\r\n\r\nvar targetMove = undefined;\r\nvar targetPoint = { x: 0, y: 0 }\r\n\r\nvar points;\r\n\r\nvar pendingRenderId; //if not undefined, wait for Render to load and then apply the scene\r\n\r\nvar resizeDebouncer;\r\n\r\nfunction init(argument) {\r\n    let preApps = document.querySelectorAll('.card');\r\n    apps = []\r\n    preApps.forEach(app => { //convert out of a nodelist to an array, it matters trust me\r\n        apps.push(app)\r\n    });\r\n\r\n    apps.forEach((app, index) => {\r\n        app.style.top = Math.random() * window.innerWidth + 'px'\r\n        app.style.left = Math.random() * window.innerHeight + 'px'\r\n        app.offset = { x: 0, y: 0 };\r\n        app.appId = index;\r\n        app.addEventListener('pointerdown', ev => { appSelect(app, ev); })\r\n        app.addEventListener('dragstart', ev => { ev.preventDefault() })\r\n    });\r\n\r\n    window.addEventListener('pointerup', winMouseUp)\r\n    window.addEventListener('resize', resize);\r\n    //initLine();\r\n    window.addEventListener('pointermove', mousemove)\r\n\r\n    barInit();\r\n\r\n    resize();\r\n    animate();\r\n    //setInterval(() => { boundaryCheck() }, 3000)\r\n}\r\n\r\nfunction openApp(id) {\r\n    let app = apps[id];\r\n    if(app) {\r\n        app.classList.add('cardMax')\r\n        app.focused = true;\r\n        app.style.zIndex = 0;\r\n\r\n        if(app.id=='landscapeCard'){\r\n            _Control_js__WEBPACK_IMPORTED_MODULE_2__.secondaryTouchPan()\r\n        }else{\r\n             _Control_js__WEBPACK_IMPORTED_MODULE_2__.primaryTouchPan()\r\n        }\r\n        /*if(Render) {\r\n            openAppApplyRender(id, app)\r\n        } else {\r\n            pendingRenderId = id;\r\n            pendApp(id);\r\n        }*/\r\n        focused = app;\r\n    }\r\n}\r\n\r\nfunction openAppApplyRender(id, app) {\r\n    let d = _Render_js__WEBPACK_IMPORTED_MODULE_1__.getAlphaCanvas();\r\n    d.style.opacity = 1;\r\n    d.remove();\r\n\r\n    let afterImage = document.querySelector('#afterImage');\r\n\r\n    afterImage.remove();\r\n\r\n\r\n    app.appendChild(d);\r\n\r\n    if(focused) {\r\n        focused.appendChild(afterImage);\r\n        afterImage.style.opacity = 1;\r\n        setTimeout(() => { afterImage.style.opacity = 0; }, 1);\r\n    } else { //silly I know but it's just easier to keep the afterImage within the dom, even if in this logical case it's not used\r\n        afterImage.style.opacity = 0;\r\n        if(app == 0)\r\n            apps[1].appendChild(afterImage);\r\n        else\r\n            apps[0].appendChild(afterImage);\r\n    }\r\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.bufferPrint();\r\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.flipScene(id)\r\n}\r\n\r\nfunction closeApp(disableFade) {\r\n    if(focused) {\r\n        focused.classList.remove('cardMax')\r\n        focused.style.zIndex = 2;\r\n        focused.focused = undefined; //wow why did i name this like this\r\n        _Control_js__WEBPACK_IMPORTED_MODULE_2__.primaryTouchPan()\r\n        /*window.history.pushState({}, '', '/');\r\n        if(!disableFade && Render) {\r\n            let d = Render.getAlphaCanvas();\r\n            setTimeout(() => { d.style.opacity = 0; }, 1);\r\n            d.style.opacity = 1;\r\n        }*/\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction resize() {\r\n\r\n    clearTimeout(resizeDebouncer);\r\n    resizeDebouncer = setTimeout(function() {\r\n        //svg.setAttribute('width', window.innerWidth + \"px\")\r\n        //svg.setAttribute('height', window.innerHeight + \"px\")\r\n        barAdjust();\r\n        _Render_js__WEBPACK_IMPORTED_MODULE_1__.resize();\r\n\r\n        //UI.systemMessage('inner ' + window.innerWidth + '; screen ' + window.screen.width, 'success')\r\n    }, 250);\r\n\r\n\r\n}\r\n\r\nfunction rand() {\r\n    return Math.random() * 100 - 50;\r\n}\r\n\r\n\r\nfunction barInit() {\r\n    bar = document.querySelector('#bar')\r\n    let barHandle = document.querySelector('#barHandle')\r\n    barHandle.addEventListener('pointerdown', ev => {\r\n        //let xx = barBox.left //-(barBox.right-barBox.left)/2\r\n        //let yy = barBox.top //-(barBox.bottom-barBox.top)/2\r\n\r\n        barMove = true; //{x:ev.clientX-xx,y:ev.clientY-yy};\r\n\r\n        /*if(points.length < 10) { //rebuild are point array\r\n            let startPoint = points[0];\r\n            let array = Array(7).fill(startPoint);\r\n            points = array.concat(points)\r\n        }\r\n\r\n        barLineFactor = 0;*/\r\n    })\r\n    barHandle.addEventListener('dragstart', ev => { ev.preventDefault() })\r\n    /*barHandle.addEventListener('pointerup',ev=>{\r\n    \tbarMove=false;\r\n    })*/\r\n\r\n    appPoints = [];\r\n\r\n    barHandle.style.transform = 'translate(-50%,-200%)';\r\n    bar.style.left = '50%';\r\n    bar.style.top = (window.innerHeight - 64) + 'px';\r\n\r\n    barCalculate(true);\r\n}\r\n\r\nfunction barCalculate(notate) {\r\n\r\n    //first determine  how many apps will be visably part of the app bar\r\n    let count = 0;\r\n    let appsInRow = [];\r\n    let sideWays = barPos == 0 || barPos == 2;\r\n\r\n    if(!notate) {\r\n        apps.forEach(app => {\r\n            if(app.spot != -1) {\r\n                appsInRow.push(app)\r\n                count++;\r\n            }\r\n        })\r\n    } else {\r\n        count = apps.length;\r\n        appsInRow = apps;\r\n    }\r\n    if(sideWays) {\r\n        bar.style.height = (count > 0 ? count : 1) * 64 + 'px'\r\n        bar.style.width = '82px'\r\n        \r\n    } else {\r\n        bar.style.width = (count > 0 ? count : 1) * 64 + 'px'\r\n        bar.style.height = '82px'\r\n    }\r\n\r\n    let rect = bar.getBoundingClientRect();\r\n    barBox = rect\r\n    let width = rect.width;\r\n    let height = rect.height;\r\n\r\n    let ratio;\r\n    if(sideWays)\r\n        ratio = height / (count);\r\n    else\r\n        ratio = width / (count);\r\n\r\n    if(!notate) {\r\n        if(sideWays){\r\n            appsInRow.sort(function(a, b) {\r\n                return parseInt(a.style.top) - parseInt(b.style.top);\r\n            });\r\n            //bar.style.borderWidth=\"0 6px 0px 6px\";\r\n\r\n        }else\r\n            appsInRow.sort(function(a, b) {\r\n                return parseInt(a.style.left) - parseInt(b.style.left);\r\n            });\r\n    }\r\n\r\n\r\n    for(let i = 0; i < count; i++) {\r\n        if(sideWays)\r\n            appPoints[i] = { x: rect.left + width / 2, y: 32 + rect.top + (i) * ratio };\r\n        else\r\n            appPoints[i] = { x: 32 + rect.left + (i) * ratio, y: rect.top + height / 2 };\r\n\r\n\r\n        if(targetMove && targetMove == appsInRow[i])\r\n            targetPoint = appPoints[i]\r\n\r\n        if(notate) {\r\n            apps[i].spot = i;\r\n            appPoints[i].app = appsInRow[i]\r\n        }\r\n        _moveEle(appsInRow[i], appPoints[i].x, appPoints[i].y)\r\n    }\r\n    //if(barLineFactor == -1) {\r\n        let handle = barHandle.getBoundingClientRect();\r\n        if(sideWays) {\r\n            let xx = handle.left + handle.width / 2\r\n            drawSimpleBarLine({ x: xx, y: handle.top }, { x: xx, y: handle.bottom })\r\n        } else {\r\n            let yy = handle.top + handle.height / 2\r\n            drawSimpleBarLine({ x: handle.left, y: yy }, { x: handle.right, y: yy })\r\n        }\r\n\r\n    //}\r\n}\r\n\r\nfunction animate() {\r\n    /*if(barLineFactor > -1) {\r\n        if(barLineFactor < 4) {\r\n            if(barLineFactor) {\r\n                let target = {};\r\n                let rect = barHandle.getBoundingClientRect();\r\n                let mid = { x: rect.width / 2, y: rect.height / 2 }\r\n\r\n                if(barPos == 0 || barPos == 2) {\r\n                    switch (barLineFactor) {\r\n                        case 3:\r\n                            target = { x: rect.left + mid.x, y: rect.top };\r\n                            break;\r\n                        case 2:\r\n                            target = { x: rect.left + mid.x, y: rect.top + mid.y };\r\n                            break;\r\n                        default:\r\n                            target = { x: rect.left + mid.x, y: rect.bottom }\r\n                    }\r\n                } else {\r\n                    switch (barLineFactor) {\r\n                        case 3:\r\n                            target = { x: rect.left, y: rect.top + mid.y };\r\n                            break;\r\n                        case 2:\r\n                            target = { x: rect.left + mid.x, y: rect.top + mid.y };\r\n                            break;\r\n                        default:\r\n                            target = { x: rect.right, y: rect.top + mid.y }\r\n                    }\r\n                }\r\n\r\n                let dx = mouseObj.x - target.x;\r\n                let dy = mouseObj.y - target.y;\r\n                let dr = Math.sqrt(dx * dx + dy * dy)\r\n                mouseObj.x -= dx / 2\r\n                mouseObj.y -= dy / 2\r\n                if(dr < 1 && barLineFactor < 4)\r\n                    barLineFactor++;\r\n            }\r\n\r\n\r\n            let diff = { x: mouseObj.x - points[0].x, y: mouseObj.y - points[0].y }\r\n            let dr = Math.sqrt(diff.x * diff.x + diff.y * diff.y)\r\n\r\n            if(dr > 40) {\r\n                let nextVector;\r\n                if(barLineFactor > 1) { //straight to next point\r\n                    nextVector = { x: mouseObj.x, y: mouseObj.y };\r\n                } else { //wiggle the line\r\n                    nextVector = { x: mouseObj.x - (tick ? 1 : -1) * 20 * diff.y / dr, y: mouseObj.y + (tick ? 1 : -1) * 20 * diff.x / dr };\r\n                }\r\n\r\n                let dir = Math.abs(diff.x) > Math.abs(diff.y);\r\n                let pos = dir ? diff.x > 0 : diff.y > 0\r\n                tick = !tick\r\n\r\n                drawBarLine(nextVector);\r\n            }\r\n        } else {\r\n            if(barLineFactor % 5 == 1) {\r\n\r\n                let target = points.shift();\r\n                console.log('chop off points ' + points.length)\r\n                if(points.length <= 3) {\r\n                    barLineFactor = -1;\r\n                    barCalculate();\r\n                } else {\r\n                    drawBarLine(target)\r\n                }\r\n\r\n            }\r\n            if(barLineFactor != -1)\r\n                barLineFactor++;\r\n\r\n        }\r\n    }\r\n*/\r\n\r\n    requestAnimationFrame(animate);\r\n}\r\n\r\nfunction drawBarLine(nextVector) {\r\n    /*let st = \"M\" + mouseObj.x + \" \" + mouseObj.y;\r\n    let last = { x: nextVector.x, y: nextVector.y };\r\n    for(let i = 0; i < points.length; i++) {\r\n        let halfy = (points[i].y - last.y) / 2\r\n        let halfx = (points[i].x - last.x) / 2\r\n        let midx = last.x + halfx;\r\n        let midy = last.y + halfy;\r\n        st += \"Q\" + last.x + \" \" + last.y + \" \" + midx + \" \" + midy //+points[i].x+\" \"+points[i].y\r\n\r\n        let prev = { x: points[i].x, y: points[i].y };\r\n        points[i] = { x: last.x, y: last.y };\r\n        last = prev;\r\n    }\r\n    path.setAttribute('d', st)*/\r\n}\r\n\r\nfunction drawSimpleBarLine(one, two) {\r\n    let st = \"M\" + one.x + ' ' + one.y + \"L\" + two.x + ' ' + two.y;\r\n    //path.setAttribute('d', st);\r\n   \r\n}\r\n\r\nfunction mousemove(ev) {\r\n    barMoveHandler(ev);\r\n    if(targetMove) {\r\n        moveFactor++;\r\n        targetMove.pos = { x: ev.clientX + targetMove.offset.x, y: ev.clientY + targetMove.offset.y }\r\n\r\n        if(ev.clientY > barBox.top && ev.clientY < barBox.bottom && ev.clientX > barBox.left && ev.clientX < barBox.right) {\r\n            let point = targetPoint;\r\n            let d = { x: point.x - targetMove.pos.x, y: point.y - targetMove.pos.y }\r\n            targetMove.pos = { x: point.x - d.x / 3, y: point.y - d.y / 3 }\r\n            if(targetMove.moving) { //called once per state change\r\n                targetMove.moving = undefined;\r\n                targetMove.spot = 0;\r\n                barCalculate();\r\n            }\r\n\r\n        } else {\r\n            if(!targetMove.moving) { //called once per state change\r\n                targetMove.moving = true;\r\n                targetMove.spot = -1;\r\n\r\n                barCalculate()\r\n            }\r\n\r\n        }\r\n\r\n        targetMove.style.left = targetMove.pos.x + 'px'\r\n        targetMove.style.top = targetMove.pos.y + 'px'\r\n    } /*else if(barLineFactor == 0) {\r\n        if(count > 2) {\r\n            count = 0;\r\n            mouseObj = { x: ev.clientX, y: ev.clientY }\r\n        }\r\n        count++\r\n    }*/\r\n}\r\n\r\nfunction barMoveHandler(ev) {\r\n    if(barMove) {\r\n        moveFactor++;\r\n        let xx = ev.clientX;\r\n        let yy = ev.clientY;\r\n        let dx = xx - window.innerWidth / 2;\r\n        let dy = yy - window.innerHeight / 2;\r\n        let r = Math.atan2(dy, dx) / Math.PI;\r\n        let ar = Math.abs(r)\r\n        if(ar < 0.25) { //right\r\n            if(barPos != 2) {\r\n                barPos = 2;\r\n                barAdjust()\r\n            }\r\n        } else if(ar < 0.75) { //top or bottom\r\n            if(r < 0) { //top\r\n                if(barPos != 3) {\r\n                    barPos = 3;\r\n                    barAdjust()\r\n                }\r\n            } else { //botttom\r\n                if(barPos != 1) {\r\n                    barPos = 1\r\n                    barAdjust()\r\n                }\r\n            }\r\n        } else { //left\r\n            if(barPos != 0) {\r\n                barPos = 0;\r\n                barAdjust()\r\n            }\r\n        }\r\n\r\n        /*\r\n        \t\t\t\tif(window.innerWidth>window.innerHeight){ //landscape\r\n        \t\t\t\t\tlet half=(window.innerWidth - window.innerHeight)/2\r\n        \t\t\t\t\tif(xx<half){ //left\r\n        \t\t\t\t\t\tbar.style.transform='rotate(90deg)'\r\n        \t\t\t\t\t\tbarHandle.style.transform='translate(-50%,-200%)'\r\n        \t\t\t\t\t}else if(xx>window.innerWidth-half){ //right\r\n        \t\t\t\t\t\tbar.style.transform='rotate(90deg)'\r\n        \t\t\t\t\t\tbarHandle.style.transform='translate(-50%,100%)'\r\n        \t\t\t\t\t}else{\r\n        \t\t\t\t\t\tbar.style.transform='rotate(0deg)'\r\n        \t\t\t\t\t\tif(yy>window.innerHeight/2){\r\n        \t\t\t\t\t\t\tbarHandle.style.transform='translate(-50%,-200%)'\r\n        \t\t\t\t\t\t}else{\r\n        \t\t\t\t\t\t\tbarHandle.style.transform='translate(-50%,100%)'\r\n        \t\t\t\t\t\t}\r\n        \t\t\t\t\t}\r\n        \t\t\t\t}else{ //portrait\r\n        \t\t\t\t\tlet half=(window.innerHeight - window.innerWidth)/2\r\n        \t\t\t\t\tif(yy<half){ //top\r\n        \t\t\t\t\t\tbar.style.transform='rotate(0deg)'\r\n        \t\t\t\t\t\tbarHandle.style.transform='translate(-50%,-200%)'\r\n        \t\t\t\t\t}else if(yy>window.innerHeight-half){ //bottom\r\n        \t\t\t\t\t\tbar.style.transform='rotate(0deg)'\r\n        \t\t\t\t\t\tbarHandle.style.transform='translate(-50%,100%)'\r\n        \t\t\t\t\t}else{\r\n        \t\t\t\t\t\tbar.style.transform='rotate(90deg)'\r\n        \t\t\t\t\t\tif(xx>window.innerWidth/2){\r\n        \t\t\t\t\t\t\tbarHandle.style.transform='translate(-50%,-200%)'\r\n        \t\t\t\t\t\t}else{\r\n        \t\t\t\t\t\t\tbarHandle.style.transform='translate(-50%,100%)'\r\n        \t\t\t\t\t\t}\r\n        \t\t\t\t\t}\r\n        \t\t\t\t}*/\r\n    }\r\n}\r\n\r\nfunction barAdjust() {\r\n    if(barPos == 2) { //right\r\n        bar.style.left = window.innerWidth - 48 + 'px';\r\n        bar.style.top = '50%'; //window.innerHeight/2;\r\n        barCalculate();\r\n        barHandle.style.transform = 'translate(-200%,-50%)'\r\n        barHandle.style.width = '32px';\r\n        barHandle.style.height = '80%';\r\n        bar.style.borderWidth=\"0px 0px 0px 6px\";\r\n        //mainTitle.style.top = '28px';\r\n    } else if(barPos == 3) { //top\r\n        barHandle.style.transform = 'translate(-50%,100%)'\r\n        bar.style.left = '50%';\r\n        bar.style.top = '48px' //-196+window.innerWidth/2\r\n        //mainTitle.style.top = 'calc(100% - 128px)';\r\n        barCalculate();\r\n        barHandle.style.height = '32px';\r\n        barHandle.style.width = '80%';\r\n        bar.style.borderWidth=\"0px 0px 6px 0px\";\r\n    } else if(barPos == 1) { //bottom\r\n        barHandle.style.transform = 'translate(-50%,-200%)'\r\n        bar.style.left = '50%';\r\n        bar.style.top = (window.innerHeight - 48) + 'px'; //-196+window.innerWidth/2\r\n        //mainTitle.style.top = '28px';\r\n        barCalculate();\r\n        barHandle.style.height = '32px';\r\n        barHandle.style.width = '80%';\r\n        bar.style.borderWidth=\"6px 0px 0px 0px\"\r\n    } else { //left\r\n        barHandle.style.transform = 'translate(100%,-50%)'\r\n        bar.style.left = '48px';\r\n        bar.style.top = '50%'\r\n        barCalculate()\r\n        barHandle.style.width = '32px'\r\n        barHandle.style.height = '80%'\r\n        bar.style.borderWidth=\"0px 6px 0px 0px\";\r\n        //mainTitle.style.top = '28px';\r\n    }\r\n}\r\n\r\n\r\nfunction appSelect(app, ev) {\r\n    if(!app.focused) {\r\n        targetMove = app;\r\n\r\n        app.pos = { x: parseInt(app.style.left), y: parseInt(app.style.top) }\r\n        targetPoint = { x: app.pos.x, y: app.pos.y }\r\n        //app.origin={x:app.pos.x,y:app.pos.y}\r\n        app.offset = { x: app.pos.x - ev.clientX, y: app.pos.y - ev.clientY }\r\n        app.classList.add('cardMove')\r\n        app.moving = undefined;\r\n\r\n    }\r\n}\r\n\r\nfunction winMouseUp(ev) {\r\n    if(barMove) {\r\n        barMove = false;\r\n        //barLineFactor = 1;\r\n        console.log(moveFactor)\r\n        if(moveFactor < 10) {\r\n            closeApp();\r\n        }\r\n    }\r\n\r\n    if(targetMove) {\r\n        targetMove.classList.remove('cardMove')\r\n        console.log(moveFactor)\r\n        if(moveFactor < 10) {\r\n            if(focused && focused == targetMove) {\r\n                targetMove.classList.remove('cardMax')\r\n                targetMove.focused = undefined;\r\n                focused = undefined;\r\n                targetMove.style.zIndex = 2;\r\n                window.history.pushState({}, '', '/');\r\n\r\n            } else {\r\n                closeApp(true);\r\n\r\n                openApp(targetMove.appId);\r\n\r\n                window.history.pushState({ appId: targetMove.appId }, targetMove.name, '?id=' + targetMove.appId + '&app=' + targetMove.id);\r\n            }\r\n        } else {\r\n            barCalculate();\r\n\r\n            console.log('fix bar also')\r\n        }\r\n    } else {\r\n        barCalculate();\r\n        console.log('fix bar')\r\n    }\r\n    targetMove = undefined;\r\n\r\n    moveFactor = 0;\r\n\r\n}\r\n\r\nfunction boundaryCheck() {\r\n    apps.forEach(app => {\r\n        if(!app.focused) {\r\n            let rect = app.getBoundingClientRect();\r\n\r\n            let x = rect.left;\r\n            let y = rect.top;\r\n            let w2 = (rect.right - rect.left) / 2;\r\n            let h2 = (rect.bottom - rect.top) / 2\r\n\r\n            if(x < 0) {\r\n                app.style.left = w2 + 'px'\r\n            } else if(x > window.innerWidth - w2 * 2) {\r\n                app.style.left = window.innerWidth - w2 + 'px'\r\n            }\r\n            if(y < 0) {\r\n                app.style.top = h2 + 'px'\r\n            } else if(y > window.innerHeight - h2 * 2) {\r\n                app.style.top = window.innerHeight - h2 + 'px'\r\n            }\r\n\r\n        }\r\n\r\n    })\r\n}\r\n\r\nfunction _moveEle(ele, x, y, bool) {\r\n    if(!bool)\r\n        ele.pos = { x: x, y: y }\r\n    ele.style.left = x + 'px'\r\n    ele.style.top = y + 'px'\r\n}\r\n\r\nfunction pendApp(id) {\r\n    let app = apps[id]\r\n    let cube = app.querySelector('cube')\r\n    if(!cube) {\r\n        cube = document.createElement('cube');\r\n        app.appendChild(cube);\r\n    }\r\n}\r\n\r\nfunction clearPendApp(id) {\r\n    let app = apps[id]\r\n    let cube = app.querySelector('cube')\r\n    if(cube)\r\n        cube.remove()\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://buup/./src/BarUI.js?");

/***/ }),

/***/ "./src/Control.js":
/*!************************!*\
  !*** ./src/Control.js ***!
  \************************/
/*! namespace exports */
/*! export addConfetti [provided] [no usage info] [missing usage info prevents renaming] */
/*! export animate [provided] [no usage info] [missing usage info prevents renaming] */
/*! export defineOrbital [provided] [no usage info] [missing usage info prevents renaming] */
/*! export down [provided] [no usage info] [missing usage info prevents renaming] */
/*! export enterVR [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getAngle [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getVRPointer [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export initRadial [provided] [no usage info] [missing usage info prevents renaming] */
/*! export isMenuLocked [provided] [no usage info] [missing usage info prevents renaming] */
/*! export isVR [provided] [no usage info] [missing usage info prevents renaming] */
/*! export lockMenu [provided] [no usage info] [missing usage info prevents renaming] */
/*! export menu1 [provided] [no usage info] [missing usage info prevents renaming] */
/*! export onClick [provided] [no usage info] [missing usage info prevents renaming] */
/*! export pos [provided] [no usage info] [missing usage info prevents renaming] */
/*! export primaryTouchPan [provided] [no usage info] [missing usage info prevents renaming] */
/*! export screenX [provided] [no usage info] [missing usage info prevents renaming] */
/*! export screenY [provided] [no usage info] [missing usage info prevents renaming] */
/*! export secondaryTouchPan [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setRenderer [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setVector [provided] [no usage info] [missing usage info prevents renaming] */
/*! export x [provided] [no usage info] [missing usage info prevents renaming] */
/*! export y [provided] [no usage info] [missing usage info prevents renaming] */
/*! export z [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"x\": () => /* binding */ x,\n/* harmony export */   \"y\": () => /* binding */ y,\n/* harmony export */   \"z\": () => /* binding */ z,\n/* harmony export */   \"pos\": () => /* binding */ pos,\n/* harmony export */   \"down\": () => /* binding */ down,\n/* harmony export */   \"animate\": () => /* binding */ animate,\n/* harmony export */   \"onClick\": () => /* binding */ onClick,\n/* harmony export */   \"setVector\": () => /* binding */ setVector,\n/* harmony export */   \"screenX\": () => /* binding */ screenX,\n/* harmony export */   \"screenY\": () => /* binding */ screenY,\n/* harmony export */   \"initRadial\": () => /* binding */ initRadial,\n/* harmony export */   \"menu1\": () => /* binding */ menu1,\n/* harmony export */   \"defineOrbital\": () => /* binding */ defineOrbital,\n/* harmony export */   \"isMenuLocked\": () => /* binding */ isMenuLocked,\n/* harmony export */   \"lockMenu\": () => /* binding */ lockMenu,\n/* harmony export */   \"getAngle\": () => /* binding */ getAngle,\n/* harmony export */   \"addConfetti\": () => /* binding */ addConfetti,\n/* harmony export */   \"setRenderer\": () => /* binding */ setRenderer,\n/* harmony export */   \"enterVR\": () => /* binding */ enterVR,\n/* harmony export */   \"isVR\": () => /* binding */ isVR,\n/* harmony export */   \"getVRPointer\": () => /* binding */ getVRPointer,\n/* harmony export */   \"secondaryTouchPan\": () => /* binding */ secondaryTouchPan,\n/* harmony export */   \"primaryTouchPan\": () => /* binding */ primaryTouchPan\n/* harmony export */ });\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _HexManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./HexManager.js */ \"./src/HexManager.js\");\n/* harmony import */ var _Environment_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Environment.js */ \"./src/Environment.js\");\n/* harmony import */ var _lib_OrbitControls_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/OrbitControls.js */ \"./src/lib/OrbitControls.js\");\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n//import * as Chat from \"./Chat.js\";\r\n\r\n\r\n//import * as AssetManager from \"./AssetManager.js\";\r\n\r\n//import * as World from \"./World.js\";\r\n\r\n\r\n\r\n\r\nvar vrEnabled;\r\n\r\nfunction init(){\r\n\t//window.addEventListener('click',animationControl)\r\n\tlet target=document.querySelector('.canvasHolder');\r\n\ttarget.addEventListener('mousemove',mousemove);\r\n\ttarget.addEventListener('mousedown',mousedown);\r\n\ttarget.addEventListener('mouseup',mouseup);\r\n\r\n\ttarget.addEventListener('touchstart',touchstart);\r\n\ttarget.addEventListener('touchend',touchend);\r\n\ttarget.addEventListener('touchmove',touchmove);\r\n\r\n\twindow.addEventListener('contextmenu',contextmenu);\r\n\twindow.addEventListener('keyup',keyup);\r\n\t//initSettings();\r\n}\r\nvar zoomLevelToggle=false\r\n\r\nfunction setRenderer(renderer,renderDom,camera,VR){\r\n\tdefineOrbital(renderDom,camera)\r\n\tif(VR){\r\n\t\tdefineVRControl(renderer)\r\n\t}\r\n}\r\nfunction defineOrbital(renderDom,camera){\r\n\torbital = new _lib_OrbitControls_js__WEBPACK_IMPORTED_MODULE_3__.OrbitControls( camera, renderDom );\r\n\r\n\r\n    orbital.mouseButtons = {\r\n        LEFT: undefined,\r\n        MIDDLE: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_4__.MOUSE.ROTATE,\r\n        RIGHT: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_4__.MOUSE.PAN //THREE.MOUSE.DOLLY\r\n    }\r\n\r\n    \r\n    orbital.maxPolarAngle=1.3;\r\n    orbital.isControl()\r\n    primaryTouchPan();\r\n\r\n\torbital.addEventListener('change',function(ev){\r\n\t\tvar zoom = orbital.target.distanceTo(orbital.object.position);\r\n\r\n\t\tif(zoom>75){\r\n\t\t\tif(zoomLevelToggle!=2){\r\n\t\t\t\tzoomLevelToggle=2;\r\n\t\t\t\t_Environment_js__WEBPACK_IMPORTED_MODULE_2__.changeShadowScale(1);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(zoomLevelToggle!=1){\r\n\t\t\t\tzoomLevelToggle=1;\r\n\t\t\t\t_Environment_js__WEBPACK_IMPORTED_MODULE_2__.changeShadowScale(0);\r\n\t\t\t}\r\n\t\t}\r\n\t\t_Environment_js__WEBPACK_IMPORTED_MODULE_2__.setShadowPos(orbital.target)\r\n\t\t//console.log('changed camera '+orbital.object.position.y)\r\n\t})\r\n\r\n}\r\nfunction secondaryTouchPan(){\r\n\torbital.touches = {\r\n        ONE: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_4__.TOUCH.NONE, //PAN \r\n        TWO: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_4__.TOUCH.DOLLY_PAN//DOLLY_ROTATE\r\n        //THREE: THREE.TOUCH.DOLLY_PAN\r\n    }\r\n}\r\n\r\nfunction primaryTouchPan(){\r\n\torbital.touches = {\r\n        ONE: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_4__.TOUCH.PAN,\r\n        TWO: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_4__.TOUCH.DOLLY_ROTATE\r\n    }\r\n}\r\n\r\nfunction defineVRControl(renderer){\r\n/*\r\n    controllers=[];\r\n    window.controllers=controllers\r\n    for (let i = 0; i < 2; ++i) {\r\n      const controller = renderer.xr.getController(i);\r\n     \r\n\r\n      let model=AssetManager.make(\"shroom\")\r\n      model.scale.set(0.5,0.5,0.5)\r\n \r\n      controller.add(model);\r\n      Render.addToCameraGroup(controller);\r\n     controllers.push({controller: controller, model: model});\r\n    }*/\r\n    \r\n\r\n}\r\nvar buttonBobs=[] //DEV\r\nvar vrSession\r\nfunction enterVR(){\r\n\t/*if(controllers && controllers.length){\r\n\t\tvrSession =Render.getRenderer().xr.getSession();\r\n\t\tif(vrSession){\r\n\t\t\t/*for (let i = 0; i < 2; ++i) {\r\n\t\t\t\tcontrollers[i].source=session.inputSources[i]\r\n\t\t\t}*/\r\n\t\t\t/*for(let j=0;j<7;j++){\r\n\t\t\t\tlet bob=Render.cubit(0.1,0.1,0.1, 2+j*0.2, 0.2, 1)\r\n\t\t\t\tbuttonBobs.push(bob)\r\n\t\t\t\tRender.addModel(bob)\r\n\t\t\t}*/\r\n\t\t/*}\r\n\t}\r\n\torbital.enabled=false;\r\n\tvrEnabled=true;*/\r\n}\r\nvar controllers\r\nvar orbital;\r\nvar mdown=false;\r\nvar mx=0;\r\nvar my=0;\r\nvar px=0,py=0,pz=0;\r\nvar menuLocked=false;\r\n\r\nfunction mousemove(ev){\r\n\r\n\tbubbleCheck(ev.clientX,ev.clientY)\r\n}\r\nfunction mousedown(ev){\r\n\tif(ev.which !== 1 ){ //2 mid and 3 right\r\n\t\treturn false;\r\n\t}\r\n\tmdown=true;\r\n\t\r\n\treturn true;\r\n}\r\nfunction mouseup(ev){\r\n\tif(ev.which === 2 ){\r\n\t\treturn false;\r\n\t}\r\n\tif(mdown){\r\n\t\tif(!bubbleMenu ){//&& !orbital.isControl()){\r\n\t\t\tif(callback)\r\n\t\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\tmdown=false;\r\n\tcloseBubbleMenu();\r\n}\r\nfunction touchstart(ev){\r\n\tmdown=true;\r\n\tmx=ev.touches[0].clientX;\r\n\tmy=ev.touches[0].clientY;\r\n\tstartCircle(mx,my);\r\n\treturn true;\r\n}\r\nfunction touchend(ev){\r\n\tif(mdown){\r\n\t\tif(!bubbleMenu && !orbital.isControl()){\r\n\t\t\tif(callback)\r\n\t\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\tmdown=false;\r\n\tendCircle();\r\n\tcloseBubbleMenu();\r\n}\r\nfunction touchmove(ev){\r\n\tlet xx=ev.touches[0].clientX;\r\n\tlet yy=ev.touches[0].clientY;\r\n\tstartCircle(xx,yy);\r\n\tbubbleCheck(xx,yy);\r\n}\r\n\r\nfunction getCursor(){\r\n\treturn {on:mdown,x:mx,y:my}\r\n}\r\nfunction screenX(){\r\n\treturn mx;\r\n}\r\nfunction screenY(){\r\n\treturn my;\r\n}\r\nfunction x(){\r\n\treturn px;\r\n}\r\nfunction y(){\r\n\treturn py;\r\n}\r\nfunction z(){\r\n\treturn pz;\r\n}\r\nfunction pos(){\r\n\treturn {x:px,y:py,z:pz};\r\n}\r\nfunction down(){\r\n\treturn mdown && !orbital.isControl();\r\n}\r\n\r\nfunction setVector(pos){\r\n\tpx=pos.x;\r\n\tpy=pos.y;\r\n\tpz=pos.z;\r\n\tif(mdown)\r\n\t\t_HexManager_js__WEBPACK_IMPORTED_MODULE_1__.hexPick(px,py)\r\n\telse\r\n\t\t_HexManager_js__WEBPACK_IMPORTED_MODULE_1__.hexCheck(px,py)\r\n}\r\nvar callback\r\nfunction onClick(f){\r\n\tcallback=f;\r\n}\r\n\r\nvar radialCallbacks=[];\r\nvar radialIndex=-1;\r\nfunction initRadial(array){\r\n\tlet circle=document.createElement('div');\r\n\tcircle.classList.add('bubbleSelector');\r\n\tcircle.style.visibility='hidden';\r\n\ttouchOn=false;\r\n\tlet mainDom=document.querySelector('#main')\r\n\tmainDom.appendChild(circle)\r\n\tif(array && array.length>0){\r\n\t\tarray.forEach((e,i)=>{\r\n\t\t\tlet bubb=document.createElement('div');\r\n\t\t\tbubb.classList.add('bubble');\r\n\t\t\tbubb.style.backgroundColor=i%2==0?'#FFED9C':'#CCFF9C';\r\n\t\t\tbubb.style.visibility='hidden';\r\n\t\t\tbubb.setAttribute('value',e[0]);\r\n\t\t\tradialCallbacks.push(e[1]);\r\n\t\t\tmainDom.appendChild(bubb);\r\n\t\t})\r\n\t\t\t\r\n\t\t\r\n\t}\r\n\tlet overtext=document.createElement('div');\r\n\tovertext.classList.add('overtext');\r\n\tovertext.style.visibility='hidden';\r\n\tmainDom.appendChild(overtext);\r\n}\r\nvar touchOn=false;\r\nfunction startCircle(xx,yy){\r\n\t/*let sb=document.querySelector('.bubbleSelector');\r\n\tif(!touchOn){\r\n\t\tsb.style.visibility='visible';\r\n\t\ttouchOn=true;\r\n\t}\r\n\tsb.style.left=xx+'px';\r\n\tsb.style.top=yy+'px';*/\r\n}\r\nfunction endCircle(){\r\n\tif(touchOn){\r\n\t\tlet sb=document.querySelector('.bubbleSelector');\r\n\t\tsb.style.visibility='hidden'\r\n\t\ttouchOn=false;\r\n\t}\r\n}\r\n\r\nvar bubbleMenu;\r\nvar tempToggleCamera\r\nfunction contextmenu(ev){\r\n\tev.preventDefault();\r\n\r\n\t/*if(orbital.enabled){\r\n\t\torbital.enabled=false;\r\n\t}else{\r\n\t\torbital.enabled=true;\r\n\t}*/\r\n\r\n\r\n\treturn false;\r\n}\r\n\r\nfunction animate(){\r\n\tif(vrEnabled){\r\n\t\tif(controllers && controllers.length){\r\n\t\t//quest gives 7 arrays, contains pressed bool, touched bool, and value float //DEV\r\n\t\t//controllers[0].source\r\n\t\t\tif(vrSession){\r\n\t\t\t\tlet source=vrSession.inputSources[0]\r\n\t\t\t\tfor(let i=0;i<vrSession.inputSources.length;i++){\r\n\t\t\t\t\tlet buttons=vrSession.inputSources[0].gamepad.buttons\r\n\t\t\t\t\tif(i==vrSession.inputSources.length-1){ //pick the last one\r\n\t\t\t\t\t\t\t//mdown=buttons[i].pressed\r\n\t\t\t\t\t\t\tif(buttons[i].pressed){\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tmdown=buttons[i].pressed\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tif(orbital && !orbital.enabled){\r\n\t\t\tlet playerModel=World.getOwnPlayer().model\r\n\t\t\tlet xx=orbital.object.position.x-playerModel.position.x\r\n\t\t\tlet yy=orbital.object.position.y-playerModel.position.y\r\n\t\t\tlet rr=Math.sqrt(xx*xx +yy*yy)\r\n\t\t\torbital.object.position.x-=yy/rr\r\n\t\t\torbital.object.position.y+=xx/rr\r\n\t\t\torbital.object.lookAt(World.getOwnPlayer().model.position)\r\n\t\t}\r\n\t}\r\n\t\r\n\t\t\r\n\r\n\t\t\r\n\t\t\r\n\t\t//console.log(controllers[0].source.gamepad.buttons)\r\n\t\t\t//mdown=\r\n\t\r\n}\r\nfunction getAngle(){\r\n\treturn orbital.object.rotation.z;\r\n\t\r\n}\r\n\r\nfunction closeBubbleMenu(){\r\n\tif(bubbleMenu){\r\n\t\tbubbleMenu=undefined;\r\n\t\tlet bubbles=document.querySelectorAll('.bubble');\r\n\t\tbubbles.forEach(e=>{\r\n\t\t\te.style.visibility='hidden'\r\n\t\t})\r\n\t\tlet ot=document.querySelector('.overtext');\r\n\t\tif(ot)\r\n\t\t\tot.style.visibility='hidden'\r\n\r\n\t\tif(radialIndex>=0)\r\n\t\t\tradialCallbacks[radialIndex](px,py,0);\r\n\t\tlockMenu(false);\r\n\t}\r\n}\r\nfunction openBubbleMenu(){\r\n\tlet bubbles=document.querySelectorAll('.bubble');\r\n\tif(bubbles && bubbles.length){\r\n\t\tlet radial=2*Math.PI/bubbles.length;\r\n\t\tbubbleMenu={x:mx,y:my};\r\n\t\t//bubbles.removeClass('hideBubble');\r\n\t\tbubbles.forEach((e,i)=>{\r\n\r\n\t\t\tlet xx=mx+Math.sin(radial*i)*50;\r\n\t\t\tlet yy=my-Math.cos(radial*i)*50;\r\n\t\t\t\r\n\t\t\te.style.left=xx+'px';\r\n\t\t\te.style.top=yy+'px';\r\n\t\t\te.style.visibility='visible';\r\n\t\t\t\r\n\t\t});\r\n\t\tlockMenu(true);\r\n\t}\r\n}\r\nfunction bubbleCheck(x,y){\r\n\tif(bubbleMenu){\r\n\t\tmoveBubbleSelector(x,y)\r\n\t}else{\r\n\t\tmx=x;my=y;\r\n\t}\r\n}\r\nfunction moveBubbleSelector(x,y){\r\n\tlet xx=x;\r\n\tlet yy=y;\r\n\t// let sb=document.querySelector('.bubbleSelector')\r\n\t// sb.style.left=xx+'px';\r\n\t// sb.style.top=yy+'px';\r\n\tlet dx=x-bubbleMenu.x;\r\n\tlet dy=y-bubbleMenu.y;\r\n\tlet dr=Math.sqrt(dx*dx + dy*dy);\r\n\tlet R=angle(dx,dy);\r\n\t\r\n\r\n\tlet bubbles=document.querySelectorAll('.bubble')\r\n\tlet radial=2*Math.PI/bubbles.length;\r\n\tlet tt=R/radial +radial/2;\r\n\tlet index=Math.floor(tt);\r\n\tif(index>=bubbles.length)index=0;\r\n\r\n\tif(dr>100){\r\n\t\tindex=-1;\r\n\t}\r\n\tlet text=\"\"\r\n\tbubbles.forEach((e,i)=>{\r\n\t\tif(i==index){\r\n\t\t\te.style.border='solid blue 6px';\r\n\t\t\ttext=e.getAttribute('value');\r\n\t\t}else{\r\n\t\t\te.style.border='';\r\n\t\t}\r\n\t});\r\n\tlet ang=180*R/Math.PI\r\n\tlet ot=document.querySelector('.overtext');\r\n\tif(index>-1){\r\n\t\tot.style.visibility='visible';\r\n\t\tot.style.left=x+'px';\r\n\t\tot.style.top=y+'px';\r\n\t\tot.innerHTML=text;\r\n\t\tif(dx>25){\r\n\t\t\tot.style.transform='translate(28px,-50%)';\r\n\t\t}else if(dx<-25){\r\n\t\t\tot.style.transform='translate(calc(-28px - 100%),-50%)';\r\n\t\t}else{\r\n\t\t\tot.style.transform='translate(-50%,calc(-28px - 100%))';\r\n\t\t}\r\n\t}else{\r\n\t\tot.style.visibility='hidden';\r\n\t}\r\n\tradialIndex=index;\r\n\r\n\t//let text=bubbles.eq(index).attr('value');\r\n\t//console.log(text);\r\n\t/*if(text){\r\n\t\t$('.selectBubble').children().html(text);\r\n\t}*/\r\n\t\r\n}\r\n\r\nfunction menu1(){\r\n\tlet bm=document.querySelector('.buttonMenu');\r\n\tif(bm.style.visibility=='hidden'){\r\n\t\tbm.style.visibility='visible'\r\n\t\tlockMenu(true);\r\n\t}else{\r\n\t\tbm.style.visibility='hidden'\r\n\t\tlockMenu(false);\r\n\t}\r\n}\r\nfunction angle(dx,dy) {\r\n  let theta = Math.atan2(dx, -dy); // range (-PI, PI]\r\n  //theta *= 180 / Math.PI; // rads to degs, range (-180, 180]\r\n  if (theta < 0) theta = Math.PI*2 + theta; // range [0, 360)\r\n  return theta;\r\n}\r\n\r\nfunction keyup(ev){\r\n\tif(isMenuLocked()){\r\n\t\treturn false;\r\n\t}else{\r\n\t\t if(ev.which==13){\r\n\t\t\t//Chat.openChat();\r\n\t\t}else if(ev.which==192){ //DEV\r\n\t\t\twindow.pickTarget=_Render_js__WEBPACK_IMPORTED_MODULE_0__.pick();\r\n\t\t\tif(window.pickTarget)\r\n\t\t\t\tconsole.log(\"picked a \"+window.pickTarget.type)\r\n\r\n\t\t}\r\n\t}\r\n\r\n}\r\nfunction isMenuLocked(){\r\n\treturn menuLocked;\r\n}\r\nfunction lockMenu(b){\r\n\tmenuLocked=b;\r\n\t\r\n\t\tlet doms=document.querySelectorAll('.menuHidable');\r\n\t\tif(doms.length){\r\n\t\t\tdoms.forEach(d=>{\r\n\t\t\t\td.style.visibility=b?'hidden':'visible';\r\n\t\t\t})\r\n\t\t}\r\n\t\r\n}\r\n\r\nvar settingsObject={};\r\nfunction initSettings(){\r\n\tlet mainDom=document.querySelector('#main')\r\n\r\n\tlet settingsButton=document.createElement('div');\r\n\tsettingsButton.classList.add('settingsButton','menuHidable');\r\n\tmainDom.appendChild(settingsButton);\r\n\r\n\tlet settingsBlock=document.createElement('div');\r\n\tsettingsBlock.classList.add('settingsBlock');\r\n\r\n\tlet settings=document.createElement('div');\r\n\tsettings.classList.add('settingsPane');\r\n\tsettingsBlock.appendChild(settings);\r\n\tmainDom.appendChild(settingsBlock);\r\n\tsettingsBlock.style.visibility='hidden';\r\n\r\n\r\n\tfunction addButton(text,callback,reference,possibleValues){\r\n\t\tlet row=document.createElement('div')\r\n\t\tlet button=document.createElement('div');\r\n\t\tbutton.classList.add('switch');\r\n\t\tlet defaultState;\r\n\t\tif(reference){\r\n\t\t\tdefaultState=settingsObject[reference];\r\n\t\t}\r\n\r\n\t\tif(possibleValues){ //not boolean\r\n\t\t\tif(defaultState!=possibleValues[0]){\r\n\t\t\t\tif(defaultState!=possibleValues[possibleValues.length-1]){\r\n\t\t\t\t\tbutton.classList.add('switchHalf');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbutton.classList.add('switchOn');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbutton.setAttribute(\"value\",defaultState);\r\n\t\t\tlet index=0;\r\n\t\t\tfor(let ii=0;ii<possibleValues.length;ii++){\r\n\t\t\t\tif(possibleValues[ii]==defaultState){\r\n\t\t\t\t\tindex=ii;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbutton.setAttribute(\"index\",index);\r\n\t\t\tbutton.addEventListener('click',function(ev){\r\n\t\t\t\tev.stopPropagation();\r\n\t\t\t\tlet i=button.getAttribute(\"index\");\r\n\t\t\t\ti++;\r\n\t\t\t\tif(i>=possibleValues.length){\r\n\t\t\t\t\ti=0;\r\n\t\t\t\t}\r\n\t\t\t\tif(i==0){\r\n\t\t\t\t\tbutton.classList.remove('switchOn');\r\n\t\t\t\t}else if(i==possibleValues.length-1){\r\n\t\t\t\t\tbutton.classList.remove('switchHalf');\r\n\t\t\t\t\tbutton.classList.add('switchOn');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbutton.classList.add('switchHalf');\r\n\t\t\t\t}\r\n\t\t\t\tlet val=possibleValues[i];\r\n\t\t\t\tbutton.setAttribute(\"value\",val);\r\n\t\t\t\tbutton.setAttribute(\"index\",i);\r\n\t\t\t\tcallback(val);\r\n\t\t\t\tupdateSettings(reference,val)\r\n\r\n\t\t\t\t/*\r\n\t\t\t\tif(!button.classList.contains('switchOn')){\r\n\t\t\t\t\tbutton.classList.add('switchOn')\r\n\t\t\t\t\tcallback(true);\r\n\t\t\t\t\tupdateSettings(reference,true)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbutton.classList.remove('switchOn')\r\n\t\t\t\t\tcallback(false);\r\n\t\t\t\t\tupdateSettings(reference,false)\r\n\t\t\t\t}*/\r\n\t\t\t});\r\n\t\t}else{ //boolean\r\n\t\t\tif(defaultState)\r\n\t\t\t\tbutton.classList.add('switchOn');\r\n\r\n\t\t\tbutton.addEventListener('click',function(ev){\r\n\t\t\t\tev.stopPropagation();\r\n\t\t\t\tif(!button.classList.contains('switchOn')){\r\n\t\t\t\t\tbutton.classList.add('switchOn')\r\n\t\t\t\t\tcallback(true);\r\n\t\t\t\t\tupdateSettings(reference,true)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbutton.classList.remove('switchOn')\r\n\t\t\t\t\tcallback(false);\r\n\t\t\t\t\tupdateSettings(reference,false)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\r\n\r\n\t\t\r\n\t\trow.appendChild(button);\r\n\r\n\t\tlet label=document.createElement('span');\r\n\t\tlabel.innerHTML=text;\r\n\t\trow.appendChild(label);\r\n\t\tsettings.appendChild(row);\r\n\t\tcallback(defaultState)\r\n\t}\r\n\tlet storedSettings=localStorage.getItem(\"settings\");\r\n\tif (storedSettings === null) {\r\n  \t\tsettingsObject={\r\n  \t\t\tmaxResolution:\"1\",\r\n  \t\t\tmaxShadow:true,\r\n  \t\t\tother:true\r\n  \t\t}\r\n\t}else{\r\n\t\tsettingsObject=JSON.parse(storedSettings);\r\n\t}\r\n\r\n\taddButton('max resolution (turn off if it lags)',_Render_js__WEBPACK_IMPORTED_MODULE_0__.setResolution,\"maxResolution\",[\"4\",\"2\",\"1\"]);\r\n\taddButton('max shadow resolution (turn off if it lags)',_Environment_js__WEBPACK_IMPORTED_MODULE_2__.setShadows,\"maxShadow\");\r\n\taddButton('shadows (turn off if it lags)',function(bool){},\"other\");\r\n\taddButton('force update',function(bool){if(bool)window.location.reload(true)});\r\n\taddButton('Toggle light helper',_Environment_js__WEBPACK_IMPORTED_MODULE_2__.setLightHelper,\"lightHelper\");\r\n\r\n\r\n\t\r\n\tsettingsButton.addEventListener('click',function(ev){\r\n\t\tif(!isMenuLocked()){\r\n\t\t\tlockMenu(true);\r\n\t\t\tsettingsBlock.style.visibility='visible';\r\n\t\t}\r\n\t\taddConfetti(settingsButton.offsetLeft+30,settingsButton.offsetTop+30,315);\r\n\r\n\t})\r\n\r\n\tsettingsBlock.addEventListener('click',function(ev){\r\n\t\tif(ev.target==settingsBlock){\r\n\t\t\tsettingsBlock.style.visibility='hidden';\r\n\t\t\tlockMenu(false);\r\n\t\t}\r\n\t})\r\n\r\n}\r\nfunction updateSettings(reference,val){\r\n\tif(reference){\r\n\t\tsettingsObject[reference]=val;\r\n\t\tlocalStorage.setItem('settings',JSON.stringify(settingsObject));\r\n\t}\r\n}\r\n\r\nfunction addConfetti(x,y,angle){\r\n\tlet mainDom=document.querySelector('#main')\r\n\r\n\tlet con=document.createElement('div');\r\n\tcon.classList.add('confetti');\r\n\tcon.innerHTML='<svg viewbox=\"0 0 100 100\" style=\"fill:none;stroke:lightgreen;stroke-linecap:round\"><path d=\"M45 70L55 75M45 50L55 50M45 30L55 25\" /></svg>';\r\n\tcon.style.left=x+'px'\r\n\tcon.style.top=y+'px',\r\n\tcon.style.transform='translate(-50%,-50%) rotate('+(angle?angle:0)+'deg)';\r\n\tsetTimeout(function(){\r\n\t\tcon.remove();\r\n\t},500);\r\n\tmainDom.appendChild(con)\r\n}\r\n\r\nfunction isVR(){\r\n\treturn vrEnabled\r\n}\r\nfunction getVRPointer(){\r\n\treturn controllers[controllers.length-1].controller;\r\n}\r\n\r\nfunction moveLock(){\r\n\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://buup/./src/Control.js?");

/***/ }),

/***/ "./src/Environment.js":
/*!****************************!*\
  !*** ./src/Environment.js ***!
  \****************************/
/*! namespace exports */
/*! export animate [provided] [no usage info] [missing usage info prevents renaming] */
/*! export changeShadowScale [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getWind [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setLightHelper [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setShadowPos [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setShadows [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"getWind\": () => /* binding */ getWind,\n/* harmony export */   \"animate\": () => /* binding */ animate,\n/* harmony export */   \"changeShadowScale\": () => /* binding */ changeShadowScale,\n/* harmony export */   \"setShadows\": () => /* binding */ setShadows,\n/* harmony export */   \"setShadowPos\": () => /* binding */ setShadowPos,\n/* harmony export */   \"setLightHelper\": () => /* binding */ setLightHelper\n/* harmony export */ });\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n\r\n\r\nvar wind;\r\n\r\nvar debugLightHelper;\r\nvar sunLight;\r\nvar sunLight2;\r\nvar sunTarget;\r\nvar sunCenter;\r\nvar ambientLight;\r\n\r\n\r\nvar SHADOW_SIZE=1024;//2048*16;\r\n\r\nlet pi2=Math.PI*2;\r\n\r\nlet tempHeight=20;\r\nlet tempD=-0.04; //-0.004\r\n\r\nfunction init(){\r\n \r\n\twind=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(1,0,0);\r\n\tsunCenter=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,0,0);\r\n\r\n\tambientLight = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.AmbientLight( 0x8F8F8F ); // soft white light  0x404040\r\n\t_Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel2( ambientLight );\r\n\r\n\t//var directionalLight = new THREE.PointLight( 0xffffff, 1,100 );\r\n\tsunLight = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.DirectionalLight( 0xE05757, 0.5 ); //DirectionalLight\r\n\tsunLight.position.set(0,250,0);\r\n\tsunLight.castShadow = true;\r\n\t_Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel2( sunLight );\r\n\tsunTarget=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Object3D();\r\n\tsunTarget.position.set(20,0,20);\r\n\t_Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel2( sunTarget );\r\n\tsunLight.target=sunTarget;\r\n\r\n\r\n\tsunLight.shadow.mapSize.width = SHADOW_SIZE;  // default\r\n\tsunLight.shadow.mapSize.height = SHADOW_SIZE; // default\r\n\tsunLight.shadow.camera.near = 1;    // default\r\n\t    // default\r\n\t\r\n\tchangeShadowScale(0);\r\n\r\n\tsunLight.shadow.radius = 2.2;//2.2;\r\n\tsunLight.shadow.bias = -.0005;\r\n\r\n\tsunLight2=sunLight.clone();\r\n\tsunLight2.shadow.mapSize.width = 256;//256;  // default\r\n\tsunLight2.shadow.mapSize.height = 256;//256; // default\r\n\tsunLight2.shadow.radius = 0;\r\n\r\n\tsunLight2.visible=false;\r\n\r\n\t_Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel2(sunLight2);\r\n\r\n\t\r\n\r\n\twindow.sunLight=sunLight;\r\n\tsetLightHelper(true)\r\n\r\n}\r\n\r\nfunction changeShadowScale(factor){\r\n\tlet d1;\r\n\r\n\tif(factor==1){\r\n\t\td1 = 450;\r\n\t\tsunLight.shadow.camera.far = 600; \r\n\t\tsunLight.shadow.mapSize.width = SHADOW_SIZE/2;\r\n\t\tsunLight.shadow.mapSize.height= SHADOW_SIZE/2;\r\n\t}else{\r\n\t\td1 = 150;\r\n\t\tsunLight.shadow.mapSize.width = SHADOW_SIZE;\r\n\t\tsunLight.shadow.mapSize.height= SHADOW_SIZE;\r\n\t\tsunLight.shadow.camera.far = 300; \r\n\t}\r\n\r\n\tsunLight.shadow.camera.left = -d1;\r\n\tsunLight.shadow.camera.right = d1;\r\n\tsunLight.shadow.camera.top = d1;\r\n\tsunLight.shadow.camera.bottom = -d1;\r\n\tif(sunLight.shadow.map){\r\n\t\tsunLight.shadow.map.dispose()\r\n\t\tsunLight.shadow.map = null\r\n\t}\r\n\r\n\tif(debugLightHelper){\r\n\t\tsetTimeout(function(){\r\n\t\t\tdebugLightHelper.update();\r\n\t\t},1000)\r\n\t\t\r\n\t}\r\n\r\n\r\n}\r\n\r\nfunction cycle(){\r\n\r\n}\r\nfunction getWind(){\r\n\treturn wind;\r\n}\r\n\r\n\r\nfunction animate(){\r\n\r\n\ttempHeight+=tempD;\r\n    if(tempHeight<0){\r\n        tempHeight=0;\r\n        tempD=-tempD;\r\n    }else if(tempHeight>40){\r\n        tempHeight=40;\r\n        tempD=-tempD;\r\n    }\r\n    if(tempHeight>10){\r\n        sunLight.color.setHex(0xffffff);\r\n        ambientLight.color.setHex(0x606060);\r\n        _Render_js__WEBPACK_IMPORTED_MODULE_1__.setClearColor(0xb0e9fd,1);\r\n    }/*else if(tempHeight>50){\r\n        sunLight.color.setHex(0xFAD227);\r\n        ambientLight.color.setHex(0x5E5371);\r\n        Render.setClearColor(0xF0FDB0,1);\r\n    }else{\r\n        sunLight.color.setHex(0xFF6600);\r\n        ambientLight.color.setHex(0x3F2A62);\r\n        Render.setClearColor(0xF86722,1);\r\n    }*/\r\n    sunLight.position.z=200+tempHeight*4;\r\n    sunTarget.position.y=sunCenter.y-tempHeight*4;\r\n}\r\n\r\n\r\nfunction setShadows(bool){\r\n    if(!bool){\r\n        //SHADOW_SIZE=2048;\r\n         sunLight.visible = false;\r\n         sunLight2.visible = true;\r\n    }\r\n    else{\r\n        //SHADOW_SIZE=512;\r\n        sunLight.visible = true;\r\n         sunLight2.visible = false;    \r\n     }\r\n   // sunLight.shadow.mapSize.width = SHADOW_SIZE;  // default\r\n    //sunLight.shadow.mapSize.height = SHADOW_SIZE; // default\r\n}\r\nfunction setShadowPos(pos){\r\n\tsunCenter.set(pos.x,pos.y,pos.z)\r\nsunLight.position.x=pos.x;\r\nsunLight.position.y=pos.y;\r\nsunTarget.position.x=pos.x;\r\n}\r\n\r\nfunction setLightHelper(bool){\r\n    if(!bool){\r\n         if(debugLightHelper){\r\n         \tdebugLightHelper.visible=false;\r\n         }\r\n    }\r\n    else{\r\n    \tif(!debugLightHelper){\r\n    \t\tdebugLightHelper = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.CameraHelper( sunLight.shadow.camera );\r\n\t\t\t_Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel( debugLightHelper ); \r\n    \t}else{\r\n    \t\tdebugLightHelper.visible=true;\r\n    \t}\r\n        \r\n     }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://buup/./src/Environment.js?");

/***/ }),

/***/ "./src/Helper.js":
/*!***********************!*\
  !*** ./src/Helper.js ***!
  \***********************/
/*! namespace exports */
/*! export getRandomColor [provided] [no usage info] [missing usage info prevents renaming] */
/*! export hexToRGB [provided] [no usage info] [missing usage info prevents renaming] */
/*! export hexToRGBFloat [provided] [no usage info] [missing usage info prevents renaming] */
/*! export rgbFloatToHex [provided] [no usage info] [missing usage info prevents renaming] */
/*! export rgbToHex [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"rgbToHex\": () => /* binding */ rgbToHex,\n/* harmony export */   \"rgbFloatToHex\": () => /* binding */ rgbFloatToHex,\n/* harmony export */   \"hexToRGB\": () => /* binding */ hexToRGB,\n/* harmony export */   \"hexToRGBFloat\": () => /* binding */ hexToRGBFloat,\n/* harmony export */   \"getRandomColor\": () => /* binding */ getRandomColor\n/* harmony export */ });\n\r\n\r\nfunction hexToRGB(h) {\r\n\tif(h.startsWith('0x'))\r\n\t\th=h.substring(1)\r\n  let r = 0, g = 0, b = 0;\r\n\r\n  // 3 digits\r\n  if (h.length == 4) {\r\n    r = \"0x\" + h[1] + h[1];\r\n    g = \"0x\" + h[2] + h[2];\r\n    b = \"0x\" + h[3] + h[3];\r\n\r\n  // 6 digits\r\n  } else if (h.length == 7) {\r\n    r = \"0x\" + h[1] + h[2];\r\n    g = \"0x\" + h[3] + h[4];\r\n    b = \"0x\" + h[5] + h[6];\r\n  }\r\n  let ar=[parseInt(r),parseInt(g),parseInt(b)]\r\n  \r\n  return ar;\r\n}\r\nfunction hexToRGBFloat(h){\r\n\tlet ar=hexToRGB(h);\r\n\treturn ar.map(v=>{return v/256.0})\r\n}\r\n\r\nfunction componentToHex(c) {\r\n  var hex = c.toString(16);\r\n  return hex.length == 1 ? \"0\" + hex : hex;\r\n}\r\n\r\nfunction rgbToHex(r, g, b) {\r\n  return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n}\r\nfunction rgbFloatToHex(r,g,b){\r\n\tr=Math.floor(r*256);\r\n\tg=Math.floor(g*256);\r\n\tb=Math.floor(b*256);\r\n\treturn rgbToHex(r,g,b)\r\n}\r\n\r\nfunction getRandomColor() {\r\n  var letters = '0123456789ABCDEF';\r\n  var color = '';//Math.random()>0.3?0x66B136:0x76610E;\r\n  for (var i = 0; i < 6; i++) {\r\n    let val;\r\n    /*if(i<2)\r\n        val=(Math.random() * 4)+4\r\n    else if(i<4)\r\n        val=(Math.random() * 6)+7\r\n    else*/\r\n        val=Math.random() * 16\r\n\r\n    color += letters[Math.floor(val)];\r\n  }\r\n  return parseInt(color);\r\n}\r\n\r\n\n\n//# sourceURL=webpack://buup/./src/Helper.js?");

/***/ }),

/***/ "./src/HexManager.js":
/*!***************************!*\
  !*** ./src/HexManager.js ***!
  \***************************/
/*! namespace exports */
/*! export getModel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export hexCheck [provided] [no usage info] [missing usage info prevents renaming] */
/*! export hexPick [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setType [provided] [no usage info] [missing usage info prevents renaming] */
/*! export toggleType [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"hexCheck\": () => /* binding */ hexCheck,\n/* harmony export */   \"hexPick\": () => /* binding */ hexPick,\n/* harmony export */   \"toggleType\": () => /* binding */ toggleType,\n/* harmony export */   \"setType\": () => /* binding */ setType,\n/* harmony export */   \"getModel\": () => /* binding */ getModel\n/* harmony export */ });\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _Helper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Helper.js */ \"./src/Helper.js\");\n/* harmony import */ var _PictureMaker_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PictureMaker.js */ \"./src/PictureMaker.js\");\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n\r\n\r\n\r\n\r\n\r\n//grass #6CA90B\r\n//grass2/tree leaf #A1C73A\r\n//grass3 #53963F\r\n//path #BEB55D\r\n//mountain/dirt #907B67\r\n///riverside #999065  river edged grass use grass3\r\n//river #659799\r\n// tree #B68A61\r\n//tree2 #8C735B\r\n\r\n\r\nvar hex=[]\r\nvar landBits=[]\r\nvar grid=[];\r\nconst SCALE=8\r\nconst SIZE=32\r\nconst HALF_GRID=12*SCALE/2\r\n\r\nvar hexType=2;\r\n\r\nvar hexSelector\r\n\r\nfunction init(){\r\n\r\n_Render_js__WEBPACK_IMPORTED_MODULE_0__.loadModel('./assets/models/Hex.glb',m=>{\r\n\tconsole.log('got children '+m.children.length)\r\n\tlet basicMat = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_3__.MeshStandardMaterial({ vertexColors: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_3__.VertexColors, metalness: 0, roughness: 1.0}); // \r\n\t//basicMat.shading = THREE.SmoothShading;\r\n\tfor(let i=0;i<m.children.length;i++){\r\n\t\t//m.children[i]\r\n\t\tlet mm=m.children[i]\r\n\t\t//mm.geometry.computeVertexNormals(true);\r\n\t\t//m.children[i].scale.set(200,200,200)\r\n\t\t//mm.rotation.x=Math.PI/2\r\n\t\tmm.position.set(0,0,60)\r\n\t\tmm.scale.set(SCALE,SCALE,SCALE)\r\n    //mm.material= new THREE.MeshBasicMaterial( {color: 0x20E89F, side: THREE.FrontSide} );\r\n\r\n\t\tmm.material=basicMat\r\n\t\tmm.receiveShadow =true;\r\n\t\tif(mm.name.startsWith(\"Mount\") || mm.name.startsWith(\"Tree\"))\r\n\t\t\tmm.castShadow =true;\r\n\t\t//Render.addModel(mm)\r\n\t\thex[mm.name]=mm;\r\n\r\n\t\tlet colors=[];\r\n\t\tif(mm.geometry){\r\n\r\n\r\n\t\t\tlet count=mm.geometry.attributes.color.array.length/4\r\n\t\t\tfor(let i=0;i<count;i++){\r\n\t\t\t\tlet n=i*4;\r\n\t\t\t\tlet vr=mm.geometry.attributes.color.array[0+n];\r\n\t\t\t\tlet vg=mm.geometry.attributes.color.array[1+n];\r\n\t\t\t\tlet vb=mm.geometry.attributes.color.array[2+n];\r\n\t\t\t\t//let va=mm.geometry.attributes.color.array[3+n];\r\n\t\t\t\tlet val=_Helper_js__WEBPACK_IMPORTED_MODULE_1__.rgbFloatToHex(vr,vg,vb)\r\n\t\t\t\tcolors[val]=val\r\n\t\t\t}\r\n\r\n\t\t\tconsole.log(colors)\r\n\t\t}\r\n\t\t\r\n\t\t//console.log(vr,vg,vb,va)\r\n\t\t//let val=Helper.rgbFloatToHex(mm.geometry.attributes.color.array[0],mm.geometry.attributes.color.array[1],mm.geometry.attributes.color.array[2])\r\n\t\t//console.log(val)\r\n\r\n\t\t\r\n\r\n\t}\r\n\tfunction clik(d,i){\r\n\t\td.addEventListener('click',ev=>{\r\n\t\t\tsetType(i)\r\n\t\t})\r\n\t}\r\n\r\n\tlet doms=document.querySelectorAll('.hex')\r\n\tdoms[0].appendChild(_PictureMaker_js__WEBPACK_IMPORTED_MODULE_2__.make(getModel('Grass_O1')));clik(doms[0],1);\r\n\tdoms[1].appendChild(_PictureMaker_js__WEBPACK_IMPORTED_MODULE_2__.make(getModel('Tree_N'), 75, -75));clik(doms[1],4);\r\n\tdoms[2].appendChild(_PictureMaker_js__WEBPACK_IMPORTED_MODULE_2__.make(getModel('Grass_P1')));clik(doms[2],2);\r\n\tdoms[3].appendChild(_PictureMaker_js__WEBPACK_IMPORTED_MODULE_2__.make(getModel('Mount_N'),90));clik(doms[3],3);\r\n\tdoms[4].appendChild(_PictureMaker_js__WEBPACK_IMPORTED_MODULE_2__.make(getModel('Water_N')));clik(doms[4],0);\r\n\r\n\r\n\tclearLand()\r\n\r\n\twindow.hex=hex;\r\n\twindow.place=place\r\n\twindow.land=land\r\n\twindow.clearLand=clearLand\r\n\r\n\t\r\n\t \t\r\n\r\n\t\r\n\t//window.m=m;//.children[0]\r\n})\r\npointerInit();\r\nhexLines();\r\n\r\n}\r\n\r\nfunction pointerInit(){\r\n\tlet pointerMat = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_3__.MeshBasicMaterial( { color:0x4AE13A } );\r\n\r\n    let g=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_3__.Group();\r\n    let p=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_3__.PlaneBufferGeometry(.6,SCALE);\r\n    let m=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_3__.Mesh(p,pointerMat)\r\n    m.position.set(SCALE,0,0)\r\n    g.add(m)\r\n    for(let i=0;i<6;i++){\r\n        let n=m.clone();\r\n        n.rotation.z=i*Math.PI/3\r\n\r\n        n.position.set(Math.cos(n.rotation.z)*SCALE,Math.sin(n.rotation.z)*SCALE,0)\r\n        g.add(n)\r\n    }\r\n    g.position.z+=6;\r\n    _Render_js__WEBPACK_IMPORTED_MODULE_0__.addModel(g)\r\n    hexSelector=g;\r\n}\r\n\r\nfunction hexLines(){\r\n\tlet radius=1;\r\n\tlet skew=SCALE*radius*Math.sqrt(3)/2;\r\n\t\r\n\r\n\t//dummy.position.set(offsetx+i*9,0,offsetz+j*skew*2 +i*skew);\r\n\t//let m=hex[prefix+st].clone();\r\n\t//m.position.set((-HALF_GRID)+x*skew*2 +y*skew,y*SCALE*1.5,-SCALE*.2)\r\n\r\n\tvar geometry = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_3__.Geometry();\r\n\tlet my=SCALE/2;\r\n\tfor(let x=0;x<SIZE;x++){\r\n\t\tfor(let y=0;y<SIZE;y++){\r\n\t\t\tgeometry.vertices.push( new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_3__.Vector3((-HALF_GRID+skew)+x*skew*2 +y*skew,-my+y*SCALE*1.5,.8))\r\n\t\t\tgeometry.vertices.push( new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_3__.Vector3((-HALF_GRID+skew)+x*skew*2 +y*skew,my+y*SCALE*1.5,.8))\r\n\t\t\tgeometry.vertices.push( new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_3__.Vector3((-HALF_GRID+skew)+x*skew*2 +y*skew,my+y*SCALE*1.5,.8))\r\n\t\t\tgeometry.vertices.push( new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_3__.Vector3((-HALF_GRID)+x*skew*2 +y*skew,SCALE+y*SCALE*1.5,.8))\r\n\t\t\tgeometry.vertices.push( new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_3__.Vector3((-HALF_GRID)+x*skew*2 +y*skew,SCALE+y*SCALE*1.5,.8))\r\n\t\t\tgeometry.vertices.push( new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_3__.Vector3((-HALF_GRID-skew)+x*skew*2 +y*skew,my+y*SCALE*1.5,.8))\r\n\t\t}\r\n\t}\r\n    /*geometry.vertices.push( new THREE.Vector3( -2, 0, 0 ) );\r\n\tgeometry.vertices.push( new THREE.Vector3( 0, 2, 0 ) );\r\n\tgeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ) );\r\n\tgeometry.vertices.push( new THREE.Vector3( 2, 0, 0 ) );*/\r\n\r\n    var material = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_3__.LineBasicMaterial( { color: 0xffffff } );\r\n    var line = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_3__.LineSegments( geometry, material );\r\n    _Render_js__WEBPACK_IMPORTED_MODULE_0__.addModel( line );\r\n\r\n}\r\n\r\nfunction place(x,y,t){\r\n\tgrid[x][y]=t\r\n\tprocessLand();\r\n}\r\n\r\nfunction processLand(){\r\n\tSEED=6;\r\n\tmodelClear()\r\n\tfor(let i=0;i<grid.length;i++){\r\n\t\tfor(let j=0;j<grid.length;j++){\r\n\t\t\tlet n=grid[i][j];\r\n\t\t\tlet rando=Math.floor(randomSeed(1,4))\r\n\t\t\tlet turner=Math.floor(randomSeed(1,6))\r\n\t\t\tif(n!=1){ //hex coordinate system follows, hang tight it's a bumpy ride!\r\n\t\t\t\t//if(i==2 && j==2)\r\n\t\t\t\t\t//debugger\r\n\t\t\t\tlet l,r,tl,tr;\r\n\r\n\t\t\t\tl=(i>0)?grid[i-1][j]:0  \r\n\t\t\t\t // pure hex x left right\r\n\t\t\t\tr=(i<grid.length-1)?grid[i+1][j]:0\r\n\r\n\r\n\t\t\t\t//land('P1',i,j,1)\r\n\t\t\t\r\n\t\t\t\t//upper hex edges, left and right\r\n\r\n\t\t\t\tif(j<grid.length-1){\r\n\r\n\t\t\t\t\ttl=(i>0)?grid[i-1][j+1]:0\r\n\t\t\t\t\ttr=grid[i][j+1]\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttl=0;tr=0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//land('T1',i,j,1)\r\n\r\n\t\t\t\t//lower hex edges, left and right, notice the farther then normal postive check due to our skewed hex design\r\n\t\t\t\t\r\n\t\t\t\tlet bl,br;\r\n\t\t\t\tif(j>0){\r\n\t\t\t\t\tbl=grid[i][j-1]\r\n\t\t\t\t\tbr=(i<grid.length-1)? grid[i+1][j-1]:0\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbl=0;br=0;\r\n\t\t\t\t}\r\n\t\t\t\tl=l==n;r=r==n;tr=tr==n;br=br==n;bl=bl==n;tl=tl==n;\r\n\r\n\t\t\t\tlet st=(tl?'1':'0') + (l?'1':'0') + (bl?'1':'0') + (br?'1':'0') + (r?'1':'0') + (tr?'1':'0');\r\n\t\t\t\t\r\n\r\n\t\t\t\t//let total=l?1:0 + r?1:0 + tl?1:0 + tr?1:0 + bl?1:0 + br?1:0;\r\n\t\t\t\tlet start=-1;\r\n\t\t\t\tlet index=0;\r\n\t\t\t\tlet circle=[tl,tr,r,br,bl,l]\r\n\t\t\t\tlet branches=[];\r\n\t\t\t\tlet hole=5;\r\n\t\t\t\tcircle.forEach((b,i)=>{\r\n\t\t\t\t\tif(b){\r\n\t\t\t\t\t\tbranches.push(i)\r\n\t\t\t\t\t\tif(start==-1)\r\n\t\t\t\t\t\t\tstart=i;\r\n\r\n\t\t\t\t\t\tindex=i;\r\n\t\t\t\t\t}else\r\n\t\t\t\t\t\thole=i\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log('grid %i %i %s branches %i',i,j,st,branches.length)\r\n\r\n\t\t\t\tlet letter='N'\r\n\t\t\t\tlet type=''\r\n\t\t\t\tif(branches.length==6){\r\n\t\t\t\t\tland(n,'H'+type,i,j,Math.floor(turner));\r\n\t\t\t\t}else if(branches.length>0){\r\n\t\t\t\t\tlet distances=[];\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar last=branches[0]\r\n\t\t\t\t\tfor(let i=1;i<branches.length;i++){\r\n\t\t\t\t\t\tdistances.push((branches[i]-last)-1)\r\n\t\t\t\t\t\tlast=branches[i]\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log(distances)\r\n\r\n\t\t\t\t\tlet r=start==-1?0:start;\r\n\t\t\t\t\t\r\n\t\t\t\t\tswitch(branches.length){\r\n\t\t\t\t\t\tcase 1:  letter='E'\r\n\t\t\t\t\t\tr+=0;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 2:  letter='P'; \r\n\t\t\t\t\t\tif(distances[0]==0){\r\n\t\t\t\t\t\t\ttype='3';r+=0;\r\n\t\t\t\t\t\t}else if(distances[0]==1){\r\n\t\t\t\t\t\t\ttype='2';r+=0;\r\n\t\t\t\t\t\t}else if(distances[0]==2){\r\n\t\t\t\t\t\t\ttype='1';r+=0;\r\n\t\t\t\t\t\t}else if(distances[0]==3){\r\n\t\t\t\t\t\t\ttype='2';r+=4;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\ttype='3';r+=5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 3:letter='T'; //3 paths\r\n\t\t\t\t\t\tif(distances[0]==0){\r\n\t\t\t\t\t\t\tif(distances[1]==0){\r\n\t\t\t\t\t\t\t\ttype=1;r+=0;\r\n\t\t\t\t\t\t\t}else if(distances[1]==3){\r\n\t\t\t\t\t\t\t\ttype=1;r+=5;\r\n\t\t\t\t\t\t\t}else if(distances[1]==1){\r\n\t\t\t\t\t\t\t\ttype=3;r+=3;\r\n\t\t\t\t\t\t\t}else if(distances[1]==2){\r\n\t\t\t\t\t\t\t\ttype=2;r+=4;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else if(distances[0]==1){\r\n\t\t\t\t\t\t\tif(distances[1]==0){\r\n\t\t\t\t\t\t\t\ttype=2;//r+=0;\r\n\t\t\t\t\t\t\t}else if(distances[1]==1){\r\n\t\t\t\t\t\t\t\ttype=4;//r+=0;\r\n\t\t\t\t\t\t\t}else if(distances[1]==2){\r\n\t\t\t\t\t\t\t\ttype=3;r+=2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else if(distances[0]==2){\r\n\t\t\t\t\t\t\tif(distances[1]==0){\r\n\t\t\t\t\t\t\t\ttype=3;r+=0;\r\n\t\t\t\t\t\t\t}else if(distances[1]==1){\r\n\t\t\t\t\t\t\t\ttype=2;r+=3;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\ttype=1;r+=4;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tr=r%6;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 4:letter='Q'; //4 path\r\n\t\t\t\t\t\tif(distances[0]==0){\r\n\t\t\t\t\t\t\tif(distances[1]==0){\r\n\t\t\t\t\t\t\t\tif(distances[2]==0){\r\n\t\t\t\t\t\t\t\t\ttype=1;r+=0\r\n\t\t\t\t\t\t\t\t}else if(distances[2]==1){\r\n\t\t\t\t\t\t\t\t\ttype=3;r+=2;\r\n\t\t\t\t\t\t\t\t}else if(distances[2]==2){\r\n\t\t\t\t\t\t\t\t\ttype=1; r+=5;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else if(distances[1]==1){\r\n\t\t\t\t\t\t\t\tif(distances[2]==0){\r\n\t\t\t\t\t\t\t\t\ttype=2;r+=4;\r\n\t\t\t\t\t\t\t\t}else if(distances[2]==1){\r\n\t\t\t\t\t\t\t\t\ttype=3;r+=1\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else {//}( 2==2)\r\n\t\t\t\t\t\t\t\ttype=1;r+=4;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else if(distances[0]==1){\r\n\t\t\t\t\t\t\tif(distances[1]==0){\r\n\t\t\t\t\t\t\t\tif(distances[2]==0){\r\n\t\t\t\t\t\t\t\t\ttype=3; r+=4;\r\n\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\ttype=2;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else{ //1 1 0\r\n\t\t\t\t\t\t\t\ttype=3\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\ttype=1;r+=3;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tr=r%6;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 5:letter='F';\r\n\t\t\t\t\t\tr=hole+1;\t\t\t\t\t\t\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tland(n,letter+type,i,j,r)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tland(n,'N',i,j,0)\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t//rotation 0 tl\r\n\t\t\t\t//1 l\r\n\t\t\t\t//2 bl\r\n\t\t\t\t//3 br\r\n\t\t\t\t//4 r\r\n\t\t\t\t//5 tr\r\n/*\r\n\t\t\t\tswitch(total){\r\n\t\t\t\t\tcase 1: land('P2',i,j); break;\r\n\t\t\t\t\tcase 2: land('P1',i,j); break;\r\n\t\t\t\t\tcase 3: land('T1',i,j); break;\r\n\t\t\t\t\tcase 4: land('Q1',i,j); break;\r\n\t\t\t\t\tcase 5: land('F1',i,j); break;\r\n\t\t\t\t\tcase 6: land('H',i,j); break;\r\n\t\t\t\t\tdefault: land('O1',i,j);\r\n\t\t\t\t}*/\r\n\r\n\t\t\t\t//land('Q1',i,j,1)\r\n\r\n\t\t\t\t \r\n\t\t\t\t//no neighbors! \r\n\t\t\t\t//land('P1',i,j,n-2)\r\n\r\n\t\t\t}else if(n==1){\r\n\t\t\t\t//SEED=i*j\r\n\t\t\t\tland(n,'O'+rando,i,j,Math.floor(turner))//,Math.floor(Math.random()*6))\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nfunction land(n,st,x,y,r) {\r\n\t//n==1 grass, n==2 path, n==3 mount\r\n\tlet radius=1;\r\n\tlet skew=SCALE*radius*Math.sqrt(3)/2;\r\n\tlet prefix=\"Grass_\"\r\n\tif(n==3){\r\n\t\tprefix=\"Mount_\"\r\n\t}else if(n==4){\r\n\t\tprefix=\"Tree_\"\r\n\t}else if(n==0){\r\n\t\tprefix=\"Water_\"\r\n\t}\r\n\r\n\t//dummy.position.set(offsetx+i*9,0,offsetz+j*skew*2 +i*skew);\r\n\tlet m=hex[prefix+st].clone();\r\n\tm.position.set((-HALF_GRID)+x*skew*2 +y*skew,y*SCALE*1.5,-SCALE*.2)\r\n\tif(r){ //sp always not 0\r\n\t\tr=6-r;\r\n\t\tm.rotation.z=r*Math.PI/3\r\n\t}\r\n\t\r\n\tlandBits.push(m)\r\n\t_Render_js__WEBPACK_IMPORTED_MODULE_0__.addModel(m)\r\n}\r\n\r\nfunction modelClear(){\r\n\tlandBits.forEach(m=>{\r\n\t\t_Render_js__WEBPACK_IMPORTED_MODULE_0__.removeModel(m)\r\n\t})\r\n\tlandBits=[];\r\n}\r\nfunction clearLand(){\r\n\t\r\n\tmodelClear()\r\n\tfor(let i=0;i<SIZE;i++){\r\n\t\tgrid[i]=[];\r\n\t\tfor(let j=0;j<SIZE;j++){\r\n\t\t\tgrid[i][j]=1\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction hexCheck(x,y){\r\n\r\n\tlet radius=1;\r\n\tlet skew=SCALE*radius*Math.sqrt(3)/2;\r\n\t//m.position.set(-120+x*skew*2 +y*skew,-120+y*30,40)\r\n\tlet y2=Math.floor((SCALE+y)/(SCALE*1.5));\r\n\tlet x2=Math.floor(((x+HALF_GRID+SCALE)-y2*skew)/(skew*2))\r\n\thexSelector.position.set(-HALF_GRID+x2*skew*2 +y2*skew,y2*SCALE*1.5,.8)\r\n\t\r\n\treturn [x2,y2]\r\n\r\n\t\r\n}\r\nlet lastPick={x:0,y:0}\r\nfunction hexPick(x,y){\r\n\tlet [x2,y2] = hexCheck(x,y)\r\n\r\n\t//console.log('click',x,y,x2,y2)\r\n\tlet bounds=grid.length;\r\n\tif(!(x2==lastPick.x && y2==lastPick.y) && x2>-1 && y2>-1 && x2<bounds && y2<bounds){\r\n\t\t/*let v=grid[x2][y2];\r\n\t\t\r\n\t\tif(v==hexType)\t\r\n\t\t\tv=1\r\n\t\telse\r\n\t\t\tv=hexType*/\r\n\r\n\r\n\t\tplace(x2,y2,hexType)\r\n\t\tlastPick.x=x2;lastPick.y=y2;\r\n\t}\r\n}\r\n\r\n\r\n\r\nvar SEED = 6;\r\n \r\n// in order to work 'Math.seed' must NOT be undefined,\r\n// so in any case, you HAVE to provide a Math.seed\r\nfunction randomSeed(max, min) {\r\n    max = max || 1;\r\n    min = min || 0;\r\n \r\n    SEED = (SEED * 9301 + 49297) % 233280;\r\n    var rnd = SEED / 233280;\r\n \r\n    return min + rnd * (max - min);\r\n}\r\n\r\n\r\nfunction toggleType(){\r\n\tif(hexType==2)\r\n\t\thexType=3\r\n\telse if(hexType==3)\r\n\t\thexType=4\r\n\telse if(hexType==4)\r\n\t\thexType=0\r\n\telse if(hexType==0)\r\n\t\thexType=1;\r\n\telse\r\n\t\thexType=2\r\n}\r\nfunction setType(i){\r\n\thexType=i;\r\n}\r\nfunction getModel(st){\r\n\treturn hex[st].clone();\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://buup/./src/HexManager.js?");

/***/ }),

/***/ "./src/Main.js":
/*!*********************!*\
  !*** ./src/Main.js ***!
  \*********************/
/*! namespace exports */
/*! export controls [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"controls\": () => /* binding */ controls\n/* harmony export */ });\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _HexManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HexManager.js */ \"./src/HexManager.js\");\n/* harmony import */ var _Control_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Control.js */ \"./src/Control.js\");\n/* harmony import */ var _Online_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Online.js */ \"./src/Online.js\");\n/* harmony import */ var _PictureMaker_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PictureMaker.js */ \"./src/PictureMaker.js\");\n/* harmony import */ var _Physics_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Physics.js */ \"./src/Physics.js\");\n/* harmony import */ var _UI_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./UI.js */ \"./src/UI.js\");\n/* harmony import */ var _BarUI_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./BarUI.js */ \"./src/BarUI.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar mainDom;\r\n\r\nfunction init() {\r\n\tmainDom=document.querySelector('#main');\r\n\tcontrols = {};\r\n\t_UI_js__WEBPACK_IMPORTED_MODULE_7__.init(mainDom)\r\n\r\n    _Physics_js__WEBPACK_IMPORTED_MODULE_6__.init();\r\n\r\n   \r\n\r\n    window.addEventListener('keydown', ev => {\r\n        console.log(ev.keyCode)\r\n        switch (ev.keyCode) {\r\n            case 37:\r\n            case 65:\r\n                controls.left = true;\r\n                break; //left\r\n            case 39:\r\n            case 68:\r\n                controls.right = true;\r\n                break; //right\r\n            case 38:\r\n            case 87:\r\n                controls.up = true;\r\n                break; //up\r\n            case 40:\r\n            case 83:\r\n                controls.down = true;\r\n                break; //down\r\n            case 32:\r\n                make();\r\n                break;\r\n            case 66:\r\n                for(let ii = 0; ii < 12; ii++) { make(); }\r\n                break;\r\n            case 69:\r\n                _HexManager_js__WEBPACK_IMPORTED_MODULE_2__.toggleType();\r\n                break;\r\n            case 71:\r\n                makeMan();\r\n                break;\r\n            case 81:\r\n                _PictureMaker_js__WEBPACK_IMPORTED_MODULE_5__.test();\r\n                break;\r\n            case 82:\r\n                //PictureMaker.make(HexManager.getModel('Tree_N'), 75, -75);\r\n                _Online_js__WEBPACK_IMPORTED_MODULE_4__.resetPhys();\r\n                break;\r\n            case 84:\r\n                //PictureMaker.make(HexManager.getModel('Mount_N'), 90, -20);\r\n                break;\r\n            case 89:\r\n                _Online_js__WEBPACK_IMPORTED_MODULE_4__.makePhys({x:.5,y:.5,z:.5},2,{x:0,y:0,z:30});\r\n                break;\r\n\r\n            case 8:\r\n                _HexManager_js__WEBPACK_IMPORTED_MODULE_2__.setType(1);\r\n                break;\r\n        }\r\n\r\n\r\n\r\n    })\r\n    window.addEventListener('keyup', ev => {\r\n        switch (ev.keyCode) {\r\n            case 37:\r\n            case 65:\r\n                controls.left = false;\r\n                break; //left\r\n            case 39:\r\n            case 68:\r\n                controls.right = false;\r\n                break; //right\r\n            case 38:\r\n            case 87:\r\n                controls.up = false;\r\n                break; //up\r\n            case 40:\r\n            case 83:\r\n                controls.down = false;\r\n                break; //down\r\n        }\r\n    })\r\n\r\n    let canvas = _Render_js__WEBPACK_IMPORTED_MODULE_1__.init();\r\n   \r\n\r\n\r\n\r\n    //makeRoom(200,220,80,10)\r\n   \r\n\r\n    _HexManager_js__WEBPACK_IMPORTED_MODULE_2__.init();\r\n    _Control_js__WEBPACK_IMPORTED_MODULE_3__.init();\r\n    _PictureMaker_js__WEBPACK_IMPORTED_MODULE_5__.init();\r\n    _Online_js__WEBPACK_IMPORTED_MODULE_4__.init();\r\n\r\n    _BarUI_js__WEBPACK_IMPORTED_MODULE_8__.init();\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\ninit();\r\n\r\n\r\n\r\nvar controls\r\n\r\n\r\nfunction makeRoom(w, d, h, t) {\r\n    let body = new CANNON.Body({ mass: 0, material: wallProperty });\r\n\r\n    let xWall = new CANNON.Box(new CANNON.Vec3(t / 2, d, h));\r\n    let yWall = new CANNON.Box(new CANNON.Vec3(w, t / 2, h));\r\n    let zWall = new CANNON.Box(new CANNON.Vec3(w, d, t / 2));\r\n\r\n\r\n\r\n    body.addShape(xWall, new CANNON.Vec3(-w, 0, h / 2));\r\n    body.addShape(xWall, new CANNON.Vec3(w, 0, h / 2));\r\n\r\n    body.addShape(yWall, new CANNON.Vec3(0, -d, h / 2));\r\n    body.addShape(yWall, new CANNON.Vec3(0, d, h / 2));\r\n\r\n    body.addShape(zWall, new CANNON.Vec3(0, 0, h));\r\n    body.addShape(zWall, new CANNON.Vec3(0, 0, 0));\r\n    world.addBody(body);\r\n\r\n    let xm = _Render_js__WEBPACK_IMPORTED_MODULE_1__.cubic(t, d * 2, h, -w, 0, h / 2, _Render_js__WEBPACK_IMPORTED_MODULE_1__.wood);\r\n    let xm2 = xm.clone()\r\n    xm2.position.x = w;\r\n\r\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel(xm)\r\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel(xm2)\r\n\r\n    let ym = _Render_js__WEBPACK_IMPORTED_MODULE_1__.cubic(w * 2, t, h, 0, d, h / 2, _Render_js__WEBPACK_IMPORTED_MODULE_1__.wood);\r\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel(ym)\r\n\r\n    let zm = _Render_js__WEBPACK_IMPORTED_MODULE_1__.cubic(w * 2, d * 2, t, 0, 0, 0, _Render_js__WEBPACK_IMPORTED_MODULE_1__.ground);\r\n    _Render_js__WEBPACK_IMPORTED_MODULE_1__.addModel(zm)\r\n\r\n}\r\n\r\n\r\n\r\nfunction rand(x) {\r\n    return (Math.random() * 2 - 1) * x\r\n}\r\n\r\n\n\n//# sourceURL=webpack://buup/./src/Main.js?");

/***/ }),

/***/ "./src/Online.js":
/*!***********************!*\
  !*** ./src/Online.js ***!
  \***********************/
/*! namespace exports */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export makePhys [provided] [no usage info] [missing usage info prevents renaming] */
/*! export resetPhys [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"makePhys\": () => /* binding */ makePhys,\n/* harmony export */   \"resetPhys\": () => /* binding */ resetPhys\n/* harmony export */ });\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! socket.io-client */ \"./node_modules/socket.io-client/lib/index.js\");\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(socket_io_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Main_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Main.js */ \"./src/Main.js\");\n/* harmony import */ var _Physics_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Physics.js */ \"./src/Physics.js\");\n\r\n//import io from \"socket.io-client\"\r\n\r\n\r\n\r\n\r\nvar socket;\r\n\r\nvar physReady=false;\r\n\r\nfunction init() {\r\n\tsocket = socket_io_client__WEBPACK_IMPORTED_MODULE_0__('/dand-dev');\r\n\t//socket.emit('init','hi')\r\n\r\n\tsocket.on('physUpdate', function(data){\r\n\t\t//Physics.setPlayer()\r\n\t\tif(physReady){\r\n\t\t\t_Physics_js__WEBPACK_IMPORTED_MODULE_2__.syncOnline(data)\r\n\t\t\tconsole.log('phys synced')\r\n\t\t}else\r\n\t\t\tconsole.log('!!!phys IGNORED')\r\n\t\t\r\n\t})\r\n\tsocket.on('physInit', function(data){\r\n\t\t_Physics_js__WEBPACK_IMPORTED_MODULE_2__.clearPhys();\r\n\t\tdata.forEach(item=>{\r\n\t\t\t_Physics_js__WEBPACK_IMPORTED_MODULE_2__.makePhys(item[0],item[1],item[2],{x:0,y:0,z:0})\r\n\t\t})\r\n\t\tphysReady=true;\r\n\t})\r\n\r\n\r\n\tsocket.on('physMake', function(id,size,mass,pos){\r\n\t\t_Physics_js__WEBPACK_IMPORTED_MODULE_2__.makePhys(id,size,mass,pos)\r\n\t\tconsole.log('made')\r\n\t})\r\n\r\nsocket.on('connect',()=>{\r\n    console.log('created a connection');\r\n    //alert('Hello friend, server has reconnected, refreshing your instance!')\r\n   // window.location.reload(false);\r\n   socket.emit('physInit')\r\n   });\r\n\r\n\tconsole.log('online code ran')\r\n}\r\nfunction makePhys(size,mass,pos){\r\n\tsocket.emit('physMake',size,mass,pos);\r\n}\r\nfunction resetPhys(){\r\n\tsocket.emit('physReset');\r\n}\r\n\r\n\n\n//# sourceURL=webpack://buup/./src/Online.js?");

/***/ }),

/***/ "./src/Physics.js":
/*!************************!*\
  !*** ./src/Physics.js ***!
  \************************/
/*! namespace exports */
/*! export clearPhys [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export makePhys [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setPlayer [provided] [no usage info] [missing usage info prevents renaming] */
/*! export syncOnline [provided] [no usage info] [missing usage info prevents renaming] */
/*! export updatePhysics [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"updatePhysics\": () => /* binding */ updatePhysics,\n/* harmony export */   \"setPlayer\": () => /* binding */ setPlayer,\n/* harmony export */   \"makePhys\": () => /* binding */ makePhys,\n/* harmony export */   \"clearPhys\": () => /* binding */ clearPhys,\n/* harmony export */   \"syncOnline\": () => /* binding */ syncOnline\n/* harmony export */ });\n/* harmony import */ var _Main_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Main.js */ \"./src/Main.js\");\n/* harmony import */ var _Control_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Control.js */ \"./src/Control.js\");\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n/* harmony import */ var _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/cannon.min.js */ \"./src/lib/cannon.min.js\");\n/* harmony import */ var _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__);\n\r\n\r\n\r\n\r\n\r\nvar gooProperty;\r\nvar wallProperty;\r\n\r\nvar bodies;\r\nvar meshes;\r\nvar particles;\r\nvar bullets;\r\nvar world;\r\nvar playerBody;\r\nvar orientation = 0;\r\n\r\nconst dt = 1 / 100; //1/20\r\n\r\nfunction init() {\r\n    let N = 1;\r\n    bodies = [];\r\n    meshes = [];\r\n    particles = [];\r\n    bullets = [];\r\n   \r\n    // Setup our world\r\n    world = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.World();\r\n    world.quatNormalizeSkip = 0;\r\n    world.quatNormalizeFast = false;\r\n\r\n    //world.gravity.set(0,0,-10);\r\n    world.broadphase = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.NaiveBroadphase();\r\n\r\n    // Create boxes\r\n    let mass = 4,\r\n        radius = 1.3;\r\n    let boxShape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Vec3(1, 1, 2));\r\n    for(let i = 0; i < N; i++) {\r\n        let boxBody = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Body({ mass: mass });\r\n        boxBody.addShape(boxShape);\r\n        boxBody.position.set(0, 0, 60);\r\n        world.addBody(boxBody);\r\n        //boxBody.angularDamping=0.8 //really high\r\n        playerBody = boxBody\r\n        window.playerBody = playerBody\r\n        //playerBody.angularDamping=1\r\n        //bodies.push(boxBody);\r\n    }\r\n\r\n\r\n    /*\r\n            // Create a plane\r\n            let groundShape = new CANNON.Plane();\r\n            let c=40\r\n            let h=150\r\n            let points=[\r\n            new CANNON.Vec3(-c,-c,0),new CANNON.Vec3(-c,c,0),new CANNON.Vec3(c,c,0),new CANNON.Vec3(c,-c,0),\r\n            new CANNON.Vec3(-c,-c,h),new CANNON.Vec3(-c,c,h),new CANNON.Vec3(c,c,h),new CANNON.Vec3(c,-c,h)\r\n            ]\r\n            let faces=[[4,7,6,5]]//[[3,2,1,0],[4,5,0,1],[6,7,3,2],[0,3,7,4],[2,1,5,6],[4,7,6],[6,5,4]]//,  ,   [2,3,6,7]] //\r\n            let box = new CANNON.ConvexPolyhedron(points,faces);\r\n            */\r\n    /*let groundBody = new CANNON.Body({ mass: 0 });\r\n            groundBody.addShape(box);\r\n            groundBody.position.set(0,0,25)\r\n           // groundBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2);\r\n            world.addBody(groundBody);*/\r\n\r\n    // Joint body\r\n    /*let shape = new CANNON.Sphere(0.1);\r\n    let jointBody = new CANNON.Body({ mass: 0 });\r\n    jointBody.addShape(shape);\r\n    jointBody.collisionFilterGroup = 0;\r\n    jointBody.collisionFilterMask = 0;\r\n    world.addBody(jointBody)*/\r\n\r\n    //debugger\r\n    /*var gooWallPhysics = new CANNON.ContactMaterial(gooProperty,\r\n                                                            wallProperty,\r\n                                                            1, // friction coefficient\r\n                                                            0  // restitution\r\n                                                            );*/\r\n    // We must add the contact materials to the world\r\n    //world.addContactMaterial(gooWallPhysics);\r\n\r\n\r\n    gooProperty = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Material({ name: \"gooProperty\", friction: 10.0, restitution: -1.0 });\r\n    gooProperty.name = \"gooProperty\"\r\n    //gooProperty.friction=1\r\n\r\n    wallProperty = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Material({ name: \"wallProperty\", friction: 0.1, restitution: 1 });\r\n    wallProperty.name = \"wallProperty\"\r\n\r\n\r\n     makeFloor();\r\n\r\n}\r\n\r\nvar count = 0;\r\n\r\nfunction makeBullet() {\r\n    let fireSpeed = 12;\r\n\r\n    let boxBody;\r\n    if(bullets.length > 30) {\r\n        boxBody = bullets.shift();\r\n        bullets.push(boxBody)\r\n        //boxBody.arrayIndex=\r\n        boxBody.collisionResponse = true;\r\n        boxBody.wakeUp();\r\n\r\n\r\n    } else {\r\n\r\n\r\n        let size = { x: .4, y: .4, z: .4 }\r\n        let boxShape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Vec3(size.x / 2, size.y / 2, size.z / 2));\r\n        boxBody = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Body({ mass: 2 });\r\n        boxBody.addShape(boxShape);\r\n        bodies.push(boxBody);\r\n\r\n        boxBody.bullet = true;\r\n\r\n        bullets.push(boxBody)\r\n\r\n\r\n        let cube = _Render_js__WEBPACK_IMPORTED_MODULE_2__.cubic(size.x, size.y, size.z, 0, 0, 0, _Render_js__WEBPACK_IMPORTED_MODULE_2__.yellow);\r\n        meshes.push(cube)\r\n\r\n        _Render_js__WEBPACK_IMPORTED_MODULE_2__.addModel(cube)\r\n        world.addBody(boxBody);\r\n\r\n\r\n    }\r\n\r\n\r\n    let v = new THREE.Vector3(0, 0, 0)\r\n    let speed = new THREE.Vector3(0, 0, 0)\r\n\r\n\r\n    let xx = -Math.sin(orientation)\r\n    let yy = Math.cos(orientation)\r\n\r\n    v.x = xx * 1.5\r\n    v.y = yy * 1.5\r\n    speed.x = fireSpeed * xx;\r\n    speed.y = fireSpeed * yy;\r\n\r\n\r\n    v.add({ x: rand(.2), y: rand(.2), z: rand(.2) })\r\n\r\n\r\n    //v.applyQuaternion(Render.player.quaternion)\r\n    v.add(_Render_js__WEBPACK_IMPORTED_MODULE_2__.player.position)\r\n    boxBody.position.copy(v)\r\n    boxBody.quaternion.copy(_Render_js__WEBPACK_IMPORTED_MODULE_2__.player.quaternion)\r\n\r\n    //speed.applyQuaternion(Render.player.quaternion)\r\n    boxBody.velocity.copy(speed)\r\n\r\n    let opposite = new THREE.Vector3(-0.05 * speed.x, -0.05 * speed.y, -0.05 * speed.z)\r\n    //opposite.applyQuaternion(Render.player.quaternion)\r\n    opposite.add(playerBody.velocity);\r\n\r\n    playerBody.velocity.copy(opposite)\r\n\r\n\r\n    //boxBody.angularDamping=0.8 //really high\r\n    count++;\r\n\r\n}\r\n\r\nfunction makeBlood(p, v) {\r\n    let boxBody;\r\n    if(count > 100) {\r\n        boxBody = particles.shift();\r\n        particles.push(boxBody)\r\n        boxBody.collisionResponse = true;\r\n    } else {\r\n\r\n        let size = { x: .4, y: .4, z: .4 }\r\n        let boxShape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Vec3(size.x / 2, size.y / 2, size.z / 2));\r\n        boxBody = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Body({ mass: 0.01, material: gooProperty });\r\n        boxBody.addShape(boxShape);\r\n        bodies.push(boxBody);\r\n\r\n        particles.push(boxBody)\r\n\r\n        //let cube=Render.cubic(size.x,size.y,size.z,0,0,0,Render.blood);\r\n        let sphere = new THREE.SphereGeometry(.35, 5, 3)\r\n        let orb = new THREE.Mesh(sphere, _Render_js__WEBPACK_IMPORTED_MODULE_2__.blood);\r\n        meshes.push(orb)\r\n\r\n        _Render_js__WEBPACK_IMPORTED_MODULE_2__.addModel(orb)\r\n        world.addBody(boxBody);\r\n    }\r\n    boxBody.position.copy(p.position)\r\n    if(v)\r\n        boxBody.velocity.copy(v)\r\n\r\n    boxBody.addEventListener(\"collide\", ev => {\r\n        if(ev.body.material) {\r\n            if(ev.body.material.name == 'wallProperty') {\r\n                boxBody.collisionResponse = false;\r\n                boxBody.sleep();\r\n            }\r\n        }\r\n    })\r\n\r\n}\r\n\r\n\r\nfunction makeMan() {\r\n    let size = { x: 1, y: 1, z: 2 }\r\n    let boxShape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Vec3(size.x / 2, size.y / 2, size.z / 2));\r\n    let boxBody = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Body({ mass: 8 });\r\n    boxBody.addShape(boxShape);\r\n    bodies.push(boxBody);\r\n    boxBody.angularDamping = 1\r\n    boxBody.position.set(_Control_js__WEBPACK_IMPORTED_MODULE_1__.x(), _Control_js__WEBPACK_IMPORTED_MODULE_1__.y(), 20)\r\n\r\n\r\n    boxBody.addEventListener(\"collide\", ev => {\r\n        if(ev.body.bullet) {\r\n            if(ev.body.velocity.length() > 5) {\r\n                boxBody.angularDamping = 0.01\r\n                console.log('sht')\r\n                makeBlood(boxBody, ev.body.velocity)\r\n            }\r\n        }\r\n    })\r\n\r\n\r\n    let cube = _Render_js__WEBPACK_IMPORTED_MODULE_2__.cubic(size.x, size.y, size.z);\r\n    meshes.push(cube)\r\n\r\n    _Render_js__WEBPACK_IMPORTED_MODULE_2__.addModel(cube)\r\n    world.addBody(boxBody);\r\n}\r\n\r\nfunction makeFloor() {\r\n    let groundShape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Plane();\r\n    let groundBody = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Body({ mass: 0 });\r\n    groundBody.addShape(groundShape);\r\n    world.addBody(groundBody);\r\n}\r\n\r\nfunction applyQuaternion(v, q) { //ripped from threejs because i didnt feel like converting between cannojs types\r\n\r\n\r\n    const x = v.x,\r\n        y = v.y,\r\n        z = v.z;\r\n    const qx = q.x,\r\n        qy = q.y,\r\n        qz = q.z,\r\n        qw = q.w;\r\n\r\n    // calculate quat * vector\r\n\r\n    const ix = qw * x + qy * z - qz * y;\r\n    const iy = qw * y + qz * x - qx * z;\r\n    const iz = qw * z + qx * y - qy * x;\r\n    const iw = -qx * x - qy * y - qz * z;\r\n\r\n    // calculate result * inverse quat\r\n\r\n    v.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\r\n    v.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\r\n    v.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\r\n\r\n    return v;\r\n}\r\n\r\nfunction updatePhysics() {\r\n    /*bodies[0].position.set(point.x,point.y,point.z)\r\n    bodies[0].velocity.set(0,0,0)\r\n    bodies[0].angularDamping=1\r\n    bodies[0].inertia.set(0,0,0)*/\r\n\r\n    world.step(dt);\r\n\r\n\r\n\r\n    for(var i = 0; i !== bodies.length; i++) {\r\n    \tif(bodies[i].id!=undefined){\r\n    \t\tlet m=meshArray[bodies[i].id]\r\n    \t\tm.position.copy(bodies[i].position);\r\n        \tm.quaternion.copy(bodies[i].quaternion);\r\n    \t}\r\n    \t\r\n       \r\n        if(bodies[i].position.z < -100) {\r\n            bodies[i].position.set(Math.random() * 80 - 40, Math.random() * 80 - 40, 100)\r\n\r\n            bodies[i].velocity.set(0, 0, 0)\r\n            bodies[i].collisionResponse = false;\r\n            bodies[i].sleep();\r\n        }\r\n\r\n    }\r\n\r\n    let r = _Control_js__WEBPACK_IMPORTED_MODULE_1__.getAngle();\r\n    let vd = playerBody.velocity.length()\r\n    if(_Main_js__WEBPACK_IMPORTED_MODULE_0__.controls.left) {\r\n        //if(playerBody.velocity.x>-40)\r\n        //playerBody.velocity.x-=4\r\n        if(vd < 2) {\r\n            playerBody.velocity.x -= Math.cos(r) * 2\r\n            playerBody.velocity.y -= Math.sin(r) * 2\r\n        }\r\n        orientation = r + Math.PI / 2\r\n        playerBody.quaternion.setFromAxisAngle(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Vec3(0, 0, 1), orientation);\r\n\r\n    } else if(_Main_js__WEBPACK_IMPORTED_MODULE_0__.controls.right) {\r\n        //if(playerBody.velocity.x<40)\r\n        if(vd < 2) {\r\n            playerBody.velocity.x += Math.cos(r) * 2\r\n            playerBody.velocity.y += Math.sin(r) * 2\r\n        }\r\n        orientation = r - Math.PI / 2;\r\n        playerBody.quaternion.setFromAxisAngle(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Vec3(0, 0, 1), orientation);\r\n\r\n    } else if(_Main_js__WEBPACK_IMPORTED_MODULE_0__.controls.up) {\r\n        //if(playerBody.velocity.y<40)\r\n        if(vd < 2) {\r\n            playerBody.velocity.x -= Math.sin(r) * 2\r\n            playerBody.velocity.y += Math.cos(r) * 2\r\n        }\r\n        orientation = r\r\n        playerBody.quaternion.setFromAxisAngle(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Vec3(0, 0, 1), orientation);\r\n\r\n    } else if(_Main_js__WEBPACK_IMPORTED_MODULE_0__.controls.down) {\r\n        //if(playerBody.velocity.y>-40)\r\n        if(vd < 2) {\r\n            playerBody.velocity.x += Math.sin(r) * 2\r\n            playerBody.velocity.y -= Math.cos(r) * 2\r\n        }\r\n        orientation = r + Math.PI\r\n        playerBody.quaternion.setFromAxisAngle(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Vec3(0, 0, 1), orientation);\r\n\r\n    }\r\n    _Render_js__WEBPACK_IMPORTED_MODULE_2__.player.position.copy(playerBody.position);\r\n    _Render_js__WEBPACK_IMPORTED_MODULE_2__.player.quaternion.copy(playerBody.quaternion);\r\n    //console.log(Render.player.position)\r\n}\r\n\r\n\r\nfunction setPlayer(position, quaternion, velocity) {\r\n    if(position && quaternion && velocity) {\r\n        playerBody.position.copy(position);\r\n        playerBody.quaternion.copy(quaternion);\r\n        playerBody.velocity.copy(velocity);\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n///ONLINE\r\n\r\nvar physIDs=[];\r\nvar physArray=[]\r\nvar meshArray=[]\r\n\r\nfunction makePhys(id,size, mass, pos) {\r\n    let body = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Body({ mass: mass });\r\n    let boxShape = new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Box(new _lib_cannon_min_js__WEBPACK_IMPORTED_MODULE_3__.Vec3(size.x, size.y, size.z));\r\n\r\n    body.addShape(boxShape);\r\n    body.position.set(pos.x, pos.y, pos.z);\r\n    \r\n    body.id = id;\r\n    physIDs.push(id)\r\n    physArray[id] = body;\r\n    bodies.push(body)\r\n    world.addBody(body);\r\n\r\n    let mesh=_Render_js__WEBPACK_IMPORTED_MODULE_2__.cubic(size.x*2,size.y*2,size.z*2,pos.x,pos.y,pos.z)\r\n    _Render_js__WEBPACK_IMPORTED_MODULE_2__.addModel(mesh)\r\n    meshArray[id]=mesh\r\n}\r\n\r\n\r\n\r\nfunction syncOnline(data){\r\n\tdata.forEach(stuff=>{\r\n\t\tlet p=physArray[stuff[0]];\r\n\t\t/*interpolate(p.position,stuff[1])\r\n\t\tinterpolate(p.velocity,stuff[3])\r\n\t\tinterpolate(p.angularVelocity,stuff[4])\r\n\t\tp.quaternion.copy(stuff[2])*/\r\n\r\n\r\n\t\tp.position.copy(stuff[1])\r\n\t\tp.quaternion.copy(stuff[2])\r\n\t\tp.velocity.copy(stuff[3])\r\n\t\tp.angularVelocity.copy(stuff[4])\r\n\t})\r\n}\r\nfunction interpolate(a,b){\r\n\tlet m={x:a.x-b.x,y:a.y-b.y,z:a.z-b.z}\r\n\ta.x-=m.x/2\r\n\ta.y-=m.y/2\r\n\ta.z-=m.z/2\r\n}\r\n\r\n\r\nfunction clearPhys(){\r\n\tmeshArray.forEach(m=>{\r\n\t\t_Render_js__WEBPACK_IMPORTED_MODULE_2__.removeModel(m);\r\n\t})\r\n\tmeshArray=[];\r\n\tbodies.forEach(p=>{\r\n\t\tworld.remove(p);\r\n\t})\r\n\tbodies=[]\r\n\tphysIDs=[]\r\n\tphysArray=[];\r\n}\r\n\r\n\n\n//# sourceURL=webpack://buup/./src/Physics.js?");

/***/ }),

/***/ "./src/PictureMaker.js":
/*!*****************************!*\
  !*** ./src/PictureMaker.js ***!
  \*****************************/
/*! namespace exports */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export make [provided] [no usage info] [missing usage info prevents renaming] */
/*! export test [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"make\": () => /* binding */ make,\n/* harmony export */   \"test\": () => /* binding */ test\n/* harmony export */ });\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n/* harmony import */ var _Render_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Render.js */ \"./src/Render.js\");\n\r\n\r\n\r\n\r\nvar scene;\r\nvar camera;\r\nvar testToggle=true;\r\n\r\nfunction init(){\r\n\tscene=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Scene();\r\n\t    camera = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.PerspectiveCamera(45, 1, 1, 1000);\r\n    camera.position.z = 200; //400\r\n    camera.position.y = -200; //-800\r\n    camera.up = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 1)\r\n\r\n    camera.lookAt(new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 0));\r\n\r\n    var ambientLight = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.AmbientLight( 0x8F8F8F ); // soft white light  0x404040\r\n   scene.add( ambientLight );\r\n\r\n    //let m=Render.cubic(100,100,1)\r\n    //scene.add(m)\r\n    \r\n}\r\n\r\nfunction make(m,size,offset){\r\n    if(size)\r\n        m.scale.set(size,size,size)\r\n    else\r\n        m.scale.set(110,110,110)\r\n\r\n    if(offset)\r\n        m.position.set(0,0,offset)\r\n    else\r\n        m.position.set(0,0,-30)\r\n\r\n    scene.add(m)\r\n\tlet pic= document.createElement('img');\r\n    pic.className='hexPortrait'\r\n    pic.setAttribute('src', _Render_js__WEBPACK_IMPORTED_MODULE_1__.bufferPrint(scene,camera));\r\n    //document.querySelector('#main').appendChild(pic);\r\n\r\n    scene.remove(m)\r\n    return pic;\r\n}\r\nfunction test(){\r\n\tif(testToggle)\r\n\t\t_Render_js__WEBPACK_IMPORTED_MODULE_1__.toggleScene(scene,camera);\r\n\telse\r\n\t\t_Render_js__WEBPACK_IMPORTED_MODULE_1__.toggleScene();\r\n\ttestToggle=!testToggle;\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://buup/./src/PictureMaker.js?");

/***/ }),

/***/ "./src/Render.js":
/*!***********************!*\
  !*** ./src/Render.js ***!
  \***********************/
/*! namespace exports */
/*! export addModel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export addModel2 [provided] [no usage info] [missing usage info prevents renaming] */
/*! export blood [provided] [no usage info] [missing usage info prevents renaming] */
/*! export bufferPrint [provided] [no usage info] [missing usage info prevents renaming] */
/*! export cubic [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getAlphaCanvas [provided] [no usage info] [missing usage info prevents renaming] */
/*! export ground [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export loadModel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export player [provided] [no usage info] [missing usage info prevents renaming] */
/*! export removeModel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export resize [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setClearColor [provided] [no usage info] [missing usage info prevents renaming] */
/*! export toggleScene [provided] [no usage info] [missing usage info prevents renaming] */
/*! export wood [provided] [no usage info] [missing usage info prevents renaming] */
/*! export yellow [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"addModel\": () => /* binding */ addModel,\n/* harmony export */   \"removeModel\": () => /* binding */ removeModel,\n/* harmony export */   \"setClearColor\": () => /* binding */ setClearColor,\n/* harmony export */   \"toggleScene\": () => /* binding */ toggleScene,\n/* harmony export */   \"addModel2\": () => /* binding */ addModel2,\n/* harmony export */   \"cubic\": () => /* binding */ cubic,\n/* harmony export */   \"wood\": () => /* binding */ wood,\n/* harmony export */   \"ground\": () => /* binding */ ground,\n/* harmony export */   \"blood\": () => /* binding */ blood,\n/* harmony export */   \"yellow\": () => /* binding */ yellow,\n/* harmony export */   \"getAlphaCanvas\": () => /* binding */ getAlphaCanvas,\n/* harmony export */   \"bufferPrint\": () => /* binding */ bufferPrint,\n/* harmony export */   \"loadModel\": () => /* binding */ loadModel,\n/* harmony export */   \"resize\": () => /* binding */ resize,\n/* harmony export */   \"player\": () => /* binding */ player\n/* harmony export */ });\n/* harmony import */ var _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/three.module.js */ \"./src/lib/three.module.js\");\n/* harmony import */ var _Main_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Main.js */ \"./src/Main.js\");\n/* harmony import */ var _Physics_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Physics.js */ \"./src/Physics.js\");\n/* harmony import */ var _Control_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Control.js */ \"./src/Control.js\");\n/* harmony import */ var _Environment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Environment */ \"./src/Environment.js\");\n/* harmony import */ var _lib_GLTFLoader_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/GLTFLoader.js */ \"./src/lib/GLTFLoader.js\");\n/* harmony import */ var _lib_EffectComposer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/EffectComposer.js */ \"./src/lib/EffectComposer.js\");\n/* harmony import */ var _lib_ShaderPass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/ShaderPass.js */ \"./src/lib/ShaderPass.js\");\n/* harmony import */ var _lib_SSAOPass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/SSAOPass.js */ \"./src/lib/SSAOPass.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//import * as Control from \"./Control.js?v=16\";\r\n//import * as World from \"./World.js?v=16\";\r\n//import {OrbitControls} from \"./lib/OrbitControls.js\";\r\n//import * as Texture from \"./Texture.js?v=16\";\r\n//import * as Stats from \"./lib/stats.js\";\r\n//import * as AssetManager from \"./AssetManager.js?v=16\";\r\n//import * as Experiment from \"./Experiment.js?v=16\";\r\n\r\n\r\nvar camera, renderer;\r\nvar scene\r\nvar group\r\n\r\nvar activeCamera, activeScene;\r\n\r\n\r\nvar docWidth, docHeight;\r\n\r\nvar loader;\r\nvar mixer;\r\n\r\nvar SHADOW_SIZE = 2048;\r\nvar SIZE_DIVIDER = 8;\r\n\r\nvar alphaCanvas;\r\n\r\n\r\nvar activeCanvas;\r\n\r\nvar composer;\r\n\r\nvar specterMaterial;\r\nvar defaultMat\r\n\r\n\r\nvar player;\r\nvar wood;\r\nvar ground;\r\nvar blood;\r\nvar yellow;\r\n\r\nvar pointer;\r\nvar hexSelector;\r\nvar pointerMat;\r\nvar pointerMatOn;\r\n\r\n\r\nfunction init() {\r\n\r\n     \r\n\r\n    camera = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 5000);\r\n    camera.position.z = 200; //400\r\n    camera.position.y = -200; //-800\r\n    camera.up = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 1)\r\n\r\n    camera.lookAt(new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 0));\r\n\r\n    scene= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Scene();\r\n    activeScene = scene;\r\n\r\n    alphaCanvas = document.querySelector('.canvasHolder');\r\n\r\n\r\n\r\n\r\n    renderer = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.WebGLRenderer({  antialias: true ,alpha: true,}); //\r\n    renderer.shadowMap.enabled = true;\r\n    renderer.shadowMap.type = _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.PCFSoftShadowMap;\r\n    renderer.toneMapping = _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.ACESFilmicToneMapping \r\n    renderer.outputEncoding = _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.sRGBEncoding\r\n\r\n    renderer.setClearColor(0xFF7F32, 1); //0xb0e9fd,1);//0xb0e9fd,1)\r\n\r\n    alphaCanvas.appendChild(renderer.domElement);\r\n\r\n    loader = new _lib_GLTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.GLTFLoader();\r\n\r\n    initCustomMaterial();\r\n\r\n    activeCanvas = alphaCanvas;\r\n\r\n    activeScene=scene;\r\n    activeCamera=camera;\r\n\r\n\r\n\r\n    resize();\r\n\r\n\r\n    composer = new _lib_EffectComposer_js__WEBPACK_IMPORTED_MODULE_6__.EffectComposer(renderer);\r\n    //var luminosityPass = new ShaderPass(LuminosityShader);\r\n    //composer.addPass(luminosityPass);\r\n    let ssaoPass = new _lib_SSAOPass_js__WEBPACK_IMPORTED_MODULE_8__.SSAOPass( scene, camera, 300, 200);\r\n    ssaoPass.kernelRadius = 6;\r\n    ssaoPass.minDistance=0.00015;\r\n    ssaoPass.maxDistance=0.001;\r\n    composer.addPass( ssaoPass );\r\n    window.ssao=ssaoPass\r\n\r\n\r\n\r\n    let material= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial( {color:0x75D5CE});\r\n    new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0x20E89F, metalness: 0, roughness: 1.0 });\r\n\r\n    wood= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0x20E89F, metalness: 0, roughness: 1.0 });\r\n    ground= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0x5471A5, metalness: 0, roughness: 1.0 });\r\n    let guyMat= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0xEAF722, metalness: 0, roughness: 1.0 }); \r\n    defaultMat= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0xCF2ADE, metalness: 0, roughness: 1.0 });\r\n    blood= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0xB60B0B, metalness: 0, roughness: 1.0 }); \r\n    yellow= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0xEAF722, metalness: 0, roughness: 1.0 });\r\n\r\n\r\n    //material = new THREE.MeshBasicMaterial( {color: new THREE.Color(\"white\")} );\r\n    /*geometry = new THREE.BoxBufferGeometry( 100, 100, 100 );\r\n    cube = new THREE.Mesh( geometry, material );\r\n    cube.position.z=50;\r\n    scene.add( cube );*/\r\n    group = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Group();\r\n\r\n/*\r\n    group.add(cubic(10,100,50,-50,0,50,wood));\r\n    group.add(cubic(10,100,50,50,0,50,wood));\r\n    group.add(cubic(100,10,50,0,50,50,wood));\r\n    group.add(cubic(100,100,10,0,0,20,ground));*/\r\n\r\n    player=new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Group();\r\n    let whiteMat= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial( {color: 0xFFFFFF, side: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.FrontSide} );\r\n\r\n    let blackMat= new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial( {color: 0x321818, side: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.FrontSide} );\r\n\r\n\r\n    let p1=cubic(1,1,2,0,0,0,guyMat);\r\n    let p2=cubic(1,.2,1,0,.5,.5,whiteMat)\r\n    let p3=cubic(.3,.2,.3,0,.6,.5,blackMat)\r\n\r\n    player.add(p1)\r\n    player.add(p2)\r\n    player.add(p3)\r\n    group.add(player)\r\n\r\n    let referenceCube=cubic(.5,.5,1.5,0.75,0,20,new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial( { color:0xD62B5F } ))\r\n    group.add(referenceCube)\r\n\r\n    scene.add(group)\r\n    pointerInit();\r\n    _Environment__WEBPACK_IMPORTED_MODULE_4__.init();\r\n    _Control_js__WEBPACK_IMPORTED_MODULE_3__.setRenderer(renderer,alphaCanvas,camera,false)\r\n\r\n\r\n    \r\n    setTimeout(function(){\r\n        animate();\r\n    },1)\r\n    \r\n    return alphaCanvas\r\n\r\n\r\n}\r\n\r\nfunction pointerInit(){\r\n    let pointerGeom = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.CircleGeometry( 6, 16 );\r\n    //pointerGeom.rotateX(-Math.PI/2.0);\r\n    pointerMat = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial( { color:0x4AE13A } );\r\n    pointerMatOn = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial( { color:0xEBEE00 } );\r\n    pointer = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh(pointerGeom,pointerMat);\r\n    pointer.position.z=0.05;\r\n    scene.add(pointer);\r\n\r\n\r\n}\r\n\r\nfunction getAlphaCanvas() {\r\n    return alphaCanvas;\r\n}\r\n\r\nfunction loadModel(model, callback, texture, color) {\r\n    loader.load(\r\n        ('./' + model), //villager22.gltf',\r\n        (gltf) => {\r\n            // called when the resource is loaded\r\n            //gltf.scene.scale.set(10,10,10);\r\n            let model; //=gltf.scene.children[0];\r\n            gltf.scene.rotation.x = Math.PI / 2;\r\n            gltf.scene.traverse(function(child) {\r\n                if(child instanceof _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh) {\r\n                    //if(child.name==\"Cube\"){\r\n                    model = child;\r\n                    if(!texture) {\r\n                        if(color)\r\n                            child.material = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: color, metalness: 0, roughness: 1.0 }); // \r\n                        else\r\n                            child.material = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ vertexColors: _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.VertexColors, metalness: 0, roughness: 1.0}); // \r\n\r\n                        child.material.needsUpdate = true;\r\n                        //child.material.skinning=true;\r\n                    }\r\n                    //child.material.morphTargets=true;\r\n\r\n                    //child.material.map.needsUpdate = true;\r\n                    // }else{\r\n\r\n                    //}\r\n                }\r\n            });\r\n            //gltf.scene.children[0].children[1].scale.set(20,20,20);\r\n            //gltf.scene.children.pop();\r\n            //let mixer = new THREE.AnimationMixer( gltf.scene );\r\n            //model=gltf.scene.children[0]\r\n            let m2 = gltf.scene.children[0];\r\n            if(model) {\r\n                var animations = gltf.animations;\r\n                if(animations && animations.length) {\r\n\r\n                    mixer = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.AnimationMixer(model);\r\n                    for(var i = 0; i < animations.length; i++) {\r\n                        var animation = animations[i];\r\n                        // There's .3333 seconds junk at the tail of the Monster animation that\r\n                        // keeps it from looping cleanly. Clip it at 3 seconds\r\n\r\n                        //if ( sceneInfo.animationTime ) {\r\n                        //    animation.duration = sceneInfo.animationTime;\r\n\r\n\r\n                        // }\r\n                        action = mixer.clipAction(animation);\r\n                        //action.setEffectiveTimeScale(200);\r\n                        //action.timeScale=0.002;\r\n                        action.timeScale = 0.002;\r\n                        //if ( state.playAnimation ) \r\n                        action.play();\r\n                    }\r\n                }\r\n                //mainScene.add( gltf.scene.children[0] );\r\n            }\r\n            callback(gltf.scene);\r\n        },\r\n        (xhr) => {\r\n            // called while loading is progressing\r\n            console.log(`${( xhr.loaded / xhr.total * 100 )}% loaded`);\r\n        },\r\n        (error) => {\r\n            // called when loading has errors\r\n            console.error('An error happened', error);\r\n        },\r\n    );\r\n}\r\n\r\nfunction resize() {\r\n    //Math.max(window.screen.width, window.innerWidth)\r\n    //Math.max(window.screen.height, window.innerHeight)\r\n    if(window.screen.width> window.innerWidth){\r\n        docWidth =  window.innerWidth\r\n        docHeight = window.innerHeight\r\n    }else{\r\n        docWidth =  window.screen.width\r\n        docHeight = window.screen.height\r\n    }\r\n\r\n    //docWidth =  window.innerWidth //Math.max(window.screen.width, window.innerWidth)\r\n    //docHeight = window.innerHeight //Math.max(window.screen.height, window.innerHeight)//window.innerHeight;\r\n    camera.aspect = docWidth / docHeight;\r\n    camera.updateProjectionMatrix();\r\n\r\n    renderer.setPixelRatio(0.5);//window.devicePixelRatio / SIZE_DIVIDER);\r\n    renderer.setSize(docWidth, docHeight);\r\n}\r\n\r\nvar dir=1;\r\nfunction animate(time) {\r\n\t_Physics_js__WEBPACK_IMPORTED_MODULE_2__.updatePhysics();\r\n    //group.rotation.z+=0.002*dir;\r\n    if(group.rotation.z>Math.PI/16)\r\n    \tdir=-1;\r\n    else if(group.rotation.z<-Math.PI/16)\r\n    \tdir=1;\r\n\r\n    applyCursor()\r\n    _Environment__WEBPACK_IMPORTED_MODULE_4__.animate();\r\n\r\n    renderer.render(activeScene, activeCamera);\r\n    //composer.render();\r\n    requestAnimationFrame(animate);\r\n}\r\n\r\nfunction dumpImage(img) {\r\n    let dom = document.querySelector('#afterImage');\r\n    if(dom)\r\n        dom.setAttribute('src', img);\r\n}\r\n\r\nfunction bufferPrint(sc,cam) {\r\n    //renderer.setPixelRatio(0.2)\r\n    //_grabImage=true;\r\n    \r\n    //renderer.setPixelRatio(0.5)\r\n\r\n    renderer.setSize(256, 256);\r\n    renderer.setClearColor(0xffffff,0)\r\n\r\n    if(sc && cam){\r\n        renderer.render(sc,cam);\r\n    }else    \r\n        renderer.render(getScene(), camera);\r\n    //dumpImage(renderer.domElement.toDataURL());\r\n     //renderer.setPixelRatio(0.5)\r\n    let m=renderer.domElement.toDataURL()\r\n    renderer.setSize(docWidth, docHeight);\r\n    return m;\r\n}\r\n\r\nvar anchors = [];\r\n\r\nfunction addAnchor(host, bubble) {\r\n    let anchor = {\r\n        host: host,\r\n        bubble: bubble,\r\n        x: 0,\r\n        y: 0,\r\n        offset: 0,\r\n    }\r\n    anchors.forEach(a => {\r\n        if(a.host == host) {\r\n            a.offset -= 40;\r\n        }\r\n    })\r\n    anchors.push(anchor);\r\n    console.log(anchors.length + ' anchors');\r\n    updateAnchor(anchor, anchors.length - 1);\r\n    return anchor;\r\n}\r\n\r\nfunction updateAnchor(anchor, index) {\r\n    if(!anchor.bubble) {\r\n        anchors.splice(index, 1);\r\n        return false;\r\n    }\r\n    if(anchor.host) {\r\n        let vector = projectVector(anchor.host);\r\n        anchor.bubble.style.left = -16 + vector.x + 'px';\r\n        anchor.bubble.style.top = (40 + anchor.offset + vector.y) + 'px';\r\n        anchor.x = vector.x;\r\n        anchor.y = vector.y;\r\n    }\r\n\r\n}\r\n\r\nfunction roundEdge(x) {\r\n    x = x % (Math.PI)\r\n    if(x < 0)\r\n        x += Math.PI * 2;\r\n\r\n    if(x > Math.PI / 4) {\r\n        if(x > 5 * Math.PI / 4) {\r\n            if(x < 7 * Math.PI / 4) {\r\n                return Math.PI * 3 / 2;\r\n            }\r\n        } else {\r\n            if(x > 3 * Math.PI / 4) {\r\n                return Math.PI;\r\n            } else {\r\n                return Math.PI / 2;\r\n            }\r\n        }\r\n    }\r\n    return 0;\r\n}\r\n\r\nfunction syncModel(index, obj) {\r\n    let m = modelsIndexed[index];\r\n    m.position.x = obj.x;\r\n    m.position.y = obj.y;\r\n    m.position.z = obj.z;\r\n}\r\n\r\nfunction createModel(index) {\r\n    let model = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh(cubeGeometry, cubeMaterial);\r\n    modelsIndexed[index] = model;\r\n    return model;\r\n}\r\nfunction addModel(model){\r\n\tgroup.add(model)\r\n}\r\nfunction addModel2(model){\r\n\tscene.add(model)\r\n}\r\nfunction removeModel(model){\r\n\tgroup.remove(model)\r\n}\r\n\r\nfunction cubic(i,j,k,x,y,z,c){\r\n     let geometry = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BoxBufferGeometry( i,j,k );\r\n     if(!c)\r\n    \tc=defaultMat\r\n\r\n    let cube = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh( geometry, c );\r\n    cube.castShadow=true;\r\n\r\n     cube.position.x=x?x:0;\r\n     cube.position.y=y?y:0;\r\n     cube.position.z=z?z:0;\r\n     return cube;\r\n}\r\nfunction getRandomColor() {\r\n    var letters = '0123456789ABCDEF';\r\n    var color = Math.random() > 0.5 ? 0x66B136 : 0x76610E;\r\n    return parseInt(color);\r\n}\r\n\r\nfunction applyCursor() {\r\n    /*if(Control.down()) {\r\n        pointer.material = pointerMatOn;\r\n    } else\r\n        pointer.material = pointerMat;*/\r\n\r\n    var vector = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3();\r\n    vector.set((_Control_js__WEBPACK_IMPORTED_MODULE_3__.screenX() / window.innerWidth) * 2 - 1, -(_Control_js__WEBPACK_IMPORTED_MODULE_3__.screenY() / window.innerHeight) * 2 + 1, 0.5);\r\n    vector.unproject(camera)\r\n    var dir = vector.sub(camera.position).normalize();\r\n    var distance = -camera.position.z / dir.z;\r\n    var pos = camera.position.clone().add(dir.multiplyScalar(distance));\r\n\r\n    pointer.position.x = pos.x;\r\n    pointer.position.y = pos.y\r\n    pointer.position.z=8;\r\n   // console.log(pointer.position)\r\n    _Control_js__WEBPACK_IMPORTED_MODULE_3__.setVector(pointer.position);\r\n\r\n}\r\n\r\nfunction projectVector(object) {\r\n\r\n    var width = docWidth,\r\n        height = docHeight;\r\n    var widthHalf = width / 2,\r\n        heightHalf = height / 2;\r\n\r\n    let vector = object.position.clone();\r\n    vector.z += 30\r\n    //vector.applyMatrix4(object.matrixWorld);\r\n    vector.project(camera)\r\n\r\n    //var projector = new THREE.Projector();\r\n    //projector.projectVector( vector.setFromMatrixPosition( object.matrixWorld ), camera );\r\n\r\n    vector.x = (vector.x * widthHalf) + widthHalf;\r\n    vector.y = -(vector.y * heightHalf) + heightHalf;\r\n    return vector;\r\n\r\n}\r\n\r\n\r\nvar specterMaterial\r\n\r\nfunction initCustomMaterial() {\r\n\r\n    var meshphysical_frag = `\r\n    #define STANDARD\r\n#ifdef PHYSICAL\r\n    #define REFLECTIVITY\r\n    #define CLEARCOAT\r\n    #define TRANSPARENCY\r\n#endif\r\nuniform vec3 diffuse;\r\nuniform vec3 emissive;\r\nuniform float roughness;\r\nuniform float metalness;\r\nuniform float opacity;\r\n#ifdef TRANSPARENCY\r\n    uniform float transparency;\r\n#endif\r\n#ifdef REFLECTIVITY\r\n    uniform float reflectivity;\r\n#endif\r\n#ifdef CLEARCOAT\r\n    uniform float clearcoat;\r\n    uniform float clearcoatRoughness;\r\n#endif\r\n#ifdef USE_SHEEN\r\n    uniform vec3 sheen;\r\n#endif\r\nvarying vec3 vViewPosition;\r\n#ifndef FLAT_SHADED\r\n    varying vec3 vNormal;\r\n    #ifdef USE_TANGENT\r\n        varying vec3 vTangent;\r\n        varying vec3 vBitangent;\r\n    #endif\r\n#endif\r\n#include <common>\r\n#include <packing>\r\n#include <dithering_pars_fragment>\r\n#include <color_pars_fragment>\r\n#include <uv_pars_fragment>\r\n#include <uv2_pars_fragment>\r\n#include <map_pars_fragment>\r\n#include <alphamap_pars_fragment>\r\n#include <aomap_pars_fragment>\r\n#include <lightmap_pars_fragment>\r\n#include <emissivemap_pars_fragment>\r\n#include <bsdfs>\r\n#include <cube_uv_reflection_fragment>\r\n#include <envmap_common_pars_fragment>\r\n#include <envmap_physical_pars_fragment>\r\n#include <fog_pars_fragment>\r\n#include <lights_pars_begin>\r\n#include <lights_physical_pars_fragment>\r\n#include <shadowmap_pars_fragment>\r\n#include <bumpmap_pars_fragment>\r\n#include <normalmap_pars_fragment>\r\n\r\n#include <roughnessmap_pars_fragment>\r\n#include <metalnessmap_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\nvoid main() {\r\n    #include <clipping_planes_fragment>\r\n    vec4 diffuseColor = vec4( diffuse, opacity );\r\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\r\n    vec3 totalEmissiveRadiance = emissive;\r\n    #include <logdepthbuf_fragment>\r\n    #include <map_fragment>\r\n    #include <color_fragment>\r\n    #include <alphamap_fragment>\r\n    #include <alphatest_fragment>\r\n    #include <roughnessmap_fragment>\r\n    #include <metalnessmap_fragment>\r\n    #include <normal_fragment_begin>\r\n    #include <normal_fragment_maps>\r\n    #include <clearcoat_normal_fragment_begin>\r\n    #include <clearcoat_normal_fragment_maps>\r\n    #include <emissivemap_fragment>\r\n    #include <lights_physical_fragment>\r\n    #include <lights_fragment_begin>\r\n    #include <lights_fragment_maps>\r\n    #include <lights_fragment_end>\r\n    #include <aomap_fragment>\r\n    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\r\n    #ifdef TRANSPARENCY\r\n        diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\r\n    #endif\r\n    gl_FragColor = vec4( outgoingLight,1.-(((0.2125 * outgoingLight.r) + (0.7154 * outgoingLight.g) + (0.0721 * outgoingLight.b)) ) );\r\n    #include <tonemapping_fragment>\r\n    #include <encodings_fragment>\r\n    #include <fog_fragment>\r\n    #include <premultiplied_alpha_fragment>\r\n    #include <dithering_fragment>\r\n}`\r\n\r\n    //gl_FragColor = vec4( outgoingLight, diffuseColor.a );\r\n\r\n\r\n    /*\r\n    #ifdef USE_COLOR\r\n                if(vColor==vec3(0,0,1))\r\n                    diffuseColor.rgb *= vec3(1,0,0);\r\n                else\r\n                    diffuseColor.rgb *= vColor;\r\n        #endif*/\r\n\r\n    //    #include <color_vertex>\r\n\r\n    var meshphysical_vert = `#define STANDARD\r\nvarying vec3 vViewPosition;\r\n#ifndef FLAT_SHADED\r\n    varying vec3 vNormal;\r\n    #ifdef USE_TANGENT\r\n        varying vec3 vTangent;\r\n        varying vec3 vBitangent;\r\n    #endif\r\n#endif\r\n#include <common>\r\n#include <uv_pars_vertex>\r\n#include <uv2_pars_vertex>\r\n#include <displacementmap_pars_vertex>\r\n#include <color_pars_vertex>\r\n#include <fog_pars_vertex>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <shadowmap_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nuniform vec3 shirt;\r\nuniform vec3 wind;\r\n\r\nvoid main() {\r\n    #include <uv_vertex>\r\n    #include <uv2_vertex>\r\n    #ifdef USE_COLOR\r\n        if(color==vec3(0,0,1))\r\n            vColor.xyz = shirt;\r\n        else\r\n            vColor.xyz = color.xyz;\r\n        \r\n    #endif\r\n    #include <beginnormal_vertex>\r\n    #include <morphnormal_vertex>\r\n    #include <skinbase_vertex>\r\n    #include <skinnormal_vertex>\r\n    #include <defaultnormal_vertex>\r\n#ifndef FLAT_SHADED\r\n    vNormal = normalize( transformedNormal );\r\n    #ifdef USE_TANGENT\r\n        vTangent = normalize( transformedTangent );\r\n        vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\r\n    #endif\r\n#endif\r\n    #include <begin_vertex>\r\n    #include <morphtarget_vertex>\r\n    #include <skinning_vertex>\r\n    #include <displacementmap_vertex>\r\n\r\n    \r\n        if(color==vec3(1,0,0)){\r\n            float val=max(0.0, 1.0976 - transformed.z);\r\n            transformed.xyz+=val*wind;\r\n            transformed.y*=1.0+sin((wind.z+transformed.z)*4.0)/2.0;\r\n\r\n        }\r\n    \r\n\r\n    #include <project_vertex>\r\n    #include <logdepthbuf_vertex>\r\n    #include <clipping_planes_vertex>\r\n    vViewPosition = - mvPosition.xyz;\r\n    #include <worldpos_vertex>\r\n    #include <shadowmap_vertex>\r\n    #include <fog_vertex>\r\n}`\r\n\r\n    var uniforms = _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.UniformsUtils.merge(\r\n        [_lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.ShaderLib.standard.uniforms,\r\n            //{shirt: {value:new THREE.Vector3(0,1,0)},\r\n            //wind: {value:new THREE.Vector3(0,0,0)}}\r\n        ]\r\n    );\r\n\r\n    /*specterMaterial =  new THREE.ShaderMaterial({\r\n    uniforms: uniforms,\r\n    fragmentShader: fragmentShader(),\r\n    vertexShader: vertexShader(),\r\n  })**/\r\n\r\n\r\n    specterMaterial = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.ShaderMaterial({\r\n        uniforms: uniforms,\r\n        derivatives: false,\r\n        lights: true,\r\n        vertexColors: true,\r\n        vertexShader: meshphysical_vert,\r\n        fragmentShader: meshphysical_frag,\r\n        roughness: 0.0,\r\n        metalness: 1.0,\r\n        //vertexShader: THREE.ShaderChunk.cube_vert,\r\n        //fragmentShader: THREE.ShaderChunk.cube_frag\r\n    });\r\n\r\n\r\n}\r\nfunction toggleScene(sc,cam){\r\n    if(cam && sc){\r\n        activeCamera=cam;\r\n        activeScene=sc;\r\n    }else{\r\n        activeScene=scene;\r\n        activeCamera=camera;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n/////SCENE///////\r\n\r\nvar emptyScene;\r\nvar scenes;\r\n\r\n\r\n\r\nfunction sceneInit() {\r\n    emptyScene = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Scene();\r\n    scenes = [];\r\n\r\n    let cubeGeometry = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BoxBufferGeometry(20, 20, 20);\r\n    let cubeMaterial = new _lib_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ color: 0xff8833 }); //map: texture\r\n\r\n    /*\r\n      var geometry = new THREE.SphereGeometry( 5, 32, 32 );\r\n      var material = new THREE.MeshBasicMaterial( {color: 0xffff00} );\r\n      var sphere = new THREE.Mesh( geometry, material );\r\n\r\n      sphere.position.set(0,0,-30);\r\n      cubes.push(sphere);\r\n      scenes[2].add(sphere);\r\n      var geo = new THREE.OctahedronGeometry( 30, 1 );\r\n      var mat = new THREE.MeshBasicMaterial( {color: 0xC92DD1} ); \r\n      var octa= new THREE.Mesh( geo, mat );\r\n      octa.position.set(0,0,20);\r\n      cubes.push(octa);\r\n      scenes[3].add(octa);*/\r\n}\r\n\r\n\r\n\r\nfunction flipScene(i) {\r\n    activeScene = i;\r\n}\r\nvar activeScene = 0;\r\nvar activeModule;\r\n/*\r\nfunction getScene() {\r\n    let index = activeScene;\r\n    let scene = scenes[index];\r\n    if(scene == undefined) {\r\n        scene = emptyScene\r\n        scenes[index] = 'pend';\r\n\r\n        //wow this is a conufsing mess but it's functional!\r\n        let importerFunction = SCENE_IMPORT[index];\r\n        if(importerFunction) {\r\n            Main.pendApp(index)\r\n            importerFunction(module => {\r\n                scenes[index] = [module.init(index,()=>{Main.clearPendApp(index)},Main.apps[index]), module]\r\n                \r\n            });\r\n        } else {\r\n            scenes[index] = [emptyScene, undefined]\r\n        }\r\n\r\n    \r\n    } else if(scene == 'pend') {\r\n        scene = emptyScene;\r\n    } else {\r\n        activeModule = scene[1]; //define the module that's currently active so we can run it's animate function in sceneAnimate()\r\n        scene = scene[0] //please forgive me, trust me it works\r\n    }\r\n\r\n    return scene;\r\n}*/\r\n\r\n///////////////\r\n\r\nfunction setClearColor(a,b){\r\n    renderer.setClearColor(a,b);\r\n}\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://buup/./src/Render.js?");

/***/ }),

/***/ "./src/UI.js":
/*!*******************!*\
  !*** ./src/UI.js ***!
  \*******************/
/*! namespace exports */
/*! export cursorMessage [provided] [no usage info] [missing usage info prevents renaming] */
/*! export init [provided] [no usage info] [missing usage info prevents renaming] */
/*! export systemMessage [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => /* binding */ init,\n/* harmony export */   \"systemMessage\": () => /* binding */ systemMessage,\n/* harmony export */   \"cursorMessage\": () => /* binding */ cursorMessage\n/* harmony export */ });\n//version 2\r\n\r\n\r\nlet main;\r\nlet sysTop;\r\nlet textDump;\r\n\r\nfunction init(mainDom){\r\n\r\n\tstyleInit();\r\n\tif(mainDom){\r\n\t\tmain=mainDom\r\n\t}else{\r\n\t\tmain=document.querySelector(\"#main\")\r\n\t\tif(!main)\r\n\t\t\tmain=document.body\r\n\t}\r\n\r\n\r\n\tif(main){\r\n\t\tsysTop=document.createElement('duv');\r\n\t\tsysTop.className='uiHolderSysTop';\r\n\t\tmain.appendChild(sysTop);\r\n\r\n\t\t//systemMessage(_spam('this is a test'))\r\n\t\t\r\n\r\n\t\ttextDump=document.createElement('input')\r\n\t\ttextDump.type='text'\r\n\t\ttextDump.style.position='fixed'\r\n\r\n\t\ttextDump.taxindex='-1'\t\t\t\r\n\t\ttextDump.style.display='none'\r\n\t\ttextDump.style.pointerEvents= 'none';\r\n\r\n\t\tmain.appendChild(textDump)\r\n\r\n\t}else{\r\n\t\tconsole.error('UI.js:: uh oh! no system dom element found')\r\n\t}\r\n\r\n/*\r\n\t//dev\r\n\twindow.addEventListener('keyup',function(ev){\r\n\t\tif(ev.keyCode==32){\r\n\t\t\tlet v=Math.random();\r\n\t\t\tlet type=v>0.2?v>0.4?v>0.6?'warn':'error':'person':'time';\r\n\t\t\t\r\n\t\t\tsystemMessage(_spam('this is a test '),type)\r\n\t\t}else if(ev.keyCode==90){\r\n\t\t\tDEVVAR=systemMessage('No network connection oh darrrrrrn \\n We\\'ll keep tryna connect in the background ;)','net',true)\r\n\t\t}else if(ev.keyCode==27){\r\n\t\t\tDEVVAR.remove();\r\n\t\t}\r\n\t})*/\r\n\r\n} \r\n\r\nfunction systemMessage(m,type,persistant){\r\n\tlet dom=document.createElement('div');\r\n\tdom.className='uiSysTop';\r\n\r\n\tlet icon=document.createElement('div');\r\n\tlet extra=' ';\r\n\r\n\tif(typeof type === 'object' && type !== null){\r\n\t\tif(type.type)\r\n\t\t\textra+=type.type\r\n\t\tif(type.color)\r\n\t\t\tdom.style.backgroundColor=type.color\r\n\t}else{\r\n\t\tswitch(type){\r\n\t\t\tcase 'warn': extra+='uiIconWarning'; dom.style.backgroundColor='#EFEF79';break;\r\n\t\t\tcase 'error': extra+='uiIconError'; dom.style.backgroundColor='#D25E5E';break;\r\n\t\t\tcase 'net': extra+='uiIconNet'; dom.style.backgroundColor='#FFC65E';break;\r\n\t\t\tcase 'person': extra+='uiIconPerson'; dom.style.backgroundColor='#D257FF';break;\r\n\t\t\tcase 'time': extra+='uiIconTime'; dom.style.backgroundColor='#5094D9';break;\r\n\t\t\tcase 'success': extra+='uiIconSuccess'; dom.style.backgroundColor='#95F17F';break;\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\ticon.className='uiIcon'+extra;\r\n\tlet span=document.createElement('span');\r\n\tspan.innerText=m;\r\n\r\n\tspan.addEventListener('click',function(ev){\r\n\t\t_copyText(span)\r\n\t\tcursorMessage(ev.clientX,ev.clientY,'Copied');\r\n\t})\r\n\r\n\tdom.appendChild(icon);\r\n\tdom.appendChild(span);\r\n\r\n\r\n\tfunction _endMessage() {\r\n\t\tdom.style.animation=persistant?'0.5s uiSysMini forwards':'0.5s uiSysFold forwards';\r\n\t\tsetTimeout(function(){\r\n\t\t\tif(persistant){\r\n\t\t\t\tdom.style.position='absolute'\r\n\t\t\t\tdom.style.left='-64px'\r\n\t\t\t\tdom.addEventListener('click',function(ev) {\r\n\t\t\t\t\tdom.style.animation='0.5s uiSysMax forwards';\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tdom.style.animation='0.5s uiSysMini forwards';\r\n\t\t\t\t\t},3500)\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tdom.remove();\r\n\t\t\t}\r\n\r\n\t\t},500);\r\n\t}\r\n\tif(!persistant){\r\n\t\tlet closeButton=document.createElement('div');\r\n\t\tcloseButton.className='uiCloseButton';\r\n\t\tdom.appendChild(closeButton);\r\n\r\n\t\tcloseButton.addEventListener('click',function(ev){\r\n\t\t\t_endMessage();\r\n\t\t})\r\n\t}\r\n\r\n\tsetTimeout(function(){\r\n\t\t_endMessage();\r\n\t},3500)\r\n\r\n\tsysTop.appendChild(dom);\r\n\treturn dom;\r\n}\r\n\r\nfunction cursorMessage(x,y,message){\r\n\tlet dom=document.createElement('div');\r\n\tdom.className='uiCursorMessage';\r\n\tdom.style.left=x+'px'\r\n\tdom.style.top=y+'px'\r\n\tdom.innerText=message;\r\n\tmain.appendChild(dom);\r\n\tsetTimeout(function(){\r\n\t\tdom.style.animation='1s uiFade forwards'\r\n\t\tsetTimeout(function(){\r\n\t\t\tdom.remove();\r\n\t\t},1000)\r\n\t},1500)\r\n}\r\n\r\n\r\n\r\nfunction _spam(m){\r\n\tlet st='';\r\n\tlet max=Math.random()*20\r\n\tfor(let i=0;i<max;i++){\r\n\t\tst+=m;\r\n\t}\r\n\treturn st;\r\n}\r\nfunction _copyText(dom){\r\n\ttextDump.value=dom.innerText;\r\n\ttextDump.style.display='block'\r\n\ttextDump.select();\r\n\t\t//_copyText.setSelectionRange(0, 99999); /*For mobile devices*/\r\n\r\n\tdocument.execCommand(\"copy\");\r\n\ttextDump.blur();\r\n\ttextDump.style.display='none'\r\n\t\r\n}\r\n\r\nfunction styleInit(){\r\n\tvar sheet = document.createElement('style')\r\n\tsheet.innerHTML =`\r\n\t\t.uiSysTop{\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-start;\r\n\t\tposition: relative;\r\n\t\tmax-width: 600px;\r\n\t\theight: 64px;\r\n\t\tborder-radius: 32px;\r\n\t\ttransform: translate(-50%);\r\n\t\tbox-shadow: 3px 3px 3px #0005;\r\n\t\tleft: 50%;\r\n\t\tbackground: #E0F9D5;\r\n\t\tmargin: 12px;\r\n\t\tanimation: uiSysUnfold 1s;\r\n\t\toverflow: hidden;\r\n\t\tline-height: 16px;\r\n\t}\r\n\t.uiSysTop div{\r\n\r\n\t\tmargin: 16px;\r\n\t\tmargin-left: 0px;\r\n\t\tflex: 0 0 64px;\r\n\t}\r\n\t.uiSysTop span{\r\n\t\tmargin-right: 48px;\r\n\t\tmargin-top: 8px;\r\n\t\tline-height: normal;\r\n\t\tvertical-align: middle;\r\n\t\tflex: 1;\r\n\r\n\t}\r\n\t@keyframes uiSysUnfold{\r\n\t\t0%{\r\n\t\t\tmax-width: 64px;\r\n\t\t\ttop: -64px;\r\n\t\t\topacity: 0.2;\r\n\t\t}\r\n\t\t50%{\r\n\t\t\tmax-width: 64px;\r\n\t\t\ttop:0px;\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t\t100%{\r\n\t\t\ttop: 0px;\r\n\t\t}\r\n\t}\r\n\t@keyframes uiSysFold{\r\n\t\t100%{\r\n\t\t\tmax-width: 64px;\r\n\t\t\ttop: -64px;\r\n\t\t\topacity: 0.2;\r\n\t\t\theight: 0;\r\n\t\t}\r\n\t\t50%{\r\n\t\t\tmax-width: 64px;\r\n\t\t\ttop:0px;\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t\t0%{\r\n\t\t\ttop: 0px;\r\n\r\n\t\t}\r\n\t}\r\n\t@keyframes uiSysMini{\r\n\t\t100%{\r\n\t\t\tmax-width: 64px;\r\n\t\t}\r\n\t\t50%{\r\n\t\t\tmax-width: 64px;\r\n\r\n\t\t}\r\n\t\t0%{\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t@keyframes uiSysMax{\r\n\t\t0%{\r\n\t\t\tmax-width: 64px;\r\n\t\t}\r\n\t\t50%{\r\n\t\t\tmax-width: 64px;\r\n\t\t}\r\n\t\t100%{\r\n\t\t\tleft: 50%;\r\n\t\t}\r\n\t}\r\n\r\n\t.uiHolderSysTop{\r\n\t\twidth: 600px;\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%);\r\n\t\t/*border: 3px #0999 dotted;*/\r\n\t\ttransition: height 1s;\r\n\t}\r\n\t.uiIcon{\r\n\t\tfloat: left;\r\n\t\twidth: 32px;\r\n\t\theight: 32px;\r\n\t\tbackground-repeat: no-repeat;\r\n\t    background-size:32px;\r\n\t    background-position: center center;\r\n\t\tbackground-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z\"/></svg>');\r\n\t}\r\n\t.uiIconWarning{\r\n\t\tbackground-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\"/></svg>') !important;\r\n\t}\r\n\t.uiIconError{\r\n\t\tbackground-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z\"/></svg>') !important;\r\n\t}\r\n\t.uiIconNet{\r\n\t\tbackground-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M23.64 7c-.45-.34-4.93-4-11.64-4-1.5 0-2.89.19-4.15.48L18.18 13.8 23.64 7zm-6.6 8.22L3.27 1.44 2 2.72l2.05 2.06C1.91 5.76.59 6.82.36 7l11.63 14.49.01.01.01-.01 3.9-4.86 3.32 3.32 1.27-1.27-3.46-3.46z\"/></svg>') !important;\r\n\t}\r\n\t.uiIconPerson{\r\n\t\tbackground-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"/></svg>') !important;\r\n\t\t\r\n\t}\r\n\t.uiIconTime{\r\n\t\tbackground-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z\"/></svg>') !important;\r\n\t}\r\n\r\n\t.uiIconSuccess{\r\n\t\tbackground-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\"/></svg>') !important;\r\n\t}\r\n\t\r\n\t.uiCloseButton{\r\n\t\tposition: absolute;\r\n\t\tright: 0;\r\n\t\twidth: 24px;\r\n\t\theight: 24px;\r\n\t\tbackground-repeat: no-repeat;\r\n\t    background-size:16px;\r\n\t    background-position: center center;\r\n\t\tbackground-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/></svg>');\r\n\t\t\r\n\t}\r\n\r\n\t.uiCursorMessage{\r\n\t\tmin-width: 64px;\r\n\t\theight: 64px;\r\n\t\tborder: 5px solid white;\r\n\t\tbackground-color: #FBAB7E;\r\n\t\tbackground-image: linear-gradient(270deg, #FBAB7E 0%, #F7CE68 100%);\r\n\r\n\t\tcolor: white;\r\n\t\tfont-size: 24px;\r\n\t\tfont-weight: bold;\r\n\t\tfont-stretch: ultra-condensed;\r\n\t\ttransform: translate(-50%,-50%);\r\n\t\tanimation: uiWobble 0.3s;\r\n\t\tborder-radius: 32px;\r\n\t\tbox-sizing: border-box;\r\n\t\tposition: absolute;\r\n\t\tline-height: 48px;\r\n\t\tpadding: 0 8px 0 8px;\r\n\t\tfont-family: sans-serif;\r\n\t}\r\n\r\n\t@keyframes uiWobble{\r\n\t\t0%{\r\n\t\t\ttransform: translate(-50%,-50%) scale(0.6,0.4);\r\n\t\t}\r\n\t\t33%{\r\n\t\t\ttransform: translate(-50%,-50%) scale(0.9,1.15);\r\n\t\t}\r\n\t\t66%{\r\n\t\t\ttransform: translate(-50%,-50%) scale(0.8,0.9);\r\n\t\t}\r\n\t\t100%{\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t@keyframes uiFade{\r\n\t\t0%{\r\n\t\t\topacity: 1;\r\n\t\t\ttransform: translate(-50%,-50%);\r\n\t\t}\r\n\t\t100%{\r\n\t\t\topacity: 0;\r\n\t\t\ttransform: translate(-50%,0%)\r\n\t\t}\r\n\t}\r\n\r\n\t`\r\n\tdocument.body.appendChild(sheet);\r\n}\r\n\r\n\n\n//# sourceURL=webpack://buup/./src/UI.js?");

/***/ }),

/***/ "?98fa":
/*!********************!*\
  !*** ws (ignored) ***!
  \********************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements:  */
/***/ (() => {

eval("/* (ignored) */\n\n//# sourceURL=webpack://buup/ws_(ignored)?");

/***/ })

},
0,[["./src/Main.js","runtime","vendors","libs"]]]);