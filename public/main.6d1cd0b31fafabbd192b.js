(self.webpackChunkbuup=self.webpackChunkbuup||[]).push([[179],{6426:(e,t,n)=>{"use strict";n.d(t,{a:()=>Qe});var i={};n.r(i),n.d(i,{mS:()=>Te,n6:()=>Ce,UX:()=>Le,T7:()=>Ie,S1:()=>Ee,u7:()=>ke,hM:()=>ye,gw:()=>Ae,ob:()=>Ne,Y:()=>Pe});var o=n(6642);function a(e){var t=e.toString(16);return 1==t.length?"0"+t:t}var r=[],s=[],l=[];var d,c=2;function u(e,t,n){l[e][t]=n,function(){M=6,h();for(let t=0;t<l.length;t++)for(let n=0;n<l.length;n++){let i=l[t][n],o=Math.floor(z(1,4)),a=Math.floor(z(1,6));if(1!=i){let o,r,s,d,c,u;o=t>0?l[t-1][n]:0,r=t<l.length-1?l[t+1][n]:0,n<l.length-1?(s=t>0?l[t-1][n+1]:0,d=l[t][n+1]):(s=0,d=0),n>0?(c=l[t][n-1],u=t<l.length-1?l[t+1][n-1]:0):(c=0,u=0),o=o==i,r=r==i,d=d==i,u=u==i,c=c==i,s=s==i;let h=(s?"1":"0")+(o?"1":"0")+(c?"1":"0")+(u?"1":"0")+(r?"1":"0")+(d?"1":"0"),m=-1,f=0,g=[],v=5;[s,d,r,u,c,o].forEach(((e,t)=>{e?(g.push(t),-1==m&&(m=t),f=t):v=t})),console.log("grid %i %i %s branches %i",t,n,h,g.length);let w="N",y="";if(6==g.length)p(i,"H"+y,t,n,Math.floor(a));else if(g.length>0){let o=[];var e=g[0];for(let t=1;t<g.length;t++)o.push(g[t]-e-1),e=g[t];console.log(o);let a=-1==m?0:m;switch(g.length){case 1:w="E",a+=0;break;case 2:w="P",0==o[0]?(y="3",a+=0):1==o[0]?(y="2",a+=0):2==o[0]?(y="1",a+=0):3==o[0]?(y="2",a+=4):(y="3",a+=5);break;case 3:w="T",0==o[0]?0==o[1]?(y=1,a+=0):3==o[1]?(y=1,a+=5):1==o[1]?(y=3,a+=3):2==o[1]&&(y=2,a+=4):1==o[0]?0==o[1]?y=2:1==o[1]?y=4:2==o[1]&&(y=3,a+=2):2==o[0]?0==o[1]?(y=3,a+=0):1==o[1]&&(y=2,a+=3):(y=1,a+=4),a%=6;break;case 4:w="Q",0==o[0]?0==o[1]?0==o[2]?(y=1,a+=0):1==o[2]?(y=3,a+=2):2==o[2]&&(y=1,a+=5):1==o[1]?0==o[2]?(y=2,a+=4):1==o[2]&&(y=3,a+=1):(y=1,a+=4):1==o[0]?0==o[1]?0==o[2]?(y=3,a+=4):y=2:y=3:(y=1,a+=3),a%=6;break;case 5:w="F",a=v+1}p(i,w+y,t,n,a)}else p(i,"N",t,n,0)}else 1==i&&p(i,"O"+o,t,n,Math.floor(a))}}()}function p(e,t,n,i,o){let a=8*Math.sqrt(3)/2,l="Grass_";3==e?l="Mount_":4==e?l="Tree_":0==e&&(l="Water_");let d=r[l+t].clone();d.position.set(n*a*2-48+i*a,8*i*1.5,-1.6),o&&(o=6-o,d.rotation.z=o*Math.PI/3),s.push(d),Te(d)}function h(){s.forEach((e=>{Ae(e)})),s=[]}function m(){h();for(let e=0;e<32;e++){l[e]=[];for(let t=0;t<32;t++)l[e][t]=1}}function f(e,t){let n=8*Math.sqrt(3)/2,i=Math.floor((8+t)/12),o=Math.floor((e+48+8-i*n)/(2*n));return d.position.set(o*n*2-48+i*n,8*i*1.5,.8),[o,i]}let g={x:0,y:0};var v,w,y,x,b,_,M=6;function z(e,t){return(t=t||0)+(M=(9301*M+49297)%233280)/233280*((e=e||1)-t)}var E=1024;Math.PI;let k=20,S=-.04;function L(e){let t;1==e?(t=450,w.shadow.camera.far=600,w.shadow.mapSize.width=512,w.shadow.mapSize.height=512):(t=150,w.shadow.mapSize.width=E,w.shadow.mapSize.height=E,w.shadow.camera.far=300),w.shadow.camera.left=-t,w.shadow.camera.right=t,w.shadow.camera.top=t,w.shadow.camera.bottom=-t,w.shadow.map&&(w.shadow.map.dispose(),w.shadow.map=null),v&&setTimeout((function(){v.update()}),1e3)}var T,C=n(9335),A=!1;var I=!1,P=0,H=0,N=0,B=0,R=!1;function F(e){J(e.clientX,e.clientY)}function q(e){return 1===e.which&&(I=!0,!0)}function W(e){if(2===e.which)return!1;I=!1,G()}function D(e){return I=!0,P=e.touches[0].clientX,H=e.touches[0].clientY,!0}function Y(e){I&&(j||T.isControl()),I=!1,X&&(document.querySelector(".bubbleSelector").style.visibility="hidden",X=!1),G()}function V(e){J(e.touches[0].clientX,e.touches[0].clientY)}var j,O=[],U=-1,X=!1;function K(e){return e.preventDefault(),!1}function G(){if(j){j=void 0,document.querySelectorAll(".bubble").forEach((e=>{e.style.visibility="hidden"}));let e=document.querySelector(".overtext");e&&(e.style.visibility="hidden"),U>=0&&O[U](N,B,0),function(e){R=e;let t=document.querySelectorAll(".menuHidable");t.length&&t.forEach((t=>{t.style.visibility=e?"hidden":"visible"}))}(!1)}}function J(e,t){j?function(e,t){let n=e-j.x,i=t-j.y,o=Math.sqrt(n*n+i*i),a=function(e,t){let n=Math.atan2(e,-t);return n<0&&(n=2*Math.PI+n),n}(n,i),r=document.querySelectorAll(".bubble"),s=2*Math.PI/r.length,l=a/s+s/2,d=Math.floor(l);d>=r.length&&(d=0),o>100&&(d=-1);let c="";r.forEach(((e,t)=>{t==d?(e.style.border="solid blue 6px",c=e.getAttribute("value")):e.style.border=""})),Math.PI;let u=document.querySelector(".overtext");d>-1?(u.style.visibility="visible",u.style.left=e+"px",u.style.top=t+"px",u.innerHTML=c,u.style.transform=n>25?"translate(28px,-50%)":n<-25?"translate(calc(-28px - 100%),-50%)":"translate(-50%,calc(-28px - 100%))"):u.style.visibility="hidden",U=d}(e,t):(P=e,H=t)}function Z(e){if(R)return!1;13==e.which||192==e.which&&(window.pickTarget=i.pick(),window.pickTarget&&console.log("picked a "+window.pickTarget.type))}var Q,$,ee,te=n(4279),ne=0;var ie=[],oe=[],ae=[];function re(e,t,n,i){let o=new te.Body({mass:n}),a=new te.Box(new te.Vec3(t.x,t.y,t.z));o.addShape(a),o.position.set(i.x,i.y,i.z),o.id=e,ie.push(e),oe[e]=o,Q.push(o),$.addBody(o);let r=Ie(2*t.x,2*t.y,2*t.z,i.x,i.y,i.z);Te(r),ae[e]=r}var se,le,de,ce,ue,pe,he,me,fe,ge,ve,we,ye,xe,be,_e=n(145),Me=n(3038),ze=(n(5857),n(9596));function Ee(){var e;(se=new o.cPb(45,window.innerWidth/window.innerHeight,1,5e3)).position.z=200,se.position.y=-200,se.up=new o.Pa4(0,0,1),se.lookAt(new o.Pa4(0,0,0)),de=new o.xsS,He=de,(ge=document.createElement("div")).classList.add("canvasHolder"),(le=new o.CP7({antialias:!0,alpha:!0})).shadowMap.enabled=!0,le.shadowMap.type=o.ntZ,le.toneMapping=o.LY2,le.outputEncoding=o.knz,le.setClearColor(16744242,1),ge.appendChild(le.domElement),me=new _e.E,e=o.rDY.merge([o.Vj0.standard.uniforms]),new o.jyz({uniforms:e,derivatives:!1,lights:!0,vertexColors:!0,vertexShader:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n    varying vec3 vNormal;\n    #ifdef USE_TANGENT\n        varying vec3 vTangent;\n        varying vec3 vBitangent;\n    #endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nuniform vec3 shirt;\nuniform vec3 wind;\n\nvoid main() {\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #ifdef USE_COLOR\n        if(color==vec3(0,0,1))\n            vColor.xyz = shirt;\n        else\n            vColor.xyz = color.xyz;\n        \n    #endif\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    #include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n    vNormal = normalize( transformedNormal );\n    #ifdef USE_TANGENT\n        vTangent = normalize( transformedTangent );\n        vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n    #endif\n#endif\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <displacementmap_vertex>\n\n    \n        if(color==vec3(1,0,0)){\n            float val=max(0.0, 1.0976 - transformed.z);\n            transformed.xyz+=val*wind;\n            transformed.y*=1.0+sin((wind.z+transformed.z)*4.0)/2.0;\n\n        }\n    \n\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    vViewPosition = - mvPosition.xyz;\n    #include <worldpos_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>\n}",fragmentShader:"\n    #define STANDARD\n#ifdef PHYSICAL\n    #define REFLECTIVITY\n    #define CLEARCOAT\n    #define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n    uniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n    uniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n    uniform float clearcoat;\n    uniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n    uniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n    varying vec3 vNormal;\n    #ifdef USE_TANGENT\n        varying vec3 vTangent;\n        varying vec3 vBitangent;\n    #endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n    #include <clipping_planes_fragment>\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <roughnessmap_fragment>\n    #include <metalnessmap_fragment>\n    #include <normal_fragment_begin>\n    #include <normal_fragment_maps>\n    #include <clearcoat_normal_fragment_begin>\n    #include <clearcoat_normal_fragment_maps>\n    #include <emissivemap_fragment>\n    #include <lights_physical_fragment>\n    #include <lights_fragment_begin>\n    #include <lights_fragment_maps>\n    #include <lights_fragment_end>\n    #include <aomap_fragment>\n    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n    #ifdef TRANSPARENCY\n        diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n    #endif\n    gl_FragColor = vec4( outgoingLight,1.-(((0.2125 * outgoingLight.r) + (0.7154 * outgoingLight.g) + (0.0721 * outgoingLight.b)) ) );\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}",roughness:0,metalness:1}),He=de,ue=se,window.screen.width>window.innerWidth?(pe=window.innerWidth,he=window.innerHeight):(pe=window.screen.width,he=window.screen.height),se.aspect=pe/he,se.updateProjectionMatrix(),le.setPixelRatio(.5),le.setSize(pe,he),ve=new Me.x(le);let t=new ze.G(de,se,300,200);t.kernelRadius=6,t.minDistance=15e-5,t.maxDistance=.001,ve.addPass(t),window.ssao=t,new o.vBJ({color:7722446}),new o.Wid({color:2156703,metalness:0,roughness:1}),new o.Wid({color:2156703,metalness:0,roughness:1}),new o.Wid({color:5534117,metalness:0,roughness:1});let n=new o.Wid({color:15398690,metalness:0,roughness:1});we=new o.Wid({color:13576926,metalness:0,roughness:1}),new o.Wid({color:11930379,metalness:0,roughness:1}),new o.Wid({color:15398690,metalness:0,roughness:1}),ce=new o.ZAu,ye=new o.ZAu;let i=new o.vBJ({color:16777215,side:o.Wl3}),a=new o.vBJ({color:3282968,side:o.Wl3}),r=Ie(1,1,2,0,0,0,n),s=Ie(1,.2,1,0,.5,.5,i),l=Ie(.3,.2,.3,0,.6,.5,a);ye.add(r),ye.add(s),ye.add(l),ce.add(ye);let d=Ie(.5,.5,1.5,.75,0,20,new o.vBJ({color:14035807}));return ce.add(d),de.add(ce),function(){let e=new o.zf8(6,16);be=new o.vBJ({color:4907322}),new o.vBJ({color:15461888}),(xe=new o.Kj0(e,be)).position.z=.05,de.add(xe)}(),new o.Pa4(1,0,0),b=new o.Pa4(0,0,0),Ce(_=new o.Mig(9408399)),(w=new o.Ox3(14702423,.5)).position.set(0,250,0),w.castShadow=!0,Ce(w),(x=new o.Tme).position.set(20,0,20),Ce(x),w.target=x,w.shadow.mapSize.width=E,w.shadow.mapSize.height=E,w.shadow.camera.near=1,L(0),w.shadow.radius=2.2,w.shadow.bias=-5e-4,(y=w.clone()).shadow.mapSize.width=256,y.shadow.mapSize.height=256,y.shadow.radius=0,y.visible=!1,Ce(y),window.sunLight=w,v?v.visible=!0:Te(v=new o.Rki(w.shadow.camera)),function(e,t,n,i){!function(e,t){(T=new C.z(t,e)).mouseButtons={LEFT:void 0,MIDDLE:o.RsA.ROTATE,RIGHT:o.RsA.PAN},T.touches={ONE:o.QmN.PAN,TWO:o.QmN.DOLLY_ROTATE},T.maxPolarAngle=1.3,T.isControl(),T.addEventListener("change",(function(e){var t;T.target.distanceTo(T.object.position)>75?2!=A&&(A=2,L(1)):1!=A&&(A=1,L(0)),t=T.target,b.set(t.x,t.y,t.z),w.position.x=t.x,w.position.y=t.y,x.position.x=t.x}))}(t,n)}(0,ge,se),setTimeout((function(){Se()}),1),ge}function ke(e,t,n,i){me.load("./"+e,(e=>{let a;if(e.scene.rotation.x=Math.PI/2,e.scene.traverse((function(e){e instanceof o.Kj0&&(a=e,n||(e.material=i?new o.Wid({color:i,metalness:0,roughness:1}):new o.Wid({vertexColors:o.jSK,metalness:0,roughness:1}),e.material.needsUpdate=!0))})),e.scene.children[0],a){var r=e.animations;if(r&&r.length){fe=new o.Xcj(a);for(var s=0;s<r.length;s++){var l=r[s];action=fe.clipAction(l),action.timeScale=.002,action.play()}}}t(e.scene)}),(e=>{console.log(e.loaded/e.total*100+"% loaded")}),(e=>{console.error("An error happened",e)}))}function Se(e){(function(){$.step(.01);for(var e=0;e!==Q.length;e++){if(null!=Q[e].id){let t=ae[Q[e].id];t.position.copy(Q[e].position),t.quaternion.copy(Q[e].quaternion)}Q[e].position.z<-100&&(Q[e].position.set(80*Math.random()-40,80*Math.random()-40,100),Q[e].velocity.set(0,0,0),Q[e].collisionResponse=!1,Q[e].sleep())}let t=T.object.rotation.z,n=ee.velocity.length();Qe.left?(n<2&&(ee.velocity.x-=2*Math.cos(t),ee.velocity.y-=2*Math.sin(t)),ne=t+Math.PI/2,ee.quaternion.setFromAxisAngle(new te.Vec3(0,0,1),ne)):Qe.right?(n<2&&(ee.velocity.x+=2*Math.cos(t),ee.velocity.y+=2*Math.sin(t)),ne=t-Math.PI/2,ee.quaternion.setFromAxisAngle(new te.Vec3(0,0,1),ne)):Qe.up?(n<2&&(ee.velocity.x-=2*Math.sin(t),ee.velocity.y+=2*Math.cos(t)),ne=t,ee.quaternion.setFromAxisAngle(new te.Vec3(0,0,1),ne)):Qe.down&&(n<2&&(ee.velocity.x+=2*Math.sin(t),ee.velocity.y-=2*Math.cos(t)),ne=t+Math.PI,ee.quaternion.setFromAxisAngle(new te.Vec3(0,0,1),ne)),ye.position.copy(ee.position),ye.quaternion.copy(ee.quaternion)})(),ce.rotation.z>Math.PI/16||(ce.rotation.z,Math.PI),function(){var e=new o.Pa4;e.set(P/window.innerWidth*2-1,-H/window.innerHeight*2+1,.5),e.unproject(se);var t=e.sub(se.position).normalize(),n=-se.position.z/t.z,i=se.position.clone().add(t.multiplyScalar(n));xe.position.x=i.x,xe.position.y=i.y,xe.position.z=8,function(e){N=e.x,B=e.y,e.z,I?function(e,t){let[n,i]=f(e,t),o=l.length;(n!=g.x||i!=g.y)&&n>-1&&i>-1&&n<o&&i<o&&(u(n,i,c),g.x=n,g.y=i)}(N,B):f(N,B)}(xe.position)}(),k+=S,k<0?(k=0,S=-S):k>40&&(k=40,S=-S),k>10&&(w.color.setHex(16777215),_.color.setHex(6316128),Ne(11594237,1)),w.position.z=200+4*k,x.position.y=b.y-4*k,le.render(He,ue),requestAnimationFrame(Se)}function Le(e,t){le.setSize(256,256),le.setClearColor(16777215,0),e&&t?le.render(e,t):le.render(getScene(),se);let n=le.domElement.toDataURL();return le.setSize(pe,he),n}function Te(e){ce.add(e)}function Ce(e){de.add(e)}function Ae(e){ce.remove(e)}function Ie(e,t,n,i,a,r,s){let l=new o.nvb(e,t,n);s||(s=we);let d=new o.Kj0(l,s);return d.castShadow=!0,d.position.x=i||0,d.position.y=a||0,d.position.z=r||0,d}function Pe(e,t){t&&e?(ue=t,He=e):(He=de,ue=se)}var He=0;function Ne(e,t){le.setClearColor(e,t)}var Be,Re,Fe,qe=n(6809),We=!1;var De=!0;let Ye,Ve,je;var Oe,Ue,Xe,Ke,Ge,Je,Ze,Qe,$e=!1,et=1,tt=0,nt=void 0,it={x:0,y:0};function ot(e){Ke&&(Ke.classList.remove("appMax"),Ke.style.zIndex=2,Ke.focused=void 0)}function at(){clearTimeout(Je),Je=setTimeout((function(){ct(),function(e,t,n){let i=document.createElement("div");i.className="uiSysTop";let o=document.createElement("div"),a=" ";if("object"==typeof t&&null!==t)t.type&&(a+=t.type),t.color&&(i.style.backgroundColor=t.color);else switch(t){case"warn":a+="uiIconWarning",i.style.backgroundColor="#EFEF79";break;case"error":a+="uiIconError",i.style.backgroundColor="#D25E5E";break;case"net":a+="uiIconNet",i.style.backgroundColor="#FFC65E";break;case"person":a+="uiIconPerson",i.style.backgroundColor="#D257FF";break;case"time":a+="uiIconTime",i.style.backgroundColor="#5094D9";break;case"success":a+="uiIconSuccess",i.style.backgroundColor="#95F17F"}o.className="uiIcon"+a;let r=document.createElement("span");function s(){i.style.animation=n?"0.5s uiSysMini forwards":"0.5s uiSysFold forwards",setTimeout((function(){n?(i.style.position="absolute",i.style.left="-64px",i.addEventListener("click",(function(e){i.style.animation="0.5s uiSysMax forwards",setTimeout((function(){i.style.animation="0.5s uiSysMini forwards"}),3500)}))):i.remove()}),500)}if(r.innerText=e,r.addEventListener("click",(function(e){!function(e){je.value=e.innerText,je.style.display="block",je.select(),document.execCommand("copy"),je.blur(),je.style.display="none"}(r),function(e,t,n){let i=document.createElement("div");i.className="uiCursorMessage",i.style.left=e+"px",i.style.top=t+"px",i.innerText="Copied",Ye.appendChild(i),setTimeout((function(){i.style.animation="1s uiFade forwards",setTimeout((function(){i.remove()}),1e3)}),1500)}(e.clientX,e.clientY)})),i.appendChild(o),i.appendChild(r),!n){let e=document.createElement("div");e.className="uiCloseButton",i.appendChild(e),e.addEventListener("click",(function(e){s()}))}setTimeout((function(){s()}),3500),Ve.appendChild(i)}("inner "+window.innerWidth+"; screen "+window.screen.width,"success")}),250)}function rt(e){let t=0,n=[],i=0==et||2==et;e?(t=Oe.length,n=Oe):Oe.forEach((e=>{-1!=e.spot&&(n.push(e),t++)})),i?(Ue.style.height=64*(t>0?t:1)+"px",Ue.style.width="64px"):(Ue.style.width=64*(t>0?t:1)+"px",Ue.style.height="64px");let o=Ue.getBoundingClientRect();Xe=o;let a,r=o.width,s=o.height;a=i?s/t:r/t,e||(i?n.sort((function(e,t){return parseInt(e.style.top)-parseInt(t.style.top)})):n.sort((function(e,t){return parseInt(e.style.left)-parseInt(t.style.left)})));for(let u=0;u<t;u++)Ge[u]=i?{x:o.left+r/2,y:32+o.top+u*a}:{x:32+o.left+u*a,y:o.top+s/2},nt&&nt==n[u]&&(it=Ge[u]),e&&(Oe[u].spot=u,Ge[u].app=n[u]),l=n[u],d=Ge[u].x,c=Ge[u].y,void 0||(l.pos={x:d,y:c}),l.style.left=d+"px",l.style.top=c+"px";var l,d,c;let u=barHandle.getBoundingClientRect();if(i){let e=u.left+u.width/2;lt({x:e,y:u.top},{x:e,y:u.bottom})}else{let e=u.top+u.height/2;lt({x:u.left,y:e},{x:u.right,y:e})}}function st(){requestAnimationFrame(st)}function lt(e,t){e.x,e.y,t.x,t.y}function dt(e){if(function(e){if($e){tt++;let t=e.clientX,n=e.clientY,i=t-window.innerWidth/2,o=n-window.innerHeight/2,a=Math.atan2(o,i)/Math.PI,r=Math.abs(a);r<.25?2!=et&&(et=2,ct()):r<.75?a<0?3!=et&&(et=3,ct()):1!=et&&(et=1,ct()):0!=et&&(et=0,ct())}}(e),nt){if(tt++,nt.pos={x:e.clientX+nt.offset.x,y:e.clientY+nt.offset.y},e.clientY>Xe.top&&e.clientY<Xe.bottom&&e.clientX>Xe.left&&e.clientX<Xe.right){let e=it,t={x:e.x-nt.pos.x,y:e.y-nt.pos.y};nt.pos={x:e.x-t.x/3,y:e.y-t.y/3},nt.moving&&(nt.moving=void 0,nt.spot=0,rt())}else nt.moving||(nt.moving=!0,nt.spot=-1,rt());nt.style.left=nt.pos.x+"px",nt.style.top=nt.pos.y+"px"}}function ct(){2==et?(Ue.style.left=window.innerWidth-64+"px",Ue.style.top="50%",rt(),barHandle.style.transform="translate(-200%,-50%)",barHandle.style.width="32px",barHandle.style.height="80%"):3==et?(barHandle.style.transform="translate(-50%,100%)",Ue.style.left="50%",Ue.style.top="64px",rt(),barHandle.style.height="32px",barHandle.style.width="80%"):1==et?(barHandle.style.transform="translate(-50%,-200%)",Ue.style.left="50%",Ue.style.top=window.innerHeight-64+"px",rt(),barHandle.style.height="32px",barHandle.style.width="80%"):(barHandle.style.transform="translate(100%,-50%)",Ue.style.left="64px",Ue.style.top="50%",rt(),barHandle.style.width="32px",barHandle.style.height="80%")}function ut(e){$e&&($e=!1,console.log(tt),tt<10&&ot()),nt?(nt.classList.remove("appMove"),console.log(tt),tt<10?Ke&&Ke==nt?(nt.classList.remove("appMax"),nt.focused=void 0,Ke=void 0,nt.style.zIndex=2,window.history.pushState({},"","/")):(ot(),function(e){let t=Oe[e];t&&(t.classList.add("appMax"),t.focused=!0,t.style.zIndex=0,Ke=t)}(nt.appId),window.history.pushState({appId:nt.appId},nt.name,"?id="+nt.appId+"&app="+nt.id)):(rt(),console.log("fix bar also"))):(rt(),console.log("fix bar")),nt=void 0,tt=0}!function(){Ze=document.querySelector("#main"),Qe={},function(e){var t;(t=document.createElement("style")).innerHTML='\n\t\t.uiSysTop{\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tposition: relative;\n\t\tmax-width: 600px;\n\t\theight: 64px;\n\t\tborder-radius: 32px;\n\t\ttransform: translate(-50%);\n\t\tbox-shadow: 3px 3px 3px #0005;\n\t\tleft: 50%;\n\t\tbackground: #E0F9D5;\n\t\tmargin: 12px;\n\t\tanimation: uiSysUnfold 1s;\n\t\toverflow: hidden;\n\t\tline-height: 16px;\n\t}\n\t.uiSysTop div{\n\n\t\tmargin: 16px;\n\t\tmargin-left: 0px;\n\t\tflex: 0 0 64px;\n\t}\n\t.uiSysTop span{\n\t\tmargin-right: 48px;\n\t\tmargin-top: 8px;\n\t\tline-height: normal;\n\t\tvertical-align: middle;\n\t\tflex: 1;\n\n\t}\n\t@keyframes uiSysUnfold{\n\t\t0%{\n\t\t\tmax-width: 64px;\n\t\t\ttop: -64px;\n\t\t\topacity: 0.2;\n\t\t}\n\t\t50%{\n\t\t\tmax-width: 64px;\n\t\t\ttop:0px;\n\t\t\topacity: 1;\n\t\t}\n\t\t100%{\n\t\t\ttop: 0px;\n\t\t}\n\t}\n\t@keyframes uiSysFold{\n\t\t100%{\n\t\t\tmax-width: 64px;\n\t\t\ttop: -64px;\n\t\t\topacity: 0.2;\n\t\t\theight: 0;\n\t\t}\n\t\t50%{\n\t\t\tmax-width: 64px;\n\t\t\ttop:0px;\n\t\t\topacity: 1;\n\t\t}\n\t\t0%{\n\t\t\ttop: 0px;\n\n\t\t}\n\t}\n\t@keyframes uiSysMini{\n\t\t100%{\n\t\t\tmax-width: 64px;\n\t\t}\n\t\t50%{\n\t\t\tmax-width: 64px;\n\n\t\t}\n\t\t0%{\n\t\t\t\n\t\t}\n\t}\n\t@keyframes uiSysMax{\n\t\t0%{\n\t\t\tmax-width: 64px;\n\t\t}\n\t\t50%{\n\t\t\tmax-width: 64px;\n\t\t}\n\t\t100%{\n\t\t\tleft: 50%;\n\t\t}\n\t}\n\n\t.uiHolderSysTop{\n\t\twidth: 600px;\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%);\n\t\t/*border: 3px #0999 dotted;*/\n\t\ttransition: height 1s;\n\t}\n\t.uiIcon{\n\t\tfloat: left;\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tbackground-repeat: no-repeat;\n\t    background-size:32px;\n\t    background-position: center center;\n\t\tbackground-image: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z"/></svg>\');\n\t}\n\t.uiIconWarning{\n\t\tbackground-image: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg>\') !important;\n\t}\n\t.uiIconError{\n\t\tbackground-image: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>\') !important;\n\t}\n\t.uiIconNet{\n\t\tbackground-image: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M23.64 7c-.45-.34-4.93-4-11.64-4-1.5 0-2.89.19-4.15.48L18.18 13.8 23.64 7zm-6.6 8.22L3.27 1.44 2 2.72l2.05 2.06C1.91 5.76.59 6.82.36 7l11.63 14.49.01.01.01-.01 3.9-4.86 3.32 3.32 1.27-1.27-3.46-3.46z"/></svg>\') !important;\n\t}\n\t.uiIconPerson{\n\t\tbackground-image: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>\') !important;\n\t\t\n\t}\n\t.uiIconTime{\n\t\tbackground-image: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/></svg>\') !important;\n\t}\n\n\t.uiIconSuccess{\n\t\tbackground-image: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/></svg>\') !important;\n\t}\n\t\n\t.uiCloseButton{\n\t\tposition: absolute;\n\t\tright: 0;\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tbackground-repeat: no-repeat;\n\t    background-size:16px;\n\t    background-position: center center;\n\t\tbackground-image: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>\');\n\t\t\n\t}\n\n\t.uiCursorMessage{\n\t\tmin-width: 64px;\n\t\theight: 64px;\n\t\tborder: 5px solid white;\n\t\tbackground-color: #FBAB7E;\n\t\tbackground-image: linear-gradient(270deg, #FBAB7E 0%, #F7CE68 100%);\n\n\t\tcolor: white;\n\t\tfont-size: 24px;\n\t\tfont-weight: bold;\n\t\tfont-stretch: ultra-condensed;\n\t\ttransform: translate(-50%,-50%);\n\t\tanimation: uiWobble 0.3s;\n\t\tborder-radius: 32px;\n\t\tbox-sizing: border-box;\n\t\tposition: absolute;\n\t\tline-height: 48px;\n\t\tpadding: 0 8px 0 8px;\n\t\tfont-family: sans-serif;\n\t}\n\n\t@keyframes uiWobble{\n\t\t0%{\n\t\t\ttransform: translate(-50%,-50%) scale(0.6,0.4);\n\t\t}\n\t\t33%{\n\t\t\ttransform: translate(-50%,-50%) scale(0.9,1.15);\n\t\t}\n\t\t66%{\n\t\t\ttransform: translate(-50%,-50%) scale(0.8,0.9);\n\t\t}\n\t\t100%{\n\n\t\t}\n\t}\n\n\t@keyframes uiFade{\n\t\t0%{\n\t\t\topacity: 1;\n\t\t\ttransform: translate(-50%,-50%);\n\t\t}\n\t\t100%{\n\t\t\topacity: 0;\n\t\t\ttransform: translate(-50%,0%)\n\t\t}\n\t}\n\n\t',document.body.appendChild(t),e?Ye=e:(Ye=document.querySelector("#main"),Ye||(Ye=document.body)),Ye?(Ve=document.createElement("duv"),Ve.className="uiHolderSysTop",Ye.appendChild(Ve),je=document.createElement("input"),je.type="text",je.style.position="fixed",je.taxindex="-1",je.style.display="none",je.style.pointerEvents="none",Ye.appendChild(je)):console.error("UI.js:: uh oh! no system dom element found")}(Ze),function(){Q=[],($=new te.World).quatNormalizeSkip=0,$.quatNormalizeFast=!1,$.broadphase=new te.NaiveBroadphase;let e=new te.Box(new te.Vec3(1,1,2));for(let t=0;t<1;t++){let t=new te.Body({mass:4});t.addShape(e),t.position.set(0,0,60),$.addBody(t),ee=t,window.playerBody=ee}new te.Material({name:"gooProperty",friction:10,restitution:-1}).name="gooProperty",new te.Material({name:"wallProperty",friction:.1,restitution:1}).name="wallProperty",function(){let e=new te.Plane,t=new te.Body({mass:0});t.addShape(e),$.addBody(t)}()}(),window.addEventListener("keydown",(e=>{switch(console.log(e.keyCode),e.keyCode){case 37:case 65:Qe.left=!0;break;case 39:case 68:Qe.right=!0;break;case 38:case 87:Qe.up=!0;break;case 40:case 83:Qe.down=!0;break;case 32:make();break;case 66:for(let e=0;e<12;e++)make();break;case 69:c=2==c?3:3==c?4:4==c?0:0==c?1:2;break;case 71:makeMan();break;case 81:De?Pe(Re,Fe):Pe(),De=!De;break;case 82:Be.emit("physReset");break;case 84:break;case 89:Be.emit("physMake",{x:.5,y:.5,z:.5},2,{x:0,y:0,z:30});break;case 8:c=1}})),window.addEventListener("keyup",(e=>{switch(e.keyCode){case 37:case 65:Qe.left=!1;break;case 39:case 68:Qe.right=!1;break;case 38:case 87:Qe.up=!1;break;case 40:case 83:Qe.down=!1}}));let e=Ee();Ze.appendChild(e),ke("./assets/models/Hex.glb",(e=>{console.log("got children "+e.children.length);let t=new o.Wid({vertexColors:o.jSK,metalness:0,roughness:1});for(let o=0;o<e.children.length;o++){let l=e.children[o];l.position.set(0,0,60),l.scale.set(8,8,8),l.material=t,l.receiveShadow=!0,(l.name.startsWith("Mount")||l.name.startsWith("Tree"))&&(l.castShadow=!0),r[l.name]=l;let d=[];if(l.geometry){let e=l.geometry.attributes.color.array.length/4;for(let t=0;t<e;t++){let e=4*t,o=(n=l.geometry.attributes.color.array[0+e],i=l.geometry.attributes.color.array[1+e],s=l.geometry.attributes.color.array[2+e],function(e,t,n){return"#"+a(e)+a(t)+a(n)}(n=Math.floor(256*n),i=Math.floor(256*i),s=Math.floor(256*s)));d[o]=o}console.log(d)}}var n,i,s;m(),window.hex=r,window.place=u,window.land=p,window.clearLand=m})),function(){let e=new o.vBJ({color:4907322}),t=new o.ZAu,n=new o.BKK(.6,8),i=new o.Kj0(n,e);i.position.set(8,0,0),t.add(i);for(let e=0;e<6;e++){let n=i.clone();n.rotation.z=e*Math.PI/3,n.position.set(8*Math.cos(n.rotation.z),8*Math.sin(n.rotation.z),0),t.add(n)}t.position.z+=6,Te(t),d=t}(),function(){let e=8*Math.sqrt(3)/2;var t=new o.ZXM;for(let n=0;n<32;n++)for(let i=0;i<32;i++)t.vertices.push(new o.Pa4(-48+e+n*e*2+i*e,8*i*1.5-4,.8)),t.vertices.push(new o.Pa4(-48+e+n*e*2+i*e,4+8*i*1.5,.8)),t.vertices.push(new o.Pa4(-48+e+n*e*2+i*e,4+8*i*1.5,.8)),t.vertices.push(new o.Pa4(n*e*2-48+i*e,8+8*i*1.5,.8)),t.vertices.push(new o.Pa4(n*e*2-48+i*e,8+8*i*1.5,.8)),t.vertices.push(new o.Pa4(-48-e+n*e*2+i*e,4+8*i*1.5,.8));var n=new o.nls({color:16777215});Te(new o.ejS(t,n))}(),function(){let e=document.querySelector(".canvasHolder");e.addEventListener("mousemove",F),e.addEventListener("mousedown",q),e.addEventListener("mouseup",W),e.addEventListener("touchstart",D),e.addEventListener("touchend",Y),e.addEventListener("touchmove",V),window.addEventListener("contextmenu",K),window.addEventListener("keyup",Z)}(),function(){Re=new o.xsS,(Fe=new o.cPb(45,1,1,1e3)).position.z=200,Fe.position.y=-200,Fe.up=new o.Pa4(0,0,1),Fe.lookAt(new o.Pa4(0,0,0));var e=new o.Mig(9408399);Re.add(e)}(),(Be=qe("/dand-dev")).on("physUpdate",(function(e){We?(function(e){e.forEach((e=>{let t=oe[e[0]];t.position.copy(e[1]),t.quaternion.copy(e[2]),t.velocity.copy(e[3]),t.angularVelocity.copy(e[4])}))}(e),console.log("phys synced")):console.log("!!!phys IGNORED")})),Be.on("physInit",(function(e){ae.forEach((e=>{Ae(e)})),ae=[],Q.forEach((e=>{$.remove(e)})),Q=[],ie=[],oe=[],e.forEach((e=>{re(e[0],e[1],e[2],{x:0,y:0,z:0})})),We=!0})),Be.on("physMake",(function(e,t,n,i){re(e,t,n,i),console.log("made")})),Be.on("connect",(()=>{console.log("created a connection"),Be.emit("physInit")})),console.log("online code ran"),function(e){let t=document.querySelectorAll(".app");Oe=[],t.forEach((e=>{Oe.push(e)})),Oe.forEach(((e,t)=>{e.style.top=Math.random()*window.innerWidth+"px",e.style.left=Math.random()*window.innerHeight+"px",e.offset={x:0,y:0},e.appId=t,e.addEventListener("pointerdown",(t=>{!function(e,t){e.focused||(nt=e,e.pos={x:parseInt(e.style.left),y:parseInt(e.style.top)},it={x:e.pos.x,y:e.pos.y},e.offset={x:e.pos.x-t.clientX,y:e.pos.y-t.clientY},e.classList.add("appMove"),e.moving=void 0)}(e,t)})),e.addEventListener("dragstart",(e=>{e.preventDefault()}))})),window.addEventListener("pointerup",ut),window.addEventListener("resize",at),window.addEventListener("pointermove",dt),function(){Ue=document.querySelector("#bar");let e=document.querySelector("#barHandle");e.addEventListener("pointerdown",(e=>{$e=!0})),e.addEventListener("dragstart",(e=>{e.preventDefault()})),Ge=[],e.style.transform="translate(-50%,-200%)",Ue.style.left="50%",Ue.style.top=window.innerHeight-64+"px",rt(!0)}(),at(),st()}(),setTimeout((function(){let e=function(e,t,n){e.scale.set(75,75,75),e.position.set(0,0,-75),Re.add(e);let i=document.createElement("img");return i.className="hexPortrait",i.setAttribute("src",Le(Re,Fe)),Re.remove(e),i}(r.Tree_N.clone());document.querySelector(".hex").appendChild(e)}),1e3)}()},418:()=>{}},0,[[6426,666,216,977]]]);