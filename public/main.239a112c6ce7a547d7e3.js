(self.webpackChunkbuup=self.webpackChunkbuup||[]).push([[179],{6426:(t,e,n)=>{"use strict";n.d(e,{a:()=>ne});var i={};n.r(i),n.d(i,{mS:()=>Nt,n6:()=>Rt,UX:()=>Bt,T7:()=>qt,S1:()=>Pt,u7:()=>Ct,hM:()=>St,gw:()=>Wt,SI:()=>Ht,ob:()=>Vt,Y:()=>Dt});var o,a,r=n(6642);function s(t){var e=t.toString(16);return 1==e.length?"0"+e:e}var l=!0;function d(t,e,n){e?t.scale.set(e,e,e):t.scale.set(110,110,110),n?t.position.set(0,0,n):t.position.set(0,0,-30),o.add(t);let i=document.createElement("img");return i.className="hexPortrait",i.setAttribute("src",Bt(o,a)),o.remove(t),i}var c=[],p=[],u=[];var h,f=2;function m(t,e,n){u[t][e]=n,function(){k=6,v();for(let e=0;e<u.length;e++)for(let n=0;n<u.length;n++){let i=u[e][n],o=Math.floor(L(1,4)),a=Math.floor(L(1,6));if(1!=i){let o,r,s,l,d,c;o=e>0?u[e-1][n]:0,r=e<u.length-1?u[e+1][n]:0,n<u.length-1?(s=e>0?u[e-1][n+1]:0,l=u[e][n+1]):(s=0,l=0),n>0?(d=u[e][n-1],c=e<u.length-1?u[e+1][n-1]:0):(d=0,c=0),o=o==i,r=r==i,l=l==i,c=c==i,d=d==i,s=s==i;let p=(s?"1":"0")+(o?"1":"0")+(d?"1":"0")+(c?"1":"0")+(r?"1":"0")+(l?"1":"0"),h=-1,f=0,m=[],v=5;[s,l,r,c,d,o].forEach(((t,e)=>{t?(m.push(e),-1==h&&(h=e),f=e):v=e})),console.log("grid %i %i %s branches %i",e,n,p,m.length);let w="N",x="";if(6==m.length)g(i,"H"+x,e,n,Math.floor(a));else if(m.length>0){let o=[];var t=m[0];for(let e=1;e<m.length;e++)o.push(m[e]-t-1),t=m[e];console.log(o);let a=-1==h?0:h;switch(m.length){case 1:w="E",a+=0;break;case 2:w="P",0==o[0]?(x="3",a+=0):1==o[0]?(x="2",a+=0):2==o[0]?(x="1",a+=0):3==o[0]?(x="2",a+=4):(x="3",a+=5);break;case 3:w="T",0==o[0]?0==o[1]?(x=1,a+=0):3==o[1]?(x=1,a+=5):1==o[1]?(x=3,a+=3):2==o[1]&&(x=2,a+=4):1==o[0]?0==o[1]?x=2:1==o[1]?x=4:2==o[1]&&(x=3,a+=2):2==o[0]?0==o[1]?(x=3,a+=0):1==o[1]&&(x=2,a+=3):(x=1,a+=4),a%=6;break;case 4:w="Q",0==o[0]?0==o[1]?0==o[2]?(x=1,a+=0):1==o[2]?(x=3,a+=2):2==o[2]&&(x=1,a+=5):1==o[1]?0==o[2]?(x=2,a+=4):1==o[2]&&(x=3,a+=1):(x=1,a+=4):1==o[0]?0==o[1]?0==o[2]?(x=3,a+=4):x=2:x=3:(x=1,a+=3),a%=6;break;case 5:w="F",a=v+1}g(i,w+x,e,n,a)}else g(i,"N",e,n,0)}else 1==i&&g(i,"O"+o,e,n,Math.floor(a))}}()}function g(t,e,n,i,o){let a=8*Math.sqrt(3)/2,r="Grass_";3==t?r="Mount_":4==t?r="Tree_":0==t&&(r="Water_");let s=c[r+e].clone();s.position.set(n*a*2-48+i*a,8*i*1.5,-1.6),o&&(o=6-o,s.rotation.z=o*Math.PI/3),p.push(s),Nt(s)}function v(){p.forEach((t=>{Wt(t)})),p=[]}function w(){v();for(let t=0;t<32;t++){u[t]=[];for(let e=0;e<32;e++)u[t][e]=1}}function x(t,e){let n=8*Math.sqrt(3)/2,i=Math.floor((8+e)/12),o=Math.floor((t+48+8-i*n)/(2*n));return h.position.set(o*n*2-48+i*n,8*i*1.5,.8),[o,i]}let y={x:0,y:0};var _,b,z,M,S,E,k=6;function L(t,e){return(e=e||0)+(k=(9301*k+49297)%233280)/233280*((t=t||1)-e)}function A(t){f=t}function T(t){return c[t].clone()}var P=1024;Math.PI;let C=20,H=-.04;function I(t){let e;1==t?(e=450,b.shadow.camera.far=600,b.shadow.mapSize.width=512,b.shadow.mapSize.height=512):(e=150,b.shadow.mapSize.width=P,b.shadow.mapSize.height=P,b.shadow.camera.far=300),b.shadow.camera.left=-e,b.shadow.camera.right=e,b.shadow.camera.top=e,b.shadow.camera.bottom=-e,b.shadow.map&&(b.shadow.map.dispose(),b.shadow.map=null),_&&setTimeout((function(){_.update()}),1e3)}var B,N=n(9335),R=!1;var W=!1,q=0,D=0,F=0,V=0,Y=!1;function j(t){nt(t.clientX,t.clientY)}function O(t){return 1===t.which&&(W=!0,!0)}function U(t){if(2===t.which)return!1;W=!1,et()}function X(t){return W=!0,q=t.touches[0].clientX,D=t.touches[0].clientY,!0}function G(t){W&&(J||B.isControl()),W=!1,$&&(document.querySelector(".bubbleSelector").style.visibility="hidden",$=!1),et()}function K(t){nt(t.touches[0].clientX,t.touches[0].clientY)}var J,Z=[],Q=-1,$=!1;function tt(t){return t.preventDefault(),!1}function et(){if(J){J=void 0,document.querySelectorAll(".bubble").forEach((t=>{t.style.visibility="hidden"}));let t=document.querySelector(".overtext");t&&(t.style.visibility="hidden"),Q>=0&&Z[Q](F,V,0),function(t){Y=t;let e=document.querySelectorAll(".menuHidable");e.length&&e.forEach((e=>{e.style.visibility=t?"hidden":"visible"}))}(!1)}}function nt(t,e){J?function(t,e){let n=t-J.x,i=e-J.y,o=Math.sqrt(n*n+i*i),a=function(t,e){let n=Math.atan2(t,-e);return n<0&&(n=2*Math.PI+n),n}(n,i),r=document.querySelectorAll(".bubble"),s=2*Math.PI/r.length,l=a/s+s/2,d=Math.floor(l);d>=r.length&&(d=0),o>100&&(d=-1);let c="";r.forEach(((t,e)=>{e==d?(t.style.border="solid blue 6px",c=t.getAttribute("value")):t.style.border=""})),Math.PI;let p=document.querySelector(".overtext");d>-1?(p.style.visibility="visible",p.style.left=t+"px",p.style.top=e+"px",p.innerHTML=c,p.style.transform=n>25?"translate(28px,-50%)":n<-25?"translate(calc(-28px - 100%),-50%)":"translate(-50%,calc(-28px - 100%))"):p.style.visibility="hidden",Q=d}(t,e):(q=t,D=e)}function it(t){if(Y)return!1;13==t.which||192==t.which&&(window.pickTarget=i.pick(),window.pickTarget&&console.log("picked a "+window.pickTarget.type))}var ot,at,rt,st=n(4279),lt=0;var dt=[],ct=[],pt=[];function ut(t,e,n,i){let o=new st.Body({mass:n}),a=new st.Box(new st.Vec3(e.x,e.y,e.z));o.addShape(a),o.position.set(i.x,i.y,i.z),o.id=t,dt.push(t),ct[t]=o,ot.push(o),at.addBody(o);let r=qt(2*e.x,2*e.y,2*e.z,i.x,i.y,i.z);Nt(r),pt[t]=r}var ht,ft,mt,gt,vt,wt,xt,yt,_t,bt,zt,Mt,St,Et,kt,Lt=n(145),At=n(3038),Tt=(n(5857),n(9596));function Pt(){var t;(ht=new r.cPb(45,window.innerWidth/window.innerHeight,1,5e3)).position.z=200,ht.position.y=-200,ht.up=new r.Pa4(0,0,1),ht.lookAt(new r.Pa4(0,0,0)),mt=new r.xsS,Ft=mt,bt=document.querySelector(".canvasHolder"),(ft=new r.CP7({antialias:!0,alpha:!0})).shadowMap.enabled=!0,ft.shadowMap.type=r.ntZ,ft.toneMapping=r.LY2,ft.outputEncoding=r.knz,ft.setClearColor(16744242,1),bt.appendChild(ft.domElement),yt=new Lt.E,t=r.rDY.merge([r.Vj0.standard.uniforms]),new r.jyz({uniforms:t,derivatives:!1,lights:!0,vertexColors:!0,vertexShader:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n    varying vec3 vNormal;\n    #ifdef USE_TANGENT\n        varying vec3 vTangent;\n        varying vec3 vBitangent;\n    #endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nuniform vec3 shirt;\nuniform vec3 wind;\n\nvoid main() {\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #ifdef USE_COLOR\n        if(color==vec3(0,0,1))\n            vColor.xyz = shirt;\n        else\n            vColor.xyz = color.xyz;\n        \n    #endif\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    #include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n    vNormal = normalize( transformedNormal );\n    #ifdef USE_TANGENT\n        vTangent = normalize( transformedTangent );\n        vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n    #endif\n#endif\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <displacementmap_vertex>\n\n    \n        if(color==vec3(1,0,0)){\n            float val=max(0.0, 1.0976 - transformed.z);\n            transformed.xyz+=val*wind;\n            transformed.y*=1.0+sin((wind.z+transformed.z)*4.0)/2.0;\n\n        }\n    \n\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    vViewPosition = - mvPosition.xyz;\n    #include <worldpos_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>\n}",fragmentShader:"\n    #define STANDARD\n#ifdef PHYSICAL\n    #define REFLECTIVITY\n    #define CLEARCOAT\n    #define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n    uniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n    uniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n    uniform float clearcoat;\n    uniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n    uniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n    varying vec3 vNormal;\n    #ifdef USE_TANGENT\n        varying vec3 vTangent;\n        varying vec3 vBitangent;\n    #endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n    #include <clipping_planes_fragment>\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <roughnessmap_fragment>\n    #include <metalnessmap_fragment>\n    #include <normal_fragment_begin>\n    #include <normal_fragment_maps>\n    #include <clearcoat_normal_fragment_begin>\n    #include <clearcoat_normal_fragment_maps>\n    #include <emissivemap_fragment>\n    #include <lights_physical_fragment>\n    #include <lights_fragment_begin>\n    #include <lights_fragment_maps>\n    #include <lights_fragment_end>\n    #include <aomap_fragment>\n    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n    #ifdef TRANSPARENCY\n        diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n    #endif\n    gl_FragColor = vec4( outgoingLight,1.-(((0.2125 * outgoingLight.r) + (0.7154 * outgoingLight.g) + (0.0721 * outgoingLight.b)) ) );\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}",roughness:0,metalness:1}),Ft=mt,vt=ht,Ht(),zt=new At.x(ft);let e=new Tt.G(mt,ht,300,200);e.kernelRadius=6,e.minDistance=15e-5,e.maxDistance=.001,zt.addPass(e),window.ssao=e,new r.vBJ({color:7722446}),new r.Wid({color:2156703,metalness:0,roughness:1}),new r.Wid({color:2156703,metalness:0,roughness:1}),new r.Wid({color:5534117,metalness:0,roughness:1});let n=new r.Wid({color:15398690,metalness:0,roughness:1});Mt=new r.Wid({color:13576926,metalness:0,roughness:1}),new r.Wid({color:11930379,metalness:0,roughness:1}),new r.Wid({color:15398690,metalness:0,roughness:1}),gt=new r.ZAu,St=new r.ZAu;let i=new r.vBJ({color:16777215,side:r.Wl3}),o=new r.vBJ({color:3282968,side:r.Wl3}),a=qt(1,1,2,0,0,0,n),s=qt(1,.2,1,0,.5,.5,i),l=qt(.3,.2,.3,0,.6,.5,o);St.add(a),St.add(s),St.add(l),gt.add(St);let d=qt(.5,.5,1.5,.75,0,20,new r.vBJ({color:14035807}));return gt.add(d),mt.add(gt),function(){let t=new r.zf8(6,16);kt=new r.vBJ({color:4907322}),new r.vBJ({color:15461888}),(Et=new r.Kj0(t,kt)).position.z=.05,mt.add(Et)}(),new r.Pa4(1,0,0),S=new r.Pa4(0,0,0),Rt(E=new r.Mig(9408399)),(b=new r.Ox3(14702423,.5)).position.set(0,250,0),b.castShadow=!0,Rt(b),(M=new r.Tme).position.set(20,0,20),Rt(M),b.target=M,b.shadow.mapSize.width=P,b.shadow.mapSize.height=P,b.shadow.camera.near=1,I(0),b.shadow.radius=2.2,b.shadow.bias=-5e-4,(z=b.clone()).shadow.mapSize.width=256,z.shadow.mapSize.height=256,z.shadow.radius=0,z.visible=!1,Rt(z),window.sunLight=b,_?_.visible=!0:Nt(_=new r.Rki(b.shadow.camera)),function(t,e,n,i){!function(t,e){(B=new N.z(e,t)).mouseButtons={LEFT:void 0,MIDDLE:r.RsA.ROTATE,RIGHT:r.RsA.PAN},B.touches={ONE:r.QmN.PAN,TWO:r.QmN.DOLLY_ROTATE},B.maxPolarAngle=1.3,B.isControl(),B.addEventListener("change",(function(t){var e;B.target.distanceTo(B.object.position)>75?2!=R&&(R=2,I(1)):1!=R&&(R=1,I(0)),e=B.target,S.set(e.x,e.y,e.z),b.position.x=e.x,b.position.y=e.y,M.position.x=e.x}))}(e,n)}(0,bt,ht),setTimeout((function(){It()}),1),bt}function Ct(t,e,n,i){yt.load("./"+t,(t=>{let o;if(t.scene.rotation.x=Math.PI/2,t.scene.traverse((function(t){t instanceof r.Kj0&&(o=t,n||(t.material=i?new r.Wid({color:i,metalness:0,roughness:1}):new r.Wid({vertexColors:r.jSK,metalness:0,roughness:1}),t.material.needsUpdate=!0))})),t.scene.children[0],o){var a=t.animations;if(a&&a.length){_t=new r.Xcj(o);for(var s=0;s<a.length;s++){var l=a[s];action=_t.clipAction(l),action.timeScale=.002,action.play()}}}e(t.scene)}),(t=>{console.log(t.loaded/t.total*100+"% loaded")}),(t=>{console.error("An error happened",t)}))}function Ht(){window.screen.width>window.innerWidth?(wt=window.innerWidth,xt=window.innerHeight):(wt=window.screen.width,xt=window.screen.height),ht.aspect=wt/xt,ht.updateProjectionMatrix(),ft.setPixelRatio(.5),ft.setSize(wt,xt)}function It(t){(function(){at.step(.01);for(var t=0;t!==ot.length;t++){if(null!=ot[t].id){let e=pt[ot[t].id];e.position.copy(ot[t].position),e.quaternion.copy(ot[t].quaternion)}ot[t].position.z<-100&&(ot[t].position.set(80*Math.random()-40,80*Math.random()-40,100),ot[t].velocity.set(0,0,0),ot[t].collisionResponse=!1,ot[t].sleep())}let e=B.object.rotation.z,n=rt.velocity.length();ne.left?(n<2&&(rt.velocity.x-=2*Math.cos(e),rt.velocity.y-=2*Math.sin(e)),lt=e+Math.PI/2,rt.quaternion.setFromAxisAngle(new st.Vec3(0,0,1),lt)):ne.right?(n<2&&(rt.velocity.x+=2*Math.cos(e),rt.velocity.y+=2*Math.sin(e)),lt=e-Math.PI/2,rt.quaternion.setFromAxisAngle(new st.Vec3(0,0,1),lt)):ne.up?(n<2&&(rt.velocity.x-=2*Math.sin(e),rt.velocity.y+=2*Math.cos(e)),lt=e,rt.quaternion.setFromAxisAngle(new st.Vec3(0,0,1),lt)):ne.down&&(n<2&&(rt.velocity.x+=2*Math.sin(e),rt.velocity.y-=2*Math.cos(e)),lt=e+Math.PI,rt.quaternion.setFromAxisAngle(new st.Vec3(0,0,1),lt)),St.position.copy(rt.position),St.quaternion.copy(rt.quaternion)})(),gt.rotation.z>Math.PI/16||(gt.rotation.z,Math.PI),function(){var t=new r.Pa4;t.set(q/window.innerWidth*2-1,-D/window.innerHeight*2+1,.5),t.unproject(ht);var e=t.sub(ht.position).normalize(),n=-ht.position.z/e.z,i=ht.position.clone().add(e.multiplyScalar(n));Et.position.x=i.x,Et.position.y=i.y,Et.position.z=8,function(t){F=t.x,V=t.y,t.z,W?function(t,e){let[n,i]=x(t,e),o=u.length;(n!=y.x||i!=y.y)&&n>-1&&i>-1&&n<o&&i<o&&(m(n,i,f),y.x=n,y.y=i)}(F,V):x(F,V)}(Et.position)}(),C+=H,C<0?(C=0,H=-H):C>40&&(C=40,H=-H),C>10&&(b.color.setHex(16777215),E.color.setHex(6316128),Vt(11594237,1)),b.position.z=200+4*C,M.position.y=S.y-4*C,ft.render(Ft,vt),requestAnimationFrame(It)}function Bt(t,e){ft.setSize(256,256),ft.setClearColor(16777215,0),t&&e?ft.render(t,e):ft.render(getScene(),ht);let n=ft.domElement.toDataURL();return ft.setSize(wt,xt),n}function Nt(t){gt.add(t)}function Rt(t){mt.add(t)}function Wt(t){gt.remove(t)}function qt(t,e,n,i,o,a,s){let l=new r.nvb(t,e,n);s||(s=Mt);let d=new r.Kj0(l,s);return d.castShadow=!0,d.position.x=i||0,d.position.y=o||0,d.position.z=a||0,d}function Dt(t,e){e&&t?(vt=e,Ft=t):(Ft=mt,vt=ht)}var Ft=0;function Vt(t,e){ft.setClearColor(t,e)}var Yt,jt=n(6809),Ot=!1;let Ut,Xt,Gt;var Kt,Jt,Zt,Qt,$t,te,ee,ne,ie=!1,oe=1,ae=0,re=void 0,se={x:0,y:0};function le(t){Qt&&(Qt.classList.remove("cardMax"),Qt.style.zIndex=2,Qt.focused=void 0)}function de(){clearTimeout(te),te=setTimeout((function(){fe(),Ht()}),250)}function ce(t){let e=0,n=[],i=0==oe||2==oe;t?(e=Kt.length,n=Kt):Kt.forEach((t=>{-1!=t.spot&&(n.push(t),e++)})),i?(Jt.style.height=64*(e>0?e:1)+"px",Jt.style.width="82px"):(Jt.style.width=64*(e>0?e:1)+"px",Jt.style.height="82px");let o=Jt.getBoundingClientRect();Zt=o;let a,r=o.width,s=o.height;a=i?s/e:r/e,t||(i?n.sort((function(t,e){return parseInt(t.style.top)-parseInt(e.style.top)})):n.sort((function(t,e){return parseInt(t.style.left)-parseInt(e.style.left)})));for(let p=0;p<e;p++)$t[p]=i?{x:o.left+r/2,y:32+o.top+p*a}:{x:32+o.left+p*a,y:o.top+s/2},re&&re==n[p]&&(se=$t[p]),t&&(Kt[p].spot=p,$t[p].app=n[p]),l=n[p],d=$t[p].x,c=$t[p].y,void 0||(l.pos={x:d,y:c}),l.style.left=d+"px",l.style.top=c+"px";var l,d,c;let p=barHandle.getBoundingClientRect();if(i){let t=p.left+p.width/2;ue({x:t,y:p.top},{x:t,y:p.bottom})}else{let t=p.top+p.height/2;ue({x:p.left,y:t},{x:p.right,y:t})}}function pe(){requestAnimationFrame(pe)}function ue(t,e){t.x,t.y,e.x,e.y}function he(t){if(function(t){if(ie){ae++;let e=t.clientX,n=t.clientY,i=e-window.innerWidth/2,o=n-window.innerHeight/2,a=Math.atan2(o,i)/Math.PI,r=Math.abs(a);r<.25?2!=oe&&(oe=2,fe()):r<.75?a<0?3!=oe&&(oe=3,fe()):1!=oe&&(oe=1,fe()):0!=oe&&(oe=0,fe())}}(t),re){if(ae++,re.pos={x:t.clientX+re.offset.x,y:t.clientY+re.offset.y},t.clientY>Zt.top&&t.clientY<Zt.bottom&&t.clientX>Zt.left&&t.clientX<Zt.right){let t=se,e={x:t.x-re.pos.x,y:t.y-re.pos.y};re.pos={x:t.x-e.x/3,y:t.y-e.y/3},re.moving&&(re.moving=void 0,re.spot=0,ce())}else re.moving||(re.moving=!0,re.spot=-1,ce());re.style.left=re.pos.x+"px",re.style.top=re.pos.y+"px"}}function fe(){2==oe?(Jt.style.left=window.innerWidth-48+"px",Jt.style.top="50%",ce(),barHandle.style.transform="translate(-200%,-50%)",barHandle.style.width="32px",barHandle.style.height="80%",Jt.style.borderWidth="0px 0px 0px 6px"):3==oe?(barHandle.style.transform="translate(-50%,100%)",Jt.style.left="50%",Jt.style.top="48px",ce(),barHandle.style.height="32px",barHandle.style.width="80%",Jt.style.borderWidth="0px 0px 6px 0px"):1==oe?(barHandle.style.transform="translate(-50%,-200%)",Jt.style.left="50%",Jt.style.top=window.innerHeight-48+"px",ce(),barHandle.style.height="32px",barHandle.style.width="80%",Jt.style.borderWidth="6px 0px 0px 0px"):(barHandle.style.transform="translate(100%,-50%)",Jt.style.left="48px",Jt.style.top="50%",ce(),barHandle.style.width="32px",barHandle.style.height="80%",Jt.style.borderWidth="0px 6px 0px 0px")}function me(t){ie&&(ie=!1,console.log(ae),ae<10&&le()),re?(re.classList.remove("cardMove"),console.log(ae),ae<10?Qt&&Qt==re?(re.classList.remove("cardMax"),re.focused=void 0,Qt=void 0,re.style.zIndex=2,window.history.pushState({},"","/")):(le(),function(t){let e=Kt[t];e&&(e.classList.add("cardMax"),e.focused=!0,e.style.zIndex=0,Qt=e)}(re.appId),window.history.pushState({appId:re.appId},re.name,"?id="+re.appId+"&app="+re.id)):(ce(),console.log("fix bar also"))):(ce(),console.log("fix bar")),re=void 0,ae=0}ee=document.querySelector("#main"),ne={},function(t){var e;(e=document.createElement("style")).innerHTML='\n\t\t.uiSysTop{\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tposition: relative;\n\t\tmax-width: 600px;\n\t\theight: 64px;\n\t\tborder-radius: 32px;\n\t\ttransform: translate(-50%);\n\t\tbox-shadow: 3px 3px 3px #0005;\n\t\tleft: 50%;\n\t\tbackground: #E0F9D5;\n\t\tmargin: 12px;\n\t\tanimation: uiSysUnfold 1s;\n\t\toverflow: hidden;\n\t\tline-height: 16px;\n\t}\n\t.uiSysTop div{\n\n\t\tmargin: 16px;\n\t\tmargin-left: 0px;\n\t\tflex: 0 0 64px;\n\t}\n\t.uiSysTop span{\n\t\tmargin-right: 48px;\n\t\tmargin-top: 8px;\n\t\tline-height: normal;\n\t\tvertical-align: middle;\n\t\tflex: 1;\n\n\t}\n\t@keyframes uiSysUnfold{\n\t\t0%{\n\t\t\tmax-width: 64px;\n\t\t\ttop: -64px;\n\t\t\topacity: 0.2;\n\t\t}\n\t\t50%{\n\t\t\tmax-width: 64px;\n\t\t\ttop:0px;\n\t\t\topacity: 1;\n\t\t}\n\t\t100%{\n\t\t\ttop: 0px;\n\t\t}\n\t}\n\t@keyframes uiSysFold{\n\t\t100%{\n\t\t\tmax-width: 64px;\n\t\t\ttop: -64px;\n\t\t\topacity: 0.2;\n\t\t\theight: 0;\n\t\t}\n\t\t50%{\n\t\t\tmax-width: 64px;\n\t\t\ttop:0px;\n\t\t\topacity: 1;\n\t\t}\n\t\t0%{\n\t\t\ttop: 0px;\n\n\t\t}\n\t}\n\t@keyframes uiSysMini{\n\t\t100%{\n\t\t\tmax-width: 64px;\n\t\t}\n\t\t50%{\n\t\t\tmax-width: 64px;\n\n\t\t}\n\t\t0%{\n\t\t\t\n\t\t}\n\t}\n\t@keyframes uiSysMax{\n\t\t0%{\n\t\t\tmax-width: 64px;\n\t\t}\n\t\t50%{\n\t\t\tmax-width: 64px;\n\t\t}\n\t\t100%{\n\t\t\tleft: 50%;\n\t\t}\n\t}\n\n\t.uiHolderSysTop{\n\t\twidth: 600px;\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%);\n\t\t/*border: 3px #0999 dotted;*/\n\t\ttransition: height 1s;\n\t}\n\t.uiIcon{\n\t\tfloat: left;\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tbackground-repeat: no-repeat;\n\t    background-size:32px;\n\t    background-position: center center;\n\t\tbackground-image: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z"/></svg>\');\n\t}\n\t.uiIconWarning{\n\t\tbackground-image: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg>\') !important;\n\t}\n\t.uiIconError{\n\t\tbackground-image: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>\') !important;\n\t}\n\t.uiIconNet{\n\t\tbackground-image: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M23.64 7c-.45-.34-4.93-4-11.64-4-1.5 0-2.89.19-4.15.48L18.18 13.8 23.64 7zm-6.6 8.22L3.27 1.44 2 2.72l2.05 2.06C1.91 5.76.59 6.82.36 7l11.63 14.49.01.01.01-.01 3.9-4.86 3.32 3.32 1.27-1.27-3.46-3.46z"/></svg>\') !important;\n\t}\n\t.uiIconPerson{\n\t\tbackground-image: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>\') !important;\n\t\t\n\t}\n\t.uiIconTime{\n\t\tbackground-image: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/></svg>\') !important;\n\t}\n\n\t.uiIconSuccess{\n\t\tbackground-image: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/></svg>\') !important;\n\t}\n\t\n\t.uiCloseButton{\n\t\tposition: absolute;\n\t\tright: 0;\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tbackground-repeat: no-repeat;\n\t    background-size:16px;\n\t    background-position: center center;\n\t\tbackground-image: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>\');\n\t\t\n\t}\n\n\t.uiCursorMessage{\n\t\tmin-width: 64px;\n\t\theight: 64px;\n\t\tborder: 5px solid white;\n\t\tbackground-color: #FBAB7E;\n\t\tbackground-image: linear-gradient(270deg, #FBAB7E 0%, #F7CE68 100%);\n\n\t\tcolor: white;\n\t\tfont-size: 24px;\n\t\tfont-weight: bold;\n\t\tfont-stretch: ultra-condensed;\n\t\ttransform: translate(-50%,-50%);\n\t\tanimation: uiWobble 0.3s;\n\t\tborder-radius: 32px;\n\t\tbox-sizing: border-box;\n\t\tposition: absolute;\n\t\tline-height: 48px;\n\t\tpadding: 0 8px 0 8px;\n\t\tfont-family: sans-serif;\n\t}\n\n\t@keyframes uiWobble{\n\t\t0%{\n\t\t\ttransform: translate(-50%,-50%) scale(0.6,0.4);\n\t\t}\n\t\t33%{\n\t\t\ttransform: translate(-50%,-50%) scale(0.9,1.15);\n\t\t}\n\t\t66%{\n\t\t\ttransform: translate(-50%,-50%) scale(0.8,0.9);\n\t\t}\n\t\t100%{\n\n\t\t}\n\t}\n\n\t@keyframes uiFade{\n\t\t0%{\n\t\t\topacity: 1;\n\t\t\ttransform: translate(-50%,-50%);\n\t\t}\n\t\t100%{\n\t\t\topacity: 0;\n\t\t\ttransform: translate(-50%,0%)\n\t\t}\n\t}\n\n\t',document.body.appendChild(e),t?Ut=t:(Ut=document.querySelector("#main"),Ut||(Ut=document.body)),Ut?(Xt=document.createElement("duv"),Xt.className="uiHolderSysTop",Ut.appendChild(Xt),Gt=document.createElement("input"),Gt.type="text",Gt.style.position="fixed",Gt.taxindex="-1",Gt.style.display="none",Gt.style.pointerEvents="none",Ut.appendChild(Gt)):console.error("UI.js:: uh oh! no system dom element found")}(ee),function(){ot=[],(at=new st.World).quatNormalizeSkip=0,at.quatNormalizeFast=!1,at.broadphase=new st.NaiveBroadphase;let t=new st.Box(new st.Vec3(1,1,2));for(let e=0;e<1;e++){let e=new st.Body({mass:4});e.addShape(t),e.position.set(0,0,60),at.addBody(e),rt=e,window.playerBody=rt}new st.Material({name:"gooProperty",friction:10,restitution:-1}).name="gooProperty",new st.Material({name:"wallProperty",friction:.1,restitution:1}).name="wallProperty",function(){let t=new st.Plane,e=new st.Body({mass:0});e.addShape(t),at.addBody(e)}()}(),window.addEventListener("keydown",(t=>{switch(console.log(t.keyCode),t.keyCode){case 37:case 65:ne.left=!0;break;case 39:case 68:ne.right=!0;break;case 38:case 87:ne.up=!0;break;case 40:case 83:ne.down=!0;break;case 32:make();break;case 66:for(let t=0;t<12;t++)make();break;case 69:f=2==f?3:3==f?4:4==f?0:0==f?1:2;break;case 71:makeMan();break;case 81:l?Dt(o,a):Dt(),l=!l;break;case 82:Yt.emit("physReset");break;case 84:break;case 89:Yt.emit("physMake",{x:.5,y:.5,z:.5},2,{x:0,y:0,z:30});break;case 8:A(1)}})),window.addEventListener("keyup",(t=>{switch(t.keyCode){case 37:case 65:ne.left=!1;break;case 39:case 68:ne.right=!1;break;case 38:case 87:ne.up=!1;break;case 40:case 83:ne.down=!1}})),Pt(),Ct("./assets/models/Hex.glb",(t=>{console.log("got children "+t.children.length);let e=new r.Wid({vertexColors:r.jSK,metalness:0,roughness:1});for(let a=0;a<t.children.length;a++){let r=t.children[a];r.position.set(0,0,60),r.scale.set(8,8,8),r.material=e,r.receiveShadow=!0,(r.name.startsWith("Mount")||r.name.startsWith("Tree"))&&(r.castShadow=!0),c[r.name]=r;let l=[];if(r.geometry){let t=r.geometry.attributes.color.array.length/4;for(let e=0;e<t;e++){let t=4*e,a=(n=r.geometry.attributes.color.array[0+t],i=r.geometry.attributes.color.array[1+t],o=r.geometry.attributes.color.array[2+t],function(t,e,n){return"#"+s(t)+s(e)+s(n)}(n=Math.floor(256*n),i=Math.floor(256*i),o=Math.floor(256*o)));l[a]=a}console.log(l)}}var n,i,o;function a(t,e){t.addEventListener("click",(t=>{A(e)}))}let l=document.querySelectorAll(".hex");l[0].appendChild(d(T("Grass_O1"))),a(l[0],1),l[1].appendChild(d(T("Tree_N"),75,-75)),a(l[1],4),l[2].appendChild(d(T("Grass_P1"))),a(l[2],2),l[3].appendChild(d(T("Mount_N"),90)),a(l[3],3),l[4].appendChild(d(T("Water_N"))),a(l[4],0),w(),window.hex=c,window.place=m,window.land=g,window.clearLand=w})),function(){let t=new r.vBJ({color:4907322}),e=new r.ZAu,n=new r.BKK(.6,8),i=new r.Kj0(n,t);i.position.set(8,0,0),e.add(i);for(let t=0;t<6;t++){let n=i.clone();n.rotation.z=t*Math.PI/3,n.position.set(8*Math.cos(n.rotation.z),8*Math.sin(n.rotation.z),0),e.add(n)}e.position.z+=6,Nt(e),h=e}(),function(){let t=8*Math.sqrt(3)/2;var e=new r.ZXM;for(let n=0;n<32;n++)for(let i=0;i<32;i++)e.vertices.push(new r.Pa4(-48+t+n*t*2+i*t,8*i*1.5-4,.8)),e.vertices.push(new r.Pa4(-48+t+n*t*2+i*t,4+8*i*1.5,.8)),e.vertices.push(new r.Pa4(-48+t+n*t*2+i*t,4+8*i*1.5,.8)),e.vertices.push(new r.Pa4(n*t*2-48+i*t,8+8*i*1.5,.8)),e.vertices.push(new r.Pa4(n*t*2-48+i*t,8+8*i*1.5,.8)),e.vertices.push(new r.Pa4(-48-t+n*t*2+i*t,4+8*i*1.5,.8));var n=new r.nls({color:16777215});Nt(new r.ejS(e,n))}(),function(){let t=document.querySelector(".canvasHolder");t.addEventListener("mousemove",j),t.addEventListener("mousedown",O),t.addEventListener("mouseup",U),t.addEventListener("touchstart",X),t.addEventListener("touchend",G),t.addEventListener("touchmove",K),window.addEventListener("contextmenu",tt),window.addEventListener("keyup",it)}(),function(){o=new r.xsS,(a=new r.cPb(45,1,1,1e3)).position.z=200,a.position.y=-200,a.up=new r.Pa4(0,0,1),a.lookAt(new r.Pa4(0,0,0));var t=new r.Mig(9408399);o.add(t)}(),(Yt=jt("/dand-dev")).on("physUpdate",(function(t){Ot?(function(t){t.forEach((t=>{let e=ct[t[0]];e.position.copy(t[1]),e.quaternion.copy(t[2]),e.velocity.copy(t[3]),e.angularVelocity.copy(t[4])}))}(t),console.log("phys synced")):console.log("!!!phys IGNORED")})),Yt.on("physInit",(function(t){pt.forEach((t=>{Wt(t)})),pt=[],ot.forEach((t=>{at.remove(t)})),ot=[],dt=[],ct=[],t.forEach((t=>{ut(t[0],t[1],t[2],{x:0,y:0,z:0})})),Ot=!0})),Yt.on("physMake",(function(t,e,n,i){ut(t,e,n,i),console.log("made")})),Yt.on("connect",(()=>{console.log("created a connection"),Yt.emit("physInit")})),console.log("online code ran"),function(t){let e=document.querySelectorAll(".card");Kt=[],e.forEach((t=>{Kt.push(t)})),Kt.forEach(((t,e)=>{t.style.top=Math.random()*window.innerWidth+"px",t.style.left=Math.random()*window.innerHeight+"px",t.offset={x:0,y:0},t.appId=e,t.addEventListener("pointerdown",(e=>{!function(t,e){t.focused||(re=t,t.pos={x:parseInt(t.style.left),y:parseInt(t.style.top)},se={x:t.pos.x,y:t.pos.y},t.offset={x:t.pos.x-e.clientX,y:t.pos.y-e.clientY},t.classList.add("cardMove"),t.moving=void 0)}(t,e)})),t.addEventListener("dragstart",(t=>{t.preventDefault()}))})),window.addEventListener("pointerup",me),window.addEventListener("resize",de),window.addEventListener("pointermove",he),function(){Jt=document.querySelector("#bar");let t=document.querySelector("#barHandle");t.addEventListener("pointerdown",(t=>{ie=!0})),t.addEventListener("dragstart",(t=>{t.preventDefault()})),$t=[],t.style.transform="translate(-50%,-200%)",Jt.style.left="50%",Jt.style.top=window.innerHeight-64+"px",ce(!0)}(),de(),pe()}()},418:()=>{}},0,[[6426,666,216,977]]]);